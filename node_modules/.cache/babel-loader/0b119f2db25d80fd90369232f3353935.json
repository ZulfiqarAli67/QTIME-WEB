{"ast":null,"code":"import _objectSpread from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import CodeDialog from\"../time-entry-code/code_dialog\";import DataTable from\"../common/DataTable\";import CodeEntryWeek from\"../time-rentry-week/index\";import StatusBar from\"../status-bar/StatusBar\";import swal from\"sweetalert\";import*as constantClass from\"../Constants/Constants\";import{useGridApiRef}from\"@material-ui/data-grid\";import React,{useEffect,useState}from\"react\";import{getEmptyHours,getNewCode}from\"../time-entry-sheet/data\";import{makeStyles,createStyles}from\"@material-ui/core\";import CommentDialog from\"../time-entry-sheet/comment/dialog\";import CopyDialog from\"../time-entry-sheet/copy/dialog\";import{timeSheetColumns,totalColumns}from\"../time-entry-sheet/Columns/timeSheetColumns\";import{useLoader}from\"../../contexts/use-loader\";import useFetch from\"../../contexts/use-effect\";import\"./timesheet.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return createStyles({root:{width:\"100%\",\"& > * + *\":{marginTop:theme.spacing(2)}}});});var Timesheet=function Timesheet(props){var classes=useStyles();var _useLoader=useLoader(),showLoader=_useLoader.showLoader,hideLoader=_useLoader.hideLoader;var _useFetch=useFetch(),qTimeSaveFn=_useFetch.qTimeSaveFn,copyTimeSheet=_useFetch.copyTimeSheet,getEndingWeek=_useFetch.getEndingWeek,getTimeSheetData=_useFetch.getTimeSheetData;var timeSheetref=useGridApiRef();var totalTimeSheetRef=useGridApiRef();var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),timeSheetDataSet=_React$useState2[0],setTimeSheetDataSet=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),rows=_React$useState4[0],setRows=_React$useState4[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openCommentDialog=_useState4[0],setOpenCommentDialog=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isDataTableLoading=_useState6[0],setIsDataTableLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDataTableEditable=_useState8[0],setIsDataTableEditable=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),openCopyDialog=_useState10[0],setOpenCopyDialog=_useState10[1];var _useState11=useState(timeSheetColumns),_useState12=_slicedToArray(_useState11,2),timeSheetHeader=_useState12[0],updateTimeSheetHeader=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),totalTimeSheetRecords=_useState14[0],setTotalTimeSheetRecords=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),footerMessage=_useState16[0],setFooterMessage=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),selectionRowIndex=_useState18[0],setselectionRowIndex=_useState18[1];var _useState19=useState(getNewCode()),_useState20=_slicedToArray(_useState19,2),projectCode=_useState20[0],setProjectCode=_useState20[1];var _React$useState5=React.useState({}),_React$useState6=_slicedToArray(_React$useState5,2),editRowsModel=_React$useState6[0],setEditRowsModel=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),editTotalRowsModel=_React$useState8[0],setEditTotalRowsModel=_React$useState8[1];var _useState21=useState(1),_useState22=_slicedToArray(_useState21,2),submitBtnCaption=_useState22[0],setsubmitBtnCaption=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),submittedStatus=_useState24[0],setsubmittedStatus=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),employeeComment=_useState26[0],setEmployeeComment=_useState26[1];var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),copyTimeSheetPayDateData=_useState28[0],setCopyTimeSheetPayDateData=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),periods=_useState30[0],setPeriods=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),updatedField=_useState32[0],setUpdatedField=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),selectedTimeSheetPayDate=_useState34[0],setSelectedTimeSheetPayDate=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),selectedEmployeeId=_useState36[0],setSelectedEmployeeId=_useState36[1];var _useState37=useState(\"Display\"),_useState38=_slicedToArray(_useState37,2),newDisplayBtnCaption=_useState38[0],setNewDisplayBtnCaption=_useState38[1];var _useState39=useState({employeeComment:\"\",approver1Comment:\"\",approver2Comment:\"\",reasonCode:\"\",selectedId:\"\",approver:undefined}),_useState40=_slicedToArray(_useState39,2),commentObject=_useState40[0],setCommentObject=_useState40[1];useEffect(function(){if(updatedField.length>0){setUpdatedField(\"\");var total=calculateColumnTotal(rows,updatedField);if(totalTimeSheetRecords.length>0){if(total.includes(\".\")){totalTimeSheetRecords[0][updatedField]=total;}else{totalTimeSheetRecords[0][updatedField]=total+\".0\";}var rowTotal=calculateTotalDataTableRow(totalTimeSheetRecords);totalTimeSheetRecords[0][\"total\"]=rowTotal;setTotalTimeSheetRecords(_toConsumableArray(totalTimeSheetRecords));}}},[updatedField]);var calculateTotalDataTableRow=function calculateTotalDataTableRow(totaldtRecords){if(totaldtRecords.length>0){var total=calculateRowTotal(totaldtRecords[0]);return total;}};var handleEmployeeChange=function handleEmployeeChange(params){var employeeId=params.target.value.split(\"-\")[0];setSelectedEmployeeId(employeeId);setNewDisplayBtnCaption(\"Display\");setRows([]);setTotalTimeSheetRecords([]);setsubmitBtnCaption(-100);};var handleWeekObjectChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(obj,val){var payDate,selectedDateObj,updatedTimesheetObj,payDateList,filteredWeeks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://let loggedInId = localStorage.getItem(constantClass.ID);\n//if (loggedInId) {\n//  setSelectedEmployeeId(loggedInId);\n//}\nsetNewDisplayBtnCaption(\"Display\");setsubmitBtnCaption(-100);setRows([]);setTotalTimeSheetRecords([]);payDate=obj[val].PayDate.split(\"T\")[0];selectedDateObj=new Date(payDate);selectedDateObj.setDate(selectedDateObj.getDate()-6);timeSheetColumns[11].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[12].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[13].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[14].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[15].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[16].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];selectedDateObj.setDate(selectedDateObj.getDate()+1);timeSheetColumns[17].headerName=selectedDateObj.toDateString().split(\" \")[2]+\" \"+selectedDateObj.toDateString().split(\" \")[1];updatedTimesheetObj=_toConsumableArray(timeSheetColumns);updateTimeSheetHeader(updatedTimesheetObj);setSelectedTimeSheetPayDate(payDate);_context.next=25;return getPeriods();case 25:payDateList=_context.sent;if(payDateList&&payDateList.length>0){filteredWeeks=payDateList.map(function(element){return{key:element.WeekNo,value:element.PayDate.split(\"T\")[0]};});setPeriods(payDateList);setCopyTimeSheetPayDateData(filteredWeeks);}case 27:case\"end\":return _context.stop();}}},_callee);}));return function handleWeekObjectChange(_x,_x2){return _ref.apply(this,arguments);};}();var setLoader=function setLoader(show){show?showLoader():hideLoader();};var handleClickOpen=function handleClickOpen(){switch(newDisplayBtnCaption){case\"New\":setOpen(!open);setProjectCode(getNewCode());break;case\"Display\":setTimeSheetData(selectedTimeSheetPayDate,true);setNewDisplayBtnCaption(\"New\");break;}};var handleSaveClicked=function handleSaveClicked(){saveTimeSheet();};var handleSubmitClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var updatedTimeSheetDataSet,newRow,updatedObject,result,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updatedTimeSheetDataSet=timeSheetDataSet;if(!updatedTimeSheetDataSet){_context2.next=22;break;}showLoader();newRow=updatedTimeSheetDataSet.fTmpTs[0];updatedObject=mapTimeSheetDataBeforeSave(rows,newRow);updatedTimeSheetDataSet.fTmpTs=updatedObject;_context2.t0=updatedTimeSheetDataSet.fTshSum[0].STATUS;_context2.next=_context2.t0===1?9:_context2.t0===4?11:_context2.t0===2?13:_context2.t0===3?15:17;break;case 9:updatedTimeSheetDataSet.fTshSum[0].STATUS=4;return _context2.abrupt(\"break\",17);case 11:updatedTimeSheetDataSet.fTshSum[0].STATUS=1;return _context2.abrupt(\"break\",17);case 13:updatedTimeSheetDataSet.fTshSum[0].STATUS=3;return _context2.abrupt(\"break\",17);case 15:updatedTimeSheetDataSet.fTshSum[0].STATUS=1;return _context2.abrupt(\"break\",17);case 17:_context2.next=19;return qTimeSaveFn(\"1\",updatedTimeSheetDataSet);case 19:result=_context2.sent;hideLoader();if(result.code===200){data=result.data;if(data){if(data.response){if(data.response.data.ExceptionMessage){swal(\"QTIME\",data.response.data.ExceptionMessage,\"error\");}}else{if(data.includes(\"ERROR\")){swal(\"QTIME\",data.split(\"ERROR -\")[1],\"error\");}else{swal(\"QTIME\",\"Timesheet has been saved successfully\",\"success\").then(function(value){setIsDataTableLoading(true);setTimeSheetData(selectedTimeSheetPayDate,false);setIsDataTableLoading(false);});}}}}else{swal(\"QTIME\",result.data.ExceptionMessage,\"error\");}case 22:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmitClick(){return _ref2.apply(this,arguments);};}();// const handleSubmitClick = async () => {\n//   let updatedTimeSheetDataSet: any = timeSheetDataSet;\n//   if (updatedTimeSheetDataSet) {\n//     let newRow: FTmpT = updatedTimeSheetDataSet.fTmpTs[0];\n//     let updatedObject: FTmpT[] = mapTimeSheetDataBeforeSave(rows, newRow);\n//     updatedTimeSheetDataSet.fTmpTs = updatedObject;\n//     updatedTimeSheetDataSet.fTshSum[0].STATUS = 4;\n//     var data: any = await Api.qTimeSaveFn(\"1\", updatedTimeSheetDataSet);\n//     if (data) {\n//       if (data.response) {\n//         if (data.response.data.ExceptionMessage) {\n//           swal(\"QTIME\", data.response.data.ExceptionMessage, \"error\");\n//         }\n//       } else {\n//         if (data.includes(\"ERROR\")) {\n//           swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\n//         } else {\n//           swal(\"QTIME\", \"Submitted Successfully\", \"success\").then(\n//             (value) => {\n//               setTimeSheetData(selectedTimeSheetPayDate, false);\n//             }\n//           );\n//         }\n//       }\n//     }\n//   }\n// };\nvar handleEditClick=function handleEditClick(){if(selectionRowIndex.length==0){swal(\"QTIME\",\"There are no record to edit.\",\"warning\");}else if(selectionRowIndex.length>1){swal(\"QTIME\",\"Please select a record to edit.\",\"warning\");}else if(selectionRowIndex.length==1){var selectedModel=rows.filter(function(element){return element.id==selectionRowIndex[0];});var selectedRow=selectedModel[0];var editCode={id:selectedRow.id,codeEntry:{l1:selectedRow.l1,jobCode:selectedRow.jobCode,l2:selectedRow.l2,l3:selectedRow.l3,l4:selectedRow.l4,l5:selectedRow.l5,classification:selectedRow.classification,location:selectedRow.location,l3Title:selectedRow.l3Title,l4Title:selectedRow.l4Title},int_change:selectedRow.int_change};setProjectCode(editCode);setOpen(true);}};var deleteRecords=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var timeSheetData,_loop,i,updatedData,newRow,result,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:timeSheetData=rows;_loop=function _loop(i){var selectedModelIndex=timeSheetData.findIndex(function(element){return element.id==selectionRowIndex[i];});if(selectedModelIndex>-1){timeSheetData[selectedModelIndex].int_change=-1;}};for(i=0;i<selectionRowIndex.length;i++){_loop(i);}if(!timeSheetDataSet){_context3.next=11;break;}updatedData=timeSheetDataSet;newRow=updatedData.fTmpTs[0];updatedData.fTmpTs=mapTimeSheetDataBeforeSave(timeSheetData,newRow);_context3.next=9;return qTimeSaveFn(\"1\",updatedData);case 9:result=_context3.sent;if(result.code===200){data=result.data;if(data.response){if(data.response.data.ExceptionMessage){swal(\"QTIME\",data.response.data.ExceptionMessage,\"error\");}}else{if(data.includes(\"ERROR\")){swal(\"QTIME\",data.split(\"ERROR -\")[1],\"error\");}else{swal(\"QTIME\",\"Deleted successfully\",\"success\").then(function(value){setIsDataTableLoading(true);setTimeSheetData(selectedTimeSheetPayDate,false);setIsDataTableLoading(false);});}}}else{swal(\"QTIME\",result.data.ExceptionMessage,\"error\");}case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteRecords(){return _ref3.apply(this,arguments);};}();// const deleteRecords = async () => {\n//   let timeSheetData: TimeEntryDataTable[] = rows;\n//   for (let i = 0; i < selectionRowIndex.length; i++) {\n//     const selectedModelIndex: number = timeSheetData.findIndex(\n//       (element: TimeEntryDataTable) => {\n//         return element.id == selectionRowIndex[i];\n//       }\n//     );\n//     if (selectedModelIndex > -1) {\n//       timeSheetData[selectedModelIndex].int_change = -1;\n//     }\n//   }\n//   if (timeSheetDataSet) {\n//     let updatedData: TimeSheetDTO = timeSheetDataSet;\n//     let newRow: FTmpT = updatedData.fTmpTs[0];\n//     updatedData.fTmpTs = mapTimeSheetDataBeforeSave(timeSheetData, newRow);\n//     const data: any = await Api.qTimeSaveFn(\"1\", updatedData);\n//     if (data.includes(\"ERROR\")) {\n//       swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\n//     } else {\n//       swal(\"QTIME\", \"Deleted Successfully\", \"success\").then((value) => {\n//         setTimeSheetData(selectedTimeSheetPayDate, false);\n//       });\n//     }\n//   }\n// };\nvar handleDeleteClicked=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(selectionRowIndex.length>0){swal({title:\"Are you sure?\",text:\"Do you want to delete the records\",icon:\"warning\",buttons:[\"Ok\",\"Cancel\"],dangerMode:true,closeOnEsc:false,closeOnClickOutside:false}).then(function(willDelete){if(!willDelete){deleteRecords();}});}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function handleDeleteClicked(){return _ref4.apply(this,arguments);};}();var handleClickOk=function handleClickOk(code){var newRows=[];if(code.id>0){newRows=rows.map(function(row){if(row.id===code.id){return _objectSpread(_objectSpread({},row),code.codeEntry);}else{return row;}});}else{var rowId=rows.length+1;code.id=rowId;var newRow=_objectSpread(_objectSpread(_objectSpread({id:rowId},code.codeEntry),getEmptyHours()),{},{total:0,int_change:0});newRows=[].concat(_toConsumableArray(rows),[newRow]);}setRows(newRows);setProjectCode(getNewCode());};var handleCommentClickOpen=function handleCommentClickOpen(){setOpenCommentDialog(!openCommentDialog);};{/*\r\n  const handleCommentClick = (commentObject: CommentScreenObject) => {\r\n    setOpenCommentDialog(!openCommentDialog);\r\n    if (commentObject) {\r\n      let data = timeSheetDataSet;\r\n      if (data) {\r\n        data.fTshSum[0].EMPNOTES = commentObject.employeeComment;\r\n        setEmployeeComment(data.fTshSum[0].EMPNOTES);\r\n      }\r\n\r\n      setIsDataTableLoading(true);\r\n      setTimeSheetDataSet(data);\r\n      setIsDataTableLoading(false);\r\n    }\r\n  };*/}var handleCommentClick=function handleCommentClick(commentObject){setOpenCommentDialog(!openCommentDialog);if(commentObject){var data=timeSheetDataSet;if(data){data.fTshSum[0].EMPNOTES=commentObject.employeeComment;setEmployeeComment(data.fTshSum[0].EMPNOTES);var commntObj={approver:commentObject.approver,approver1Comment:commentObject.approver1Comment,approver2Comment:commentObject.approver2Comment,employeeComment:data.fTshSum[0].EMPNOTES,reasonCode:commentObject.reasonCode,selectedId:commentObject.selectedId};setCommentObject(commntObj);}setIsDataTableLoading(true);setTimeSheetDataSet(data);setIsDataTableLoading(false);}};var handleCommentClose=function handleCommentClose(){setOpenCommentDialog(!openCommentDialog);};var handleCopyClick=function handleCopyClick(){// setWarningMessage(!warningMessage);\nsetOpenCopyDialog(!openCopyDialog);};var handleCopyOkClick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(val){var payDate,loggedInUserID,response,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!val){_context5.next=10;break;}if(val==\"\"){val=0;}payDate=periods.filter(function(date){return date.WeekNo==val;});loggedInUserID=localStorage.getItem(constantClass.ID)||\"\";if(selectedEmployeeId.trim().length==0){setSelectedEmployeeId(loggedInUserID);}if(!(payDate.length==1)){_context5.next=10;break;}_context5.next=8;return copyTimeSheet(selectedEmployeeId||loggedInUserID,selectedTimeSheetPayDate,payDate[0].PayDate.split(\"T\")[0]);case 8:response=_context5.sent;if(response.code===200){data=response.data;setTimeSheetDataResponse(response,false);}case 10:setOpenCopyDialog(!openCopyDialog);case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function handleCopyOkClick(_x3){return _ref5.apply(this,arguments);};}();{/*\r\n  const handleCopyOkClick = async (val: any) => {\r\n    if (val) {\r\n      if (val == \"\") {\r\n        val = 0;\r\n      }\r\n      const payDate: any = periods.filter((date: any) => {\r\n        return date.WeekNo == val;\r\n      });\r\n      if (payDate.length == 1) {\r\n        const response: ResponseDTO = await copyTimeSheet(\r\n          selectedEmployeeId,\r\n          selectedTimeSheetPayDate,\r\n          payDate[0].PayDate.split(\"T\")[0]\r\n        );\r\n        if (response.code === 200) {\r\n          const data = response.data;\r\n          setTimeSheetDataResponse(response, false);\r\n        }\r\n      }\r\n    }\r\n    setOpenCopyDialog(!openCopyDialog);\r\n  };\r\n  */}// const handleCopyOkClick = async (val: any) => {\n//   if (val) {\n//     if (val == \"\") {\n//       val = 0;\n//     }\n//     const payDate: any = periods.filter((date: any) => {\n//       return date.WeekNo == val;\n//     });\n//     if (payDate.length == 1) {\n//       const data: any = await Api.copyTimeSheet(\n//         selectedEmployeeId,\n//         selectedTimeSheetPayDate,\n//         payDate[0].PayDate.split(\"T\")[0]\n//       );\n//       if (data) {\n//         //SWAL\n//       }\n//     }\n//   }\n//   setOpenCopyDialog(!openCopyDialog);\n// };\nvar handleCopyClose=function handleCopyClose(){setOpenCopyDialog(!openCopyDialog);};var getPeriods=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var result,periodList,timeSheetPeriodList,i;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getEndingWeek();case 2:result=_context6.sent;if(!(result.code===200)){_context6.next=15;break;}periodList=result.data;timeSheetPeriodList=[];i=0;case 7:if(!(i<periodList.length)){_context6.next=15;break;}if(!(periodList[i].CurPayDate==1)){_context6.next=11;break;}timeSheetPeriodList.push(periodList[i]);return _context6.abrupt(\"return\",timeSheetPeriodList);case 11:timeSheetPeriodList.push(periodList[i]);case 12:i++;_context6.next=7;break;case 15:case\"end\":return _context6.stop();}}},_callee6);}));return function getPeriods(){return _ref6.apply(this,arguments);};}();// const getPeriods = async () => {\n//   const periodList = await Api.getEndingWeek();\n//   let timeSheetPeriodList: any = [];\n//   for (let i = 0; i < periodList.length; i++) {\n//     if (periodList[i].CurPayDate == 1) {\n//       timeSheetPeriodList.push(periodList[i]);\n//       return timeSheetPeriodList;\n//     }\n//     timeSheetPeriodList.push(periodList[i]);\n//   }\n// };\nvar getMonth=function getMonth(monthNo){var months=[];months[1]=\"Jan\";months[2]=\"Feb\";months[3]=\"Mar\";months[4]=\"Apr\";months[5]=\"May\";months[6]=\"Jun\";months[7]=\"Jul\";months[8]=\"Aug\";months[9]=\"Sep\";months[10]=\"Oct\";months[11]=\"Nov\";months[12]=\"Dec\";return months[monthNo];};var mapTimeSheetDataBeforeSave=function mapTimeSheetDataBeforeSave(rowsData,defaultStructure){return rows.map(function(element){return{Code01:element.l1,Code02:element.jobCode,//jobcode\nCode03:element.l2,// l2\nCode04:element.l3,//, //l3\nCode05:defaultStructure&&defaultStructure.Code05||\"\",Dept:element.l5,Classifctn:element.classification,Location:element.location,//,\nTotal:parseFloat(element.total.toString()),Code06:element.l4,Code07:defaultStructure&&defaultStructure.Code07||\"\",Code08:element.l5,Code09:defaultStructure&&defaultStructure.Code09||\"\",Code10:defaultStructure&&defaultStructure.Code10||\"\",EnteredBy:defaultStructure&&defaultStructure.EnteredBy||\"\",DateEdited:defaultStructure&&defaultStructure.DateEdited||\"1900-01-01T00:00:00\",DateAdded:defaultStructure&&defaultStructure.DateAdded||\"1900-01-01T00:00:00\",Holiday:defaultStructure&&defaultStructure.Holiday||\"\",Shift:defaultStructure&&defaultStructure.Shift||\"\",PCType:defaultStructure&&defaultStructure.PCType||\"\",OTF:defaultStructure&&defaultStructure.OTF||0,RowNo:element.id,ActDesc:defaultStructure&&defaultStructure.ActDesc||\"\",PostFreez:defaultStructure&&defaultStructure.PostFreez||false,L3_Title:defaultStructure&&defaultStructure.L3_Title||\"\",L4_Title:defaultStructure&&defaultStructure.Code06||\"\",Int_Change:element.int_change,Hrs01:parseFloat(element.day1.toString()),Hrs02:parseFloat(element.day2.toString()),Hrs03:parseFloat(element.day3.toString()),Hrs04:parseFloat(element.day4.toString()),Hrs05:parseFloat(element.day5.toString()),Hrs06:parseFloat(element.day6.toString()),Hrs07:parseFloat(element.day7.toString())};});};var saveTimeSheet=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var updatedData,newRow,updatedObject,result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!timeSheetDataSet){_context7.next=11;break;}updatedData=timeSheetDataSet;newRow=updatedData.fTmpTs[0];updatedObject=mapTimeSheetDataBeforeSave(rows,newRow);updatedData.fTmpTs=updatedObject;updatedData.fTshSum[0].INT_CHANGE=1;updatedData.fTshSum[0].INT_KEY=0;// if new records added\n_context7.next=9;return qTimeSaveFn(\"1\",updatedData);case 9:result=_context7.sent;if(result.code===200){swal(\"QTIME\",\"Timesheet has been saved successfully\",\"success\").then(function(value){setTimeSheetData(selectedTimeSheetPayDate,false);});// }\n}else{swal(\"QTIME\",result.data.ExceptionMessage,\"error\");}case 11:case\"end\":return _context7.stop();}}},_callee7);}));return function saveTimeSheet(){return _ref7.apply(this,arguments);};}();/*Rows related Calculation****************************************************************************************************************/var calculateRowTotal=function calculateRowTotal(updatedRow,fieldName){var total=0;var val=0;var fields=[\"day1\",\"day2\",\"day3\",\"day4\",\"day5\",\"day6\",\"day7\"];for(var i=0;i<fields.length;i++){if(updatedRow[fields[i]]==\"\"){val=0;}else{val=parseFloat(updatedRow[fields[i]]);}total=total+val;}return parseFloat(total).toFixed(1).toString();};var updateFinalTableRowTotal=function updateFinalTableRowTotal(){var field=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"total\";var fields=[\"day1\",\"day2\",\"day3\",\"day4\",\"day5\",\"day6\",\"day7\"];var val=0;var total=0;for(var i=0;i<fields.length;i++){if(totalTimeSheetRecords.length>0){if(totalTimeSheetRecords[0][fields[i]]==\"\"){val=0;}else{val=parseFloat(totalTimeSheetRecords[0][fields[i]]);}total=total+val;}}if(totalTimeSheetRecords.length>0){if(total.toString().includes(\".\")){totalTimeSheetRecords[0][field]=total;}else{totalTimeSheetRecords[0][field]=total+\".0\";}setTotalTimeSheetRecords(_toConsumableArray(totalTimeSheetRecords));}};var getCorrectFormattedTimeSheet=function getCorrectFormattedTimeSheet(value){if(value.trim().length>0){if(value.includes(\".\")){return value;}return value+\".0\";}return\"0.0\";};var setTimeSheetData=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(period,isDisplayPressed){var loggedInUserID,result;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:showLoader();loggedInUserID=localStorage.getItem(constantClass.ID)||\"\";if(selectedEmployeeId.trim().length==0){setSelectedEmployeeId(loggedInUserID);}_context8.next=5;return getTimeSheetData(selectedEmployeeId||loggedInUserID,period);case 5:result=_context8.sent;if(result.code===200){setTimeSheetDataResponse(result,isDisplayPressed);}else{swal(\"QTIME\",result.data.ExceptionMessage,\"error\");}hideLoader();case 8:case\"end\":return _context8.stop();}}},_callee8);}));return function setTimeSheetData(_x4,_x5){return _ref8.apply(this,arguments);};}();var setTimeSheetDataResponse=function setTimeSheetDataResponse(result,isDisplayPressed){var data=result.data;if(data.fTmpTs.length>0){var validRecords=data.fTmpTs.filter(function(element){return element.Code01&&element.Code01.length>0;});data.fTmpTs=validRecords;var entryData=data.fTmpTs.map(function(timeData,index){return{id:++index,jobCode:timeData.Code02,l1:timeData.Code01,l2:timeData.Code03,l3:timeData.Code04,l4:timeData.Code06,l5:timeData.Code08,classification:timeData.Classifctn,location:timeData.Location||\"\",l3Title:timeData.L3_Title,l4Title:timeData.L4_Title,total:getCorrectFormattedTimeSheet(timeData.Total),day1:getCorrectFormattedTimeSheet(timeData.Hrs01),day2:getCorrectFormattedTimeSheet(timeData.Hrs02),day3:getCorrectFormattedTimeSheet(timeData.Hrs03),day4:getCorrectFormattedTimeSheet(timeData.Hrs04),day5:getCorrectFormattedTimeSheet(timeData.Hrs05),day6:getCorrectFormattedTimeSheet(timeData.Hrs06),day7:getCorrectFormattedTimeSheet(timeData.Hrs07),int_change:timeData.Int_Change||0};});setIsDataTableLoading(true);setTimeSheetDataSet(data);setIsDataTableLoading(false);setRows(entryData);setsubmitBtnCaption(data.fTshSum[0].STATUS);setsubmittedStatus(data.fTshSum[0].StsTitle);setEmployeeComment(data.fTshSum[0].EMPNOTES);isGridEditable(data.fTshSum[0].STATUS);updateHoliday(data.fTmpTsMisc);setFooterMessage(data.fTmpTsMisc[0].MthToDateHrs);var commentObj={approver:undefined,approver1Comment:data.fTshSum[0].SUPNOTES,approver2Comment:data.fTshSum[0].PMNOTES,employeeComment:data.fTshSum[0].EMPNOTES,reasonCode:data.fTshSum[0].RjctReason,selectedId:\"\"};setCommentObject(commentObj);}var entryTotData=data.fTmpTsTot.map(function(timeData,index){if(index==0){return{id:index,title:timeData.Code01,total:getCorrectFormattedTimeSheet(timeData.Total),day1:getCorrectFormattedTimeSheet(timeData.Hrs01),day2:getCorrectFormattedTimeSheet(timeData.Hrs02),day3:getCorrectFormattedTimeSheet(timeData.Hrs03),day4:getCorrectFormattedTimeSheet(timeData.Hrs04),day5:getCorrectFormattedTimeSheet(timeData.Hrs05),day6:getCorrectFormattedTimeSheet(timeData.Hrs06),day7:getCorrectFormattedTimeSheet(timeData.Hrs07)};}if(index==5){return{id:index,title:timeData.Code01,total:timeData.Total||\"\",day1:timeData.Hrs01||\"\",day2:timeData.Hrs02||\"\",day3:timeData.Hrs03||\"\",day4:timeData.Hrs04||\"\",day5:timeData.Hrs05||\"\",day6:timeData.Hrs06||\"\",day7:timeData.Hrs07||\"\"};}return{id:index,title:timeData.Code01,total:timeData.Total,day1:timeData.Hrs01,day2:timeData.Hrs02,day3:timeData.Hrs03,day4:timeData.Hrs04,day5:timeData.Hrs05,day6:timeData.Hrs06,day7:timeData.Hrs07};});if(entryTotData.length>0){setTotalTimeSheetRecords(entryTotData);}if(data.fTmpTs.length==0){if(isDisplayPressed){setOpen(!open);}}};var findobject=function findobject(searchObj,fieldName){return searchObj.filter(function(element){return element.field==fieldName;});};var updateColumnHeaderBackground=function updateColumnHeaderBackground(searchObj,fieldName,className){var object=findobject(searchObj,fieldName);if(object.length==1){object[0][\"headerClassName\"]=className;}};var updateHoliday=function updateHoliday(holidays){var columns=timeSheetHeader;if(holidays.length==1){if(holidays[0].Holiday01==-1){updateColumnHeaderBackground(columns,\"day1\",\"red\");}else if(holidays[0].Holiday01==0){updateColumnHeaderBackground(columns,\"day1\",\"blue\");}if(holidays[0].Holiday02==-1){updateColumnHeaderBackground(columns,\"day2\",\"red\");}else if(holidays[0].Holiday02==0){updateColumnHeaderBackground(columns,\"day2\",\"blue\");}if(holidays[0].Holiday03==-1){updateColumnHeaderBackground(columns,\"day3\",\"red\");}else if(holidays[0].Holiday03==0){updateColumnHeaderBackground(columns,\"day3\",\"blue\");}if(holidays[0].Holiday04==-1){updateColumnHeaderBackground(columns,\"day4\",\"red\");}else if(holidays[0].Holiday04==0){updateColumnHeaderBackground(columns,\"day4\",\"blue\");}if(holidays[0].Holiday05==-1){updateColumnHeaderBackground(columns,\"day5\",\"red\");}else if(holidays[0].Holiday05==0){updateColumnHeaderBackground(columns,\"day5\",\"blue\");}if(holidays[0].Holiday06==-1){updateColumnHeaderBackground(columns,\"day6\",\"red\");}else if(holidays[0].Holiday06==0){updateColumnHeaderBackground(columns,\"day6\",\"blue\");}if(holidays[0].Holiday07==-1){updateColumnHeaderBackground(columns,\"day7\",\"red\");}else if(holidays[0].Holiday07==0){updateColumnHeaderBackground(columns,\"day7\",\"blue\");}}updateTimeSheetHeader(_toConsumableArray(columns));};var isGridEditable=function isGridEditable(status){switch(status){case 1:case 2:setIsDataTableEditable(true);break;case 3:case 4:case 5:case 6:setIsDataTableEditable(false);break;default:setIsDataTableEditable(false);break;}};var updateTotalDatTable=function updateTotalDatTable(field,uniqueId,updatedVal){if(updatedVal&&updatedVal!=\"\"){var updatedRow=totalTimeSheetRecords.filter(function(data){return data.id==uniqueId;});if(updatedRow){updatedRow[0][field]=updatedVal;}}};var updateRowTotal=function updateRowTotal(field,uniqueId,updatedVal){if(updatedVal&&updatedVal!=\"\"){var _timeSheetData=rows;var updatedRow=_timeSheetData.filter(function(data){return data.id==uniqueId;});if(updatedRow){//update int_change\nupdatedRow[0][\"int_change\"]=1;if(updatedVal.toString().includes(\".\")){updatedRow[0][field]=updatedVal;}else{updatedRow[0][field]=updatedVal+\".0\";}var total=calculateRowTotal(updatedRow[0],field);var changedTimeSheetRow=rows.filter(function(data){return data.id==uniqueId;});if(changedTimeSheetRow.length>0){if(total.includes(\".\")){changedTimeSheetRow[0][\"total\"]=total;}else{changedTimeSheetRow[0][\"total\"]=total+\".0\";}setRows(_toConsumableArray(rows));}}}};//end\n/*Column related Calculation****************************************************************************************************************/var updateColumnTotal=function updateColumnTotal(field,uniqueId,updatedVal){if(updatedVal&&updatedVal!=\"\"){var _timeSheetData2=rows;var updatedRow=_timeSheetData2.filter(function(data){return data.id==uniqueId;});if(updatedRow){updatedRow[0][field]=parseFloat(parseFloat(updatedVal).toFixed(1).toString());setUpdatedField(field);// const total = calculateColumnTotal(timeSheetData, field);\n// if (totalTimeSheetRecords.length > 0) {\n//   if (total.includes(\".\")) {\n//     totalTimeSheetRecords[0][field] = total;\n//   } else {\n//     totalTimeSheetRecords[0][field] = total + \".0\";\n//   }\n//   setTotalTimeSheetRecords([...totalTimeSheetRecords]);\n// }\n}}};var calculateColumnTotal=function calculateColumnTotal(updatedObj,fieldName){var total=0;var val=0;for(var i=0;i<updatedObj.length;i++){if(updatedObj[i][fieldName]==\"\"){val=0;}else{val=parseFloat(updatedObj[i][fieldName]);}total=total+val;}return parseFloat(total).toFixed(1).toString();};//end\nvar isValidFormat=function isValidFormat(id,value){var isValid=false;var format=\"[0-9]{2}:[0-9]{2}\";switch(parseInt(id)){case 1:isValid=RegExp(format,\"g\").test(value);break;case 2:isValid=RegExp(format,\"g\").test(value);break;case 3:isValid=RegExp(format,\"g\").test(value);break;case 4:isValid=RegExp(format,\"g\").test(value);break;}return isValid;};var isValidValue=function isValidValue(value){var isValidHour=false;var isValidMinute=false;isValidHour=parseInt(value.split(\":\")[0])<=23;isValidMinute=parseInt(value.split(\":\")[1])<=59;return isValidHour&&isValidMinute;};var handleTotalDataTableEditCellChangeCommitted=React.useCallback(function(_ref9,event){var id=_ref9.id,field=_ref9.field,props=_ref9.props;var isValid=false;if(props.value){isValid=isValidFormat(id.toString(),props.value.toString());if(!isValid){swal(\"QTIME\",\"Please Enter Correct Format as HH:MM\",\"warning\");}else{isValid=isValidValue(props.value.toString());if(!isValid){swal(\"QTIME\",\"Please Enter Correct Values\",\"warning\");}}if(isValid){updateTotalDatTable(field,id,props.value);}setTotalTimeSheetRecords(_toConsumableArray(totalTimeSheetRecords));}},[totalTimeSheetRecords]);var isValidInput=function isValidInput(value){var isValid=false;if(typeof value===\"string\"&&!Number.isNaN(Number(value))){value=Number(value);isValid=true;}else{isValid=false;}return isValid;};var handleEditCellChangeCommitted=React.useCallback(function(_ref10,event){var id=_ref10.id,field=_ref10.field,props=_ref10.props;var isValid=false;var uniqueId=id;var updatedVal=props.value;var newState={};if(updatedVal){if(isValidInput(updatedVal.toString())){isValid=isValidEntry(updatedVal)&&isRowTotalValid(uniqueId,field,updatedVal)&&isColTotalValid(uniqueId,field,updatedVal);if(isValid){setRows(_toConsumableArray(rows));}else{swal(\"QTIME\",\"Hours cannot exceed 24.0 hours\",\"warning\");setRows(_toConsumableArray(rows));}if(isValid){updateRowTotal(field,uniqueId,updatedVal);updateColumnTotal(field,uniqueId,updatedVal);updateFinalTableRowTotal(\"total\");}if(!isValid){setRows(_toConsumableArray(rows));}else{var changedTimeSheetRow=rows.filter(function(data){return data.id==uniqueId;});if(changedTimeSheetRow.length>0){if(updatedVal.toString().includes(\".\")){changedTimeSheetRow[0][field]=updatedVal;}else{changedTimeSheetRow[0][field]=updatedVal+\".0\";}}setRows(_toConsumableArray(rows));}}else{setRows(_toConsumableArray(rows));swal(\"QTIME\",\"Invalid input\",\"warning\");}}},[rows,editRowsModel]);var handleRowSelectionChange=function handleRowSelectionChange(event){setselectionRowIndex(event.selectionModel);};var isValidEntry=function isValidEntry(val){var isValid=false;if(!isNaN(val)){if(val<=24){isValid=true;}}return isValid;};var isColTotalValid=function isColTotalValid(uniqueId,field,updatedVal){var isValid=false;var updatedRow=rows.filter(function(data){return data.id==uniqueId;});if(updatedRow){var total=calculateColumnTotal(rows,field);if(parseFloat(total)+parseFloat(updatedVal)<=24){isValid=true;}}return isValid;};var isRowTotalValid=function isRowTotalValid(uniqueId,field,updatedVal){var isValid=false;var updatedRow=rows.filter(function(data){return data.id==uniqueId;});if(updatedRow){var total=calculateRowTotal(updatedRow[0],field);if(parseFloat(total)+parseFloat(updatedVal)<=168){isValid=true;}}return isValid;};var editableTotalDataTableRows=function editableTotalDataTableRows(params){if(isDataTableEditable){if(params.id==0){return false;}return true;}return false;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CodeDialog,{open:open,onClose:handleClickOpen,onOkPressed:handleClickOk,setLoader:setLoader,code:projectCode,employeeId:selectedEmployeeId}),/*#__PURE__*/_jsx(CommentDialog,{open:openCommentDialog,onClose:handleCommentClose,onOkPressed:handleCommentClick,employeeComment:employeeComment,rejectedCodes:[],isFrom:\"TimeSheet\",isApprover1:false,isApprover2:false,selectedObject:commentObject}),/*#__PURE__*/_jsx(CopyDialog,{open:openCopyDialog,onClose:handleCopyClose,onOkPressed:handleCopyOkClick,todayDate:copyTimeSheetPayDateData.length>0?copyTimeSheetPayDateData[0].key:0,data:copyTimeSheetPayDateData}),/*#__PURE__*/_jsx(CodeEntryWeek,{onWeekObjectChange:handleWeekObjectChange,handleEmployeeChange:handleEmployeeChange}),/*#__PURE__*/_jsx(StatusBar,{onNewBtnClick:handleClickOpen,onSaveClick:handleSaveClicked,onDeleteClick:handleDeleteClicked,onEditClick:handleEditClick,onSubmitClicked:handleSubmitClick,submittedStatus:submittedStatus,submitBtnCaption:submitBtnCaption,onCommentClick:handleCommentClickOpen,onCopyClick:handleCopyClick,newBtnCaption:newDisplayBtnCaption,onCloseClick:props.onCloseClicked}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:5},children:/*#__PURE__*/_jsx(DataTable,{apiRef:timeSheetref,columns:timeSheetHeader,rowData:rows,checkboxSelection:true,editRowModel:editRowsModel,editCellChangeCommitedFn:handleEditCellChangeCommitted,rowSelectFn:undefined,selectionModelChangeFn:handleRowSelectionChange,isDataTableLoading:isDataTableLoading,isDataTableEditable:isDataTableEditable,isDataTableEditablefn:undefined})}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:5},children:/*#__PURE__*/_jsx(DataTable,{apiRef:totalTimeSheetRef,columns:totalColumns,rowData:totalTimeSheetRecords,checkboxSelection:false,editCellChangeCommitedFn:handleTotalDataTableEditCellChangeCommitted,editRowModel:editTotalRowsModel,rowSelectFn:undefined,selectionModelChangeFn:undefined,isDataTableLoading:isDataTableLoading,isDataTableEditable:isDataTableEditable,isDataTableEditablefn:editableTotalDataTableRows})}),/*#__PURE__*/_jsx(\"div\",{className:\"timesheetFooter\",children:footerMessage})]});};export default Timesheet;","map":{"version":3,"sources":["E:/QTIME-WEB-FE/src/components/TimeSheet/timesheet.tsx"],"names":["CodeDialog","DataTable","CodeEntryWeek","StatusBar","swal","constantClass","useGridApiRef","React","useEffect","useState","getEmptyHours","getNewCode","makeStyles","createStyles","CommentDialog","CopyDialog","timeSheetColumns","totalColumns","useLoader","useFetch","useStyles","theme","root","width","marginTop","spacing","Timesheet","props","classes","showLoader","hideLoader","qTimeSaveFn","copyTimeSheet","getEndingWeek","getTimeSheetData","timeSheetref","totalTimeSheetRef","timeSheetDataSet","setTimeSheetDataSet","rows","setRows","open","setOpen","openCommentDialog","setOpenCommentDialog","isDataTableLoading","setIsDataTableLoading","isDataTableEditable","setIsDataTableEditable","openCopyDialog","setOpenCopyDialog","timeSheetHeader","updateTimeSheetHeader","totalTimeSheetRecords","setTotalTimeSheetRecords","footerMessage","setFooterMessage","selectionRowIndex","setselectionRowIndex","projectCode","setProjectCode","editRowsModel","setEditRowsModel","editTotalRowsModel","setEditTotalRowsModel","submitBtnCaption","setsubmitBtnCaption","submittedStatus","setsubmittedStatus","employeeComment","setEmployeeComment","copyTimeSheetPayDateData","setCopyTimeSheetPayDateData","periods","setPeriods","updatedField","setUpdatedField","selectedTimeSheetPayDate","setSelectedTimeSheetPayDate","selectedEmployeeId","setSelectedEmployeeId","newDisplayBtnCaption","setNewDisplayBtnCaption","approver1Comment","approver2Comment","reasonCode","selectedId","approver","undefined","commentObject","setCommentObject","length","total","calculateColumnTotal","includes","rowTotal","calculateTotalDataTableRow","totaldtRecords","calculateRowTotal","handleEmployeeChange","params","employeeId","target","value","split","handleWeekObjectChange","obj","val","payDate","PayDate","selectedDateObj","Date","setDate","getDate","headerName","toDateString","updatedTimesheetObj","getPeriods","payDateList","filteredWeeks","map","element","key","WeekNo","setLoader","show","handleClickOpen","setTimeSheetData","handleSaveClicked","saveTimeSheet","handleSubmitClick","updatedTimeSheetDataSet","newRow","fTmpTs","updatedObject","mapTimeSheetDataBeforeSave","fTshSum","STATUS","result","code","data","response","ExceptionMessage","then","handleEditClick","selectedModel","filter","id","selectedRow","editCode","codeEntry","l1","jobCode","l2","l3","l4","l5","classification","location","l3Title","l4Title","int_change","deleteRecords","timeSheetData","i","selectedModelIndex","findIndex","updatedData","handleDeleteClicked","title","text","icon","buttons","dangerMode","closeOnEsc","closeOnClickOutside","willDelete","handleClickOk","newRows","row","rowId","handleCommentClickOpen","handleCommentClick","EMPNOTES","commntObj","handleCommentClose","handleCopyClick","handleCopyOkClick","date","loggedInUserID","localStorage","getItem","ID","trim","setTimeSheetDataResponse","handleCopyClose","periodList","timeSheetPeriodList","CurPayDate","push","getMonth","monthNo","months","rowsData","defaultStructure","Code01","Code02","Code03","Code04","Code05","Dept","Classifctn","Location","Total","parseFloat","toString","Code06","Code07","Code08","Code09","Code10","EnteredBy","DateEdited","DateAdded","Holiday","Shift","PCType","OTF","RowNo","ActDesc","PostFreez","L3_Title","L4_Title","Int_Change","Hrs01","day1","Hrs02","day2","Hrs03","day3","Hrs04","day4","Hrs05","day5","Hrs06","day6","Hrs07","day7","INT_CHANGE","INT_KEY","updatedRow","fieldName","fields","toFixed","updateFinalTableRowTotal","field","getCorrectFormattedTimeSheet","period","isDisplayPressed","validRecords","entryData","timeData","index","StsTitle","isGridEditable","updateHoliday","fTmpTsMisc","MthToDateHrs","commentObj","SUPNOTES","PMNOTES","RjctReason","entryTotData","fTmpTsTot","findobject","searchObj","updateColumnHeaderBackground","className","object","holidays","columns","Holiday01","Holiday02","Holiday03","Holiday04","Holiday05","Holiday06","Holiday07","status","updateTotalDatTable","uniqueId","updatedVal","updateRowTotal","changedTimeSheetRow","updateColumnTotal","updatedObj","isValidFormat","isValid","format","parseInt","RegExp","test","isValidValue","isValidHour","isValidMinute","handleTotalDataTableEditCellChangeCommitted","useCallback","event","isValidInput","Number","isNaN","handleEditCellChangeCommitted","newState","isValidEntry","isRowTotalValid","isColTotalValid","handleRowSelectionChange","selectionModel","editableTotalDataTableRows","onCloseClicked","paddingBottom","paddingTop"],"mappings":"kqBAAA,MAAOA,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAO,GAAKC,CAAAA,aAAZ,KAA+B,wBAA/B,CAEA,OAKEC,aALF,KAMO,wBANP,CAOA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAEEC,aAFF,CAGEC,UAHF,KAOO,0BAPP,CAUA,OAASC,UAAT,CAA4BC,YAA5B,KAAgD,mBAAhD,CACA,MAAOC,CAAAA,aAAP,KAEO,oCAFP,CAGA,MAAOC,CAAAA,UAAP,KAAuB,iCAAvB,CACA,OACEC,gBADF,CAGEC,YAHF,KAIO,8CAJP,CAKA,OAASC,SAAT,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAO,iBAAP,C,wFAKA,GAAMC,CAAAA,SAAS,CAAGR,UAAU,CAAC,SAACS,KAAD,QAC3BR,CAAAA,YAAY,CAAC,CACXS,IAAI,CAAE,CACJC,KAAK,CAAE,MADH,CAEJ,YAAa,CACXC,SAAS,CAAEH,KAAK,CAACI,OAAN,CAAc,CAAd,CADA,CAFT,CADK,CAAD,CADe,EAAD,CAA5B,CAUA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAA4B,CAC5C,GAAMC,CAAAA,OAAO,CAAGR,SAAS,EAAzB,CAD4C,eAETF,SAAS,EAFA,CAEpCW,UAFoC,YAEpCA,UAFoC,CAExBC,UAFwB,YAExBA,UAFwB,eAI1CX,QAAQ,EAJkC,CAGpCY,WAHoC,WAGpCA,WAHoC,CAGvBC,aAHuB,WAGvBA,aAHuB,CAGRC,aAHQ,WAGRA,aAHQ,CAGOC,gBAHP,WAGOA,gBAHP,CAM5C,GAAIC,CAAAA,YAAY,CAAG7B,aAAa,EAAhC,CACA,GAAI8B,CAAAA,iBAAiB,CAAG9B,aAAa,EAArC,CAP4C,oBAS1CC,KAAK,CAACE,QAAN,EAT0C,oDAQrC4B,gBARqC,qBAQnBC,mBARmB,0CAUpB/B,KAAK,CAACE,QAAN,CAAqC,EAArC,CAVoB,qDAUrC8B,IAVqC,qBAU/BC,OAV+B,mCAWpB/B,QAAQ,CAAC,KAAD,CAXY,wCAWrCgC,IAXqC,eAW/BC,OAX+B,8BAYMjC,QAAQ,CAAC,KAAD,CAZd,yCAYrCkC,iBAZqC,eAYlBC,oBAZkB,8BAaQnC,QAAQ,CAAC,KAAD,CAbhB,yCAarCoC,kBAbqC,eAajBC,qBAbiB,8BAcUrC,QAAQ,CAAC,KAAD,CAdlB,yCAcrCsC,mBAdqC,eAchBC,sBAdgB,8BAgBAvC,QAAQ,CAAC,KAAD,CAhBR,0CAgBrCwC,cAhBqC,gBAgBrBC,iBAhBqB,gCAkB1CzC,QAAQ,CAAeO,gBAAf,CAlBkC,2CAiBrCmC,eAjBqC,gBAiBpBC,qBAjBoB,gCAmBc3C,QAAQ,CAAQ,EAAR,CAnBtB,2CAmBrC4C,qBAnBqC,gBAmBdC,wBAnBc,gCAoBF7C,QAAQ,CAAC,EAAD,CApBN,2CAoBrC8C,aApBqC,gBAoBtBC,gBApBsB,gCAqBM/C,QAAQ,CAAQ,EAAR,CArBd,2CAqBrCgD,iBArBqC,gBAqBlBC,oBArBkB,gCAsBNjD,QAAQ,CAACE,UAAU,EAAX,CAtBF,2CAsBrCgD,WAtBqC,gBAsBxBC,cAtBwB,qCAuBFrD,KAAK,CAACE,QAAN,CACxC,EADwC,CAvBE,qDAuBrCoD,aAvBqC,qBAuBtBC,gBAvBsB,0CA2B1CvD,KAAK,CAACE,QAAN,CAAkC,EAAlC,CA3B0C,qDA0BrCsD,kBA1BqC,qBA0BjBC,qBA1BiB,qCA4BIvD,QAAQ,CAAC,CAAD,CA5BZ,2CA4BrCwD,gBA5BqC,gBA4BnBC,mBA5BmB,gCA6BEzD,QAAQ,CAAC,EAAD,CA7BV,2CA6BrC0D,eA7BqC,gBA6BpBC,kBA7BoB,gCA8BE3D,QAAQ,CAAC,EAAD,CA9BV,2CA8BrC4D,eA9BqC,gBA8BpBC,kBA9BoB,gCA+BoB7D,QAAQ,CAEtE,EAFsE,CA/B5B,2CA+BrC8D,wBA/BqC,gBA+BXC,2BA/BW,gCAkCd/D,QAAQ,CAAC,EAAD,CAlCM,2CAkCrCgE,OAlCqC,gBAkC5BC,UAlC4B,gCAmCJjE,QAAQ,CAAC,EAAD,CAnCJ,2CAmCrCkE,YAnCqC,gBAmCvBC,eAnCuB,gCAoCoBnE,QAAQ,CAAC,EAAD,CApC5B,2CAoCrCoE,wBApCqC,gBAoCXC,2BApCW,gCAqCQrE,QAAQ,CAAC,EAAD,CArChB,2CAqCrCsE,kBArCqC,gBAqCjBC,qBArCiB,gCAsCYvE,QAAQ,CAAC,SAAD,CAtCpB,2CAsCrCwE,oBAtCqC,gBAsCfC,uBAtCe,gCAuCFzE,QAAQ,CAAsB,CAClE4D,eAAe,CAAE,EADiD,CAElEc,gBAAgB,CAAE,EAFgD,CAGlEC,gBAAgB,CAAE,EAHgD,CAIlEC,UAAU,CAAE,EAJsD,CAKlEC,UAAU,CAAE,EALsD,CAMlEC,QAAQ,CAAEC,SANwD,CAAtB,CAvCN,2CAuCrCC,aAvCqC,gBAuCtBC,gBAvCsB,gBAgD5ClF,SAAS,CAAC,UAAM,CACd,GAAImE,YAAY,CAACgB,MAAb,CAAsB,CAA1B,CAA6B,CAC3Bf,eAAe,CAAC,EAAD,CAAf,CACA,GAAMgB,CAAAA,KAAK,CAAGC,oBAAoB,CAACtD,IAAD,CAAOoC,YAAP,CAAlC,CACA,GAAItB,qBAAqB,CAACsC,MAAtB,CAA+B,CAAnC,CAAsC,CACpC,GAAIC,KAAK,CAACE,QAAN,CAAe,GAAf,CAAJ,CAAyB,CACvBzC,qBAAqB,CAAC,CAAD,CAArB,CAAyBsB,YAAzB,EAAyCiB,KAAzC,CACD,CAFD,IAEO,CACLvC,qBAAqB,CAAC,CAAD,CAArB,CAAyBsB,YAAzB,EAAyCiB,KAAK,CAAG,IAAjD,CACD,CACD,GAAMG,CAAAA,QAAQ,CAAGC,0BAA0B,CAAC3C,qBAAD,CAA3C,CACAA,qBAAqB,CAAC,CAAD,CAArB,CAAyB,OAAzB,EAAoC0C,QAApC,CACAzC,wBAAwB,oBAAKD,qBAAL,EAAxB,CACD,CACF,CACF,CAfQ,CAeN,CAACsB,YAAD,CAfM,CAAT,CAiBA,GAAMqB,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CAACC,cAAD,CAAyB,CAC1D,GAAIA,cAAc,CAACN,MAAf,CAAwB,CAA5B,CAA+B,CAC7B,GAAMC,CAAAA,KAAK,CAAGM,iBAAiB,CAACD,cAAc,CAAC,CAAD,CAAf,CAA/B,CACA,MAAOL,CAAAA,KAAP,CACD,CACF,CALD,CAMA,GAAMO,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,MAAD,CAAiB,CAC5C,GAAMC,CAAAA,UAAU,CAAGD,MAAM,CAACE,MAAP,CAAcC,KAAd,CAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAnB,CACAxB,qBAAqB,CAACqB,UAAD,CAArB,CACAnB,uBAAuB,CAAC,SAAD,CAAvB,CACA1C,OAAO,CAAC,EAAD,CAAP,CACAc,wBAAwB,CAAC,EAAD,CAAxB,CACAY,mBAAmB,CAAC,CAAC,GAAF,CAAnB,CACD,CAPD,CAQA,GAAMuC,CAAAA,sBAAsB,0FAAG,iBAAOC,GAAP,CAAiBC,GAAjB,4LAC7B;AACA;AACA;AACA;AACAzB,uBAAuB,CAAC,SAAD,CAAvB,CACAhB,mBAAmB,CAAC,CAAC,GAAF,CAAnB,CACA1B,OAAO,CAAC,EAAD,CAAP,CACAc,wBAAwB,CAAC,EAAD,CAAxB,CACMsD,OATuB,CASbF,GAAG,CAACC,GAAD,CAAH,CAASE,OAAT,CAAiBL,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CATa,CAUzBM,eAVyB,CAUP,GAAIC,CAAAA,IAAJ,CAASH,OAAT,CAVO,CAW7BE,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIAM,eAAe,CAACE,OAAhB,CAAwBF,eAAe,CAACG,OAAhB,GAA4B,CAApD,EACAjG,gBAAgB,CAAC,EAAD,CAAhB,CAAqBkG,UAArB,CACEJ,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,EACA,GADA,CAEAM,eAAe,CAACK,YAAhB,GAA+BX,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHF,CAIIY,mBA9CyB,oBA8CCpG,gBA9CD,EA+C7BoC,qBAAqB,CAACgE,mBAAD,CAArB,CACAtC,2BAA2B,CAAC8B,OAAD,CAA3B,CAhD6B,uBAiDES,CAAAA,UAAU,EAjDZ,SAiDvBC,WAjDuB,eAkD7B,GAAIA,WAAW,EAAIA,WAAW,CAAC3B,MAAZ,CAAqB,CAAxC,CAA2C,CACnC4B,aADmC,CACnBD,WAAW,CAACE,GAAZ,CAAgB,SAACC,OAAD,CAAkB,CACtD,MAAO,CACLC,GAAG,CAAED,OAAO,CAACE,MADR,CAELpB,KAAK,CAAEkB,OAAO,CAACZ,OAAR,CAAgBL,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAFF,CAAP,CAID,CALqB,CADmB,CAOzC9B,UAAU,CAAC4C,WAAD,CAAV,CACA9C,2BAA2B,CAAC+C,aAAD,CAA3B,CACD,CA3D4B,uDAAH,kBAAtBd,CAAAA,sBAAsB,gDAA5B,CA8DA,GAAMmB,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAmB,CACnCA,IAAI,CAAGhG,UAAU,EAAb,CAAkBC,UAAU,EAAhC,CACD,CAFD,CAIA,GAAMgG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,OAAQ7C,oBAAR,EACE,IAAK,KAAL,CACEvC,OAAO,CAAC,CAACD,IAAF,CAAP,CACAmB,cAAc,CAACjD,UAAU,EAAX,CAAd,CACA,MACF,IAAK,SAAL,CACEoH,gBAAgB,CAAClD,wBAAD,CAA2B,IAA3B,CAAhB,CACAK,uBAAuB,CAAC,KAAD,CAAvB,CACA,MARJ,CAUD,CAXD,CAYA,GAAM8C,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9BC,aAAa,GACd,CAFD,CAGA,GAAMC,CAAAA,iBAAiB,2FAAG,qMACpBC,uBADoB,CACW9F,gBADX,KAEpB8F,uBAFoB,2BAGtBtG,UAAU,GACNuG,MAJkB,CAIFD,uBAAuB,CAACE,MAAxB,CAA+B,CAA/B,CAJE,CAKlBC,aALkB,CAKOC,0BAA0B,CAAChG,IAAD,CAAO6F,MAAP,CALjC,CAMtBD,uBAAuB,CAACE,MAAxB,CAAiCC,aAAjC,CANsB,aAQdH,uBAAuB,CAACK,OAAxB,CAAgC,CAAhC,EAAmCC,MARrB,+BASf,CATe,kBAYf,CAZe,mBAef,CAfe,mBAkBf,CAlBe,oBAUlBN,uBAAuB,CAACK,OAAxB,CAAgC,CAAhC,EAAmCC,MAAnC,CAA4C,CAA5C,CAVkB,4CAalBN,uBAAuB,CAACK,OAAxB,CAAgC,CAAhC,EAAmCC,MAAnC,CAA4C,CAA5C,CAbkB,4CAgBlBN,uBAAuB,CAACK,OAAxB,CAAgC,CAAhC,EAAmCC,MAAnC,CAA4C,CAA5C,CAhBkB,4CAmBlBN,uBAAuB,CAACK,OAAxB,CAAgC,CAAhC,EAAmCC,MAAnC,CAA4C,CAA5C,CAnBkB,oEAuBY1G,CAAAA,WAAW,CAC3C,GAD2C,CAE3CoG,uBAF2C,CAvBvB,SAuBhBO,MAvBgB,gBA2BtB5G,UAAU,GACR,GAAI4G,MAAM,CAACC,IAAP,GAAgB,GAApB,CAAyB,CACfC,IADe,CACRF,MAAM,CAACE,IADC,CAErB,GAAIA,IAAJ,CAAU,CACN,GAAIA,IAAI,CAACC,QAAT,CAAmB,CACf,GAAID,IAAI,CAACC,QAAL,CAAcD,IAAd,CAAmBE,gBAAvB,CAAyC,CACrC1I,IAAI,CAAC,OAAD,CAAUwI,IAAI,CAACC,QAAL,CAAcD,IAAd,CAAmBE,gBAA7B,CAA+C,OAA/C,CAAJ,CACH,CACJ,CAJD,IAIO,CACH,GAAIF,IAAI,CAAC9C,QAAL,CAAc,OAAd,CAAJ,CAA4B,CACxB1F,IAAI,CAAC,OAAD,CAAUwI,IAAI,CAACpC,KAAL,CAAW,SAAX,EAAsB,CAAtB,CAAV,CAAoC,OAApC,CAAJ,CACH,CAFD,IAEO,CACHpG,IAAI,CACA,OADA,CAEA,uCAFA,CAGA,SAHA,CAAJ,CAIE2I,IAJF,CAIO,SAACxC,KAAD,CAAW,CACdzD,qBAAqB,CAAC,IAAD,CAArB,CACAiF,gBAAgB,CAAClD,wBAAD,CAA2B,KAA3B,CAAhB,CACA/B,qBAAqB,CAAC,KAAD,CAArB,CACH,CARD,EASH,CACJ,CACJ,CACJ,CAvBD,IAwBK,CACD1C,IAAI,CAAC,OAAD,CAAUsI,MAAM,CAACE,IAAP,CAAYE,gBAAtB,CAAwC,OAAxC,CAAJ,CACH,CAtDmB,yDAAH,kBAAjBZ,CAAAA,iBAAiB,2CAAvB,CAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAMc,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIvF,iBAAiB,CAACkC,MAAlB,EAA4B,CAAhC,CAAmC,CACjCvF,IAAI,CAAC,OAAD,CAAU,8BAAV,CAA0C,SAA1C,CAAJ,CACD,CAFD,IAEO,IAAIqD,iBAAiB,CAACkC,MAAlB,CAA2B,CAA/B,CAAkC,CACvCvF,IAAI,CAAC,OAAD,CAAU,iCAAV,CAA6C,SAA7C,CAAJ,CACD,CAFM,IAEA,IAAIqD,iBAAiB,CAACkC,MAAlB,EAA4B,CAAhC,CAAmC,CACxC,GAAMsD,CAAAA,aAAa,CAAG1G,IAAI,CAAC2G,MAAL,CAAY,SAACzB,OAAD,CAAiC,CACjE,MAAOA,CAAAA,OAAO,CAAC0B,EAAR,EAAc1F,iBAAiB,CAAC,CAAD,CAAtC,CACD,CAFqB,CAAtB,CAGA,GAAM2F,CAAAA,WAAW,CAAGH,aAAa,CAAC,CAAD,CAAjC,CACA,GAAMI,CAAAA,QAAuB,CAAG,CAC9BF,EAAE,CAAEC,WAAW,CAACD,EADc,CAE9BG,SAAS,CAAE,CACTC,EAAE,CAAEH,WAAW,CAACG,EADP,CAETC,OAAO,CAAEJ,WAAW,CAACI,OAFZ,CAGTC,EAAE,CAAEL,WAAW,CAACK,EAHP,CAITC,EAAE,CAAEN,WAAW,CAACM,EAJP,CAKTC,EAAE,CAAEP,WAAW,CAACO,EALP,CAMTC,EAAE,CAAER,WAAW,CAACQ,EANP,CAOTC,cAAc,CAAET,WAAW,CAACS,cAPnB,CAQTC,QAAQ,CAAEV,WAAW,CAACU,QARb,CASTC,OAAO,CAAEX,WAAW,CAACW,OATZ,CAUTC,OAAO,CAAEZ,WAAW,CAACY,OAVZ,CAFmB,CAc9BC,UAAU,CAAEb,WAAW,CAACa,UAdM,CAAhC,CAgBArG,cAAc,CAACyF,QAAD,CAAd,CACA3G,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CA7BD,CA8BA,GAAMwH,CAAAA,aAAa,2FAAG,iMAChBC,aADgB,CACsB5H,IADtB,sBAEX6H,CAFW,EAGlB,GAAMC,CAAAA,kBAA0B,CAAGF,aAAa,CAACG,SAAd,CACjC,SAAC7C,OAAD,CAAiC,CAC/B,MAAOA,CAAAA,OAAO,CAAC0B,EAAR,EAAc1F,iBAAiB,CAAC2G,CAAD,CAAtC,CACD,CAHgC,CAAnC,CAKA,GAAIC,kBAAkB,CAAG,CAAC,CAA1B,CAA6B,CAC3BF,aAAa,CAACE,kBAAD,CAAb,CAAkCJ,UAAlC,CAA+C,CAAC,CAAhD,CACD,CAViB,EAEpB,IAASG,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAG3G,iBAAiB,CAACkC,MAAtC,CAA8CyE,CAAC,EAA/C,CAAmD,OAA1CA,CAA0C,EASlD,CAXmB,IAYhB/H,gBAZgB,2BAadkI,WAbc,CAaclI,gBAbd,CAcd+F,MAdc,CAcEmC,WAAW,CAAClC,MAAZ,CAAmB,CAAnB,CAdF,CAelBkC,WAAW,CAAClC,MAAZ,CAAqBE,0BAA0B,CAAC4B,aAAD,CAAgB/B,MAAhB,CAA/C,CAfkB,uBAiBgBrG,CAAAA,WAAW,CAAC,GAAD,CAAMwI,WAAN,CAjB3B,QAiBZ7B,MAjBY,gBAmBhB,GAAIA,MAAM,CAACC,IAAP,GAAgB,GAApB,CAAyB,CACfC,IADe,CACRF,MAAM,CAACE,IADC,CAErB,GAAIA,IAAI,CAACC,QAAT,CAAmB,CACf,GAAID,IAAI,CAACC,QAAL,CAAcD,IAAd,CAAmBE,gBAAvB,CAAyC,CACrC1I,IAAI,CAAC,OAAD,CAAUwI,IAAI,CAACC,QAAL,CAAcD,IAAd,CAAmBE,gBAA7B,CAA+C,OAA/C,CAAJ,CACH,CACJ,CAJD,IAIO,CACH,GAAIF,IAAI,CAAC9C,QAAL,CAAc,OAAd,CAAJ,CAA4B,CACxB1F,IAAI,CAAC,OAAD,CAAUwI,IAAI,CAACpC,KAAL,CAAW,SAAX,EAAsB,CAAtB,CAAV,CAAoC,OAApC,CAAJ,CACH,CAFD,IAEO,CACHpG,IAAI,CAAC,OAAD,CAAU,sBAAV,CAAkC,SAAlC,CAAJ,CAAiD2I,IAAjD,CAAsD,SAACxC,KAAD,CAAW,CAC7DzD,qBAAqB,CAAC,IAAD,CAArB,CACAiF,gBAAgB,CAAClD,wBAAD,CAA2B,KAA3B,CAAhB,CACA/B,qBAAqB,CAAC,KAAD,CAArB,CACH,CAJD,EAKH,CACJ,CACJ,CAjBD,IAkBK,CACD1C,IAAI,CAAC,OAAD,CAAUsI,MAAM,CAACE,IAAP,CAAYE,gBAAtB,CAAwC,OAAxC,CAAJ,CACH,CAvCe,yDAAH,kBAAboB,CAAAA,aAAa,2CAAnB,CA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAMM,CAAAA,mBAAmB,2FAAG,wIAC1B,GAAI/G,iBAAiB,CAACkC,MAAlB,CAA2B,CAA/B,CAAkC,CAChCvF,IAAI,CAAC,CACHqK,KAAK,CAAE,eADJ,CAEHC,IAAI,CAAE,mCAFH,CAGHC,IAAI,CAAE,SAHH,CAIHC,OAAO,CAAE,CAAC,IAAD,CAAO,QAAP,CAJN,CAKHC,UAAU,CAAE,IALT,CAMHC,UAAU,CAAE,KANT,CAOHC,mBAAmB,CAAE,KAPlB,CAAD,CAAJ,CAQGhC,IARH,CAQQ,SAACiC,UAAD,CAAgB,CACtB,GAAI,CAACA,UAAL,CAAiB,CACfd,aAAa,GACd,CACF,CAZD,EAaD,CAfyB,wDAAH,kBAAnBM,CAAAA,mBAAmB,2CAAzB,CAkBA,GAAMS,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACtC,IAAD,CAAyB,CAC7C,GAAIuC,CAAAA,OAA6B,CAAG,EAApC,CACA,GAAIvC,IAAI,CAACQ,EAAL,CAAU,CAAd,CAAiB,CACf+B,OAAO,CAAG3I,IAAI,CAACiF,GAAL,CAAS,SAAC2D,GAAD,CAAS,CAC1B,GAAIA,GAAG,CAAChC,EAAJ,GAAWR,IAAI,CAACQ,EAApB,CAAwB,CACtB,sCACKgC,GADL,EAEKxC,IAAI,CAACW,SAFV,EAID,CALD,IAKO,CACL,MAAO6B,CAAAA,GAAP,CACD,CACF,CATS,CAAV,CAUD,CAXD,IAWO,CACL,GAAIC,CAAAA,KAAK,CAAG7I,IAAI,CAACoD,MAAL,CAAc,CAA1B,CACAgD,IAAI,CAACQ,EAAL,CAAUiC,KAAV,CACA,GAAIhD,CAAAA,MAA0B,4CAC5Be,EAAE,CAAEiC,KADwB,EAEzBzC,IAAI,CAACW,SAFoB,EAGzB5I,aAAa,EAHY,MAI5BkF,KAAK,CAAE,CAJqB,CAK5BqE,UAAU,CAAE,CALgB,EAA9B,CAOAiB,OAAO,8BAAO3I,IAAP,GAAa6F,MAAb,EAAP,CACD,CAED5F,OAAO,CAAC0I,OAAD,CAAP,CACAtH,cAAc,CAACjD,UAAU,EAAX,CAAd,CACD,CA5BD,CA6BA,GAAM0K,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnCzI,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACC,CAFH,CAGE,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAO,CACL,GAAM2I,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAC7F,aAAD,CAAwC,CAC7D7C,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACA,GAAI8C,aAAJ,CAAmB,CACf,GAAImD,CAAAA,IAAI,CAAGvG,gBAAX,CACA,GAAIuG,IAAJ,CAAU,CACNA,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+C,QAAhB,CAA2B9F,aAAa,CAACpB,eAAzC,CACAC,kBAAkB,CAACsE,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+C,QAAjB,CAAlB,CACA,GAAMC,CAAAA,SAA8B,CAAG,CACrCjG,QAAQ,CAAEE,aAAa,CAACF,QADa,CAErCJ,gBAAgB,CAAEM,aAAa,CAACN,gBAFK,CAGrCC,gBAAgB,CAAEK,aAAa,CAACL,gBAHK,CAIrCf,eAAe,CAAEuE,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+C,QAJI,CAKrClG,UAAU,CAAEI,aAAa,CAACJ,UALW,CAMrCC,UAAU,CAAEG,aAAa,CAACH,UANW,CAAvC,CAQFI,gBAAgB,CAAC8F,SAAD,CAAhB,CACH,CAED1I,qBAAqB,CAAC,IAAD,CAArB,CACAR,mBAAmB,CAACsG,IAAD,CAAnB,CACA9F,qBAAqB,CAAC,KAAD,CAArB,CACH,CACJ,CAtBD,CAwBA,GAAM2I,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B7I,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACD,CAFD,CAIA,GAAM+I,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B;AACAxI,iBAAiB,CAAC,CAACD,cAAF,CAAjB,CACC,CAHH,CAIE,GAAM0I,CAAAA,iBAAiB,2FAAG,kBAAOhF,GAAP,mKACtBA,GADsB,2BAExB,GAAIA,GAAG,EAAI,EAAX,CAAe,CACbA,GAAG,CAAG,CAAN,CACD,CACKC,OALkB,CAKHnC,OAAO,CAACyE,MAAR,CAAe,SAAC0C,IAAD,CAAe,CACjD,MAAOA,CAAAA,IAAI,CAACjE,MAAL,EAAehB,GAAtB,CACD,CAFoB,CALG,CAQlBkF,cARkB,CAQDC,YAAY,CAACC,OAAb,CAAqB1L,aAAa,CAAC2L,EAAnC,GAA0C,EARzC,CASxB,GAAIjH,kBAAkB,CAACkH,IAAnB,GAA0BtG,MAA1B,EAAoC,CAAxC,CAA2C,CACzCX,qBAAqB,CAAC6G,cAAD,CAArB,CACD,CAXuB,KAYpBjF,OAAO,CAACjB,MAAR,EAAkB,CAZE,mDAac3D,CAAAA,aAAa,CAC/C+C,kBAAkB,EAAI8G,cADyB,CAE/ChH,wBAF+C,CAG/C+B,OAAO,CAAC,CAAD,CAAP,CAAWC,OAAX,CAAmBL,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAH+C,CAb3B,QAahBqC,QAbgB,gBAkBtB,GAAIA,QAAQ,CAACF,IAAT,GAAkB,GAAtB,CAA2B,CACnBC,IADmB,CACZC,QAAQ,CAACD,IADG,CAEzBsD,wBAAwB,CAACrD,QAAD,CAAW,KAAX,CAAxB,CACD,CArBqB,QAwB1B3F,iBAAiB,CAAC,CAACD,cAAF,CAAjB,CAxB0B,yDAAH,kBAAjB0I,CAAAA,iBAAiB,8CAAvB,CA0BF,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAK,CACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAMQ,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BjJ,iBAAiB,CAAC,CAACD,cAAF,CAAjB,CACD,CAFD,CAIA,GAAMoE,CAAAA,UAAU,2FAAG,2MACiBpF,CAAAA,aAAa,EAD9B,QACXyG,MADW,qBAGbA,MAAM,CAACC,IAAP,GAAgB,GAHH,4BAITyD,UAJS,CAII1D,MAAM,CAACE,IAJX,CAKXyD,mBALW,CAKgB,EALhB,CAMNjC,CANM,CAMF,CANE,aAMCA,CAAC,CAAGgC,UAAU,CAACzG,MANhB,iCAOTyG,UAAU,CAAChC,CAAD,CAAV,CAAckC,UAAd,EAA4B,CAPnB,4BAQXD,mBAAmB,CAACE,IAApB,CAAyBH,UAAU,CAAChC,CAAD,CAAnC,EARW,iCASJiC,mBATI,UAWbA,mBAAmB,CAACE,IAApB,CAAyBH,UAAU,CAAChC,CAAD,CAAnC,EAXa,QAMwBA,CAAC,EANzB,iFAAH,kBAAV/C,CAAAA,UAAU,2CAAhB,CAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMmF,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,OAAD,CAAqB,CACpC,GAAMC,CAAAA,MAAM,CAAG,EAAf,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,CAAD,CAAN,CAAY,KAAZ,CACAA,MAAM,CAAC,EAAD,CAAN,CAAa,KAAb,CACAA,MAAM,CAAC,EAAD,CAAN,CAAa,KAAb,CACAA,MAAM,CAAC,EAAD,CAAN,CAAa,KAAb,CAEA,MAAOA,CAAAA,MAAM,CAACD,OAAD,CAAb,CACD,CAhBD,CAkBA,GAAMlE,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CACjCoE,QADiC,CAEjCC,gBAFiC,CAG9B,CACH,MAAOrK,CAAAA,IAAI,CAACiF,GAAL,CAAS,SAACC,OAAD,CAAiC,CAC/C,MAAO,CACLoF,MAAM,CAAEpF,OAAO,CAAC8B,EADX,CAELuD,MAAM,CAAErF,OAAO,CAAC+B,OAFX,CAEoB;AACzBuD,MAAM,CAAEtF,OAAO,CAACgC,EAHX,CAGe;AACpBuD,MAAM,CAAEvF,OAAO,CAACiC,EAJX,CAIe;AACpBuD,MAAM,CAAGL,gBAAgB,EAAIA,gBAAgB,CAACK,MAAtC,EAAiD,EALpD,CAMLC,IAAI,CAAEzF,OAAO,CAACmC,EANT,CAOLuD,UAAU,CAAE1F,OAAO,CAACoC,cAPf,CAQLuD,QAAQ,CAAE3F,OAAO,CAACqC,QARb,CAQuB;AAC5BuD,KAAK,CAAEC,UAAU,CAAC7F,OAAO,CAAC7B,KAAR,CAAc2H,QAAd,EAAD,CATZ,CAULC,MAAM,CAAE/F,OAAO,CAACkC,EAVX,CAWL8D,MAAM,CAAGb,gBAAgB,EAAIA,gBAAgB,CAACa,MAAtC,EAAiD,EAXpD,CAYLC,MAAM,CAAEjG,OAAO,CAACmC,EAZX,CAaL+D,MAAM,CAAGf,gBAAgB,EAAIA,gBAAgB,CAACe,MAAtC,EAAiD,EAbpD,CAcLC,MAAM,CAAGhB,gBAAgB,EAAIA,gBAAgB,CAACgB,MAAtC,EAAiD,EAdpD,CAeLC,SAAS,CAAGjB,gBAAgB,EAAIA,gBAAgB,CAACiB,SAAtC,EAAoD,EAf1D,CAgBLC,UAAU,CACPlB,gBAAgB,EAAIA,gBAAgB,CAACkB,UAAtC,EACA,qBAlBG,CAmBLC,SAAS,CACNnB,gBAAgB,EAAIA,gBAAgB,CAACmB,SAAtC,EACA,qBArBG,CAsBLC,OAAO,CAAGpB,gBAAgB,EAAIA,gBAAgB,CAACoB,OAAtC,EAAkD,EAtBtD,CAuBLC,KAAK,CAAGrB,gBAAgB,EAAIA,gBAAgB,CAACqB,KAAtC,EAAgD,EAvBlD,CAwBLC,MAAM,CAAGtB,gBAAgB,EAAIA,gBAAgB,CAACsB,MAAtC,EAAiD,EAxBpD,CAyBLC,GAAG,CAAGvB,gBAAgB,EAAIA,gBAAgB,CAACuB,GAAtC,EAA8C,CAzB9C,CA0BLC,KAAK,CAAE3G,OAAO,CAAC0B,EA1BV,CA2BLkF,OAAO,CAAGzB,gBAAgB,EAAIA,gBAAgB,CAACyB,OAAtC,EAAkD,EA3BtD,CA4BLC,SAAS,CAAG1B,gBAAgB,EAAIA,gBAAgB,CAAC0B,SAAtC,EAAoD,KA5B1D,CA6BLC,QAAQ,CAAG3B,gBAAgB,EAAIA,gBAAgB,CAAC2B,QAAtC,EAAmD,EA7BxD,CA8BLC,QAAQ,CAAG5B,gBAAgB,EAAIA,gBAAgB,CAACY,MAAtC,EAAiD,EA9BtD,CA+BLiB,UAAU,CAAEhH,OAAO,CAACwC,UA/Bf,CAgCLyE,KAAK,CAAEpB,UAAU,CAAC7F,OAAO,CAACkH,IAAR,CAAapB,QAAb,EAAD,CAhCZ,CAiCLqB,KAAK,CAAEtB,UAAU,CAAC7F,OAAO,CAACoH,IAAR,CAAatB,QAAb,EAAD,CAjCZ,CAkCLuB,KAAK,CAAExB,UAAU,CAAC7F,OAAO,CAACsH,IAAR,CAAaxB,QAAb,EAAD,CAlCZ,CAmCLyB,KAAK,CAAE1B,UAAU,CAAC7F,OAAO,CAACwH,IAAR,CAAa1B,QAAb,EAAD,CAnCZ,CAoCL2B,KAAK,CAAE5B,UAAU,CAAC7F,OAAO,CAAC0H,IAAR,CAAa5B,QAAb,EAAD,CApCZ,CAqCL6B,KAAK,CAAE9B,UAAU,CAAC7F,OAAO,CAAC4H,IAAR,CAAa9B,QAAb,EAAD,CArCZ,CAsCL+B,KAAK,CAAEhC,UAAU,CAAC7F,OAAO,CAAC8H,IAAR,CAAahC,QAAb,EAAD,CAtCZ,CAAP,CAwCD,CAzCM,CAAP,CA0CD,CA9CD,CA+CA,GAAMtF,CAAAA,aAAa,2FAAG,wLAChB5F,gBADgB,2BAEdkI,WAFc,CAEclI,gBAFd,CAGd+F,MAHc,CAGEmC,WAAW,CAAClC,MAAZ,CAAmB,CAAnB,CAHF,CAIdC,aAJc,CAIWC,0BAA0B,CAAChG,IAAD,CAAO6F,MAAP,CAJrC,CAMlBmC,WAAW,CAAClC,MAAZ,CAAqBC,aAArB,CACAiC,WAAW,CAAC/B,OAAZ,CAAoB,CAApB,EAAuBgH,UAAvB,CAAoC,CAApC,CACAjF,WAAW,CAAC/B,OAAZ,CAAoB,CAApB,EAAuBiH,OAAvB,CAAiC,CAAjC,CAAoC;AARlB,uBAUgB1N,CAAAA,WAAW,CAAC,GAAD,CAAMwI,WAAN,CAV3B,QAUZ7B,MAVY,gBAYlB,GAAIA,MAAM,CAACC,IAAP,GAAgB,GAApB,CAAyB,CACvBvI,IAAI,CAAC,OAAD,CAAU,uCAAV,CAAmD,SAAnD,CAAJ,CAAkE2I,IAAlE,CACE,SAACxC,KAAD,CAAW,CACTwB,gBAAgB,CAAClD,wBAAD,CAA2B,KAA3B,CAAhB,CACD,CAHH,EAKA;AACD,CAPD,IAOO,CACLzE,IAAI,CAAC,OAAD,CAAUsI,MAAM,CAACE,IAAP,CAAYE,gBAAtB,CAAwC,OAAxC,CAAJ,CACD,CArBiB,yDAAH,kBAAbb,CAAAA,aAAa,2CAAnB,CAyBA,2IACA,GAAM/B,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACwJ,UAAD,CAAkBC,SAAlB,CAAsC,CAC9D,GAAI/J,CAAAA,KAAU,CAAG,CAAjB,CACA,GAAIe,CAAAA,GAAQ,CAAG,CAAf,CACA,GAAIiJ,CAAAA,MAAM,CAAG,CAAC,MAAD,CAAS,MAAT,CAAiB,MAAjB,CAAyB,MAAzB,CAAiC,MAAjC,CAAyC,MAAzC,CAAiD,MAAjD,CAAb,CAEA,IAAK,GAAIxF,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGwF,MAAM,CAACjK,MAA3B,CAAmCyE,CAAC,EAApC,CAAwC,CACtC,GAAIsF,UAAU,CAACE,MAAM,CAACxF,CAAD,CAAP,CAAV,EAAyB,EAA7B,CAAiC,CAC/BzD,GAAG,CAAG,CAAN,CACD,CAFD,IAEO,CACLA,GAAG,CAAG2G,UAAU,CAACoC,UAAU,CAACE,MAAM,CAACxF,CAAD,CAAP,CAAX,CAAhB,CACD,CACDxE,KAAK,CAAGA,KAAK,CAAGe,GAAhB,CACD,CACD,MAAO2G,CAAAA,UAAU,CAAC1H,KAAD,CAAV,CAAkBiK,OAAlB,CAA0B,CAA1B,EAA6BtC,QAA7B,EAAP,CACD,CAdD,CAgBA,GAAMuC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAqB,IAApBC,CAAAA,KAAoB,2DAAZ,OAAY,CACpD,GAAIH,CAAAA,MAAW,CAAG,CAAC,MAAD,CAAS,MAAT,CAAiB,MAAjB,CAAyB,MAAzB,CAAiC,MAAjC,CAAyC,MAAzC,CAAiD,MAAjD,CAAlB,CACA,GAAIjJ,CAAAA,GAAG,CAAG,CAAV,CACA,GAAIf,CAAAA,KAAK,CAAG,CAAZ,CACA,IAAK,GAAIwE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGwF,MAAM,CAACjK,MAA3B,CAAmCyE,CAAC,EAApC,CAAwC,CACtC,GAAI/G,qBAAqB,CAACsC,MAAtB,CAA+B,CAAnC,CAAsC,CACpC,GAAItC,qBAAqB,CAAC,CAAD,CAArB,CAAyBuM,MAAM,CAACxF,CAAD,CAA/B,GAAuC,EAA3C,CAA+C,CAC7CzD,GAAG,CAAG,CAAN,CACD,CAFD,IAEO,CACLA,GAAG,CAAG2G,UAAU,CAACjK,qBAAqB,CAAC,CAAD,CAArB,CAAyBuM,MAAM,CAACxF,CAAD,CAA/B,CAAD,CAAhB,CACD,CACDxE,KAAK,CAAGA,KAAK,CAAGe,GAAhB,CACD,CACF,CAED,GAAItD,qBAAqB,CAACsC,MAAtB,CAA+B,CAAnC,CAAsC,CACpC,GAAIC,KAAK,CAAC2H,QAAN,GAAiBzH,QAAjB,CAA0B,GAA1B,CAAJ,CAAoC,CAClCzC,qBAAqB,CAAC,CAAD,CAArB,CAAyB0M,KAAzB,EAAkCnK,KAAlC,CACD,CAFD,IAEO,CACLvC,qBAAqB,CAAC,CAAD,CAArB,CAAyB0M,KAAzB,EAAkCnK,KAAK,CAAG,IAA1C,CACD,CACDtC,wBAAwB,oBAAKD,qBAAL,EAAxB,CACD,CACF,CAvBD,CAwBA,GAAM2M,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,CAACzJ,KAAD,CAAmB,CACtD,GAAIA,KAAK,CAAC0F,IAAN,GAAatG,MAAb,CAAsB,CAA1B,CAA6B,CAC3B,GAAIY,KAAK,CAACT,QAAN,CAAe,GAAf,CAAJ,CAAyB,CACvB,MAAOS,CAAAA,KAAP,CACD,CACD,MAAOA,CAAAA,KAAK,CAAG,IAAf,CACD,CACD,MAAO,KAAP,CACD,CARD,CASA,GAAMwB,CAAAA,gBAAgB,2FAAG,kBACvBkI,MADuB,CAEvBC,gBAFuB,gJAIrBrO,UAAU,GACJgK,cALe,CAKEC,YAAY,CAACC,OAAb,CAAqB1L,aAAa,CAAC2L,EAAnC,GAA0C,EAL5C,CAMrB,GAAIjH,kBAAkB,CAACkH,IAAnB,GAA0BtG,MAA1B,EAAoC,CAAxC,CAA2C,CACvCX,qBAAqB,CAAC6G,cAAD,CAArB,CACH,CARoB,uBASW3J,CAAAA,gBAAgB,CAC9C6C,kBAAkB,EAAI8G,cADwB,CAEhDoE,MAFgD,CAT3B,QASjBvH,MATiB,gBAcrB,GAAIA,MAAM,CAACC,IAAP,GAAgB,GAApB,CAAyB,CACrBuD,wBAAwB,CAACxD,MAAD,CAASwH,gBAAT,CAAxB,CACH,CAFD,IAGK,CACD9P,IAAI,CAAC,OAAD,CAAUsI,MAAM,CAACE,IAAP,CAAYE,gBAAtB,CAAwC,OAAxC,CAAJ,CACH,CACHhH,UAAU,GApBa,wDAAH,kBAAhBiG,CAAAA,gBAAgB,kDAAtB,CAuBA,GAAMmE,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACxD,MAAD,CAAcwH,gBAAd,CAA4C,CAC3E,GAAMtH,CAAAA,IAAkB,CAAGF,MAAM,CAACE,IAAlC,CACA,GAAIA,IAAI,CAACP,MAAL,CAAY1C,MAAZ,CAAqB,CAAzB,CAA4B,CAC1B,GAAMwK,CAAAA,YAAqB,CAAGvH,IAAI,CAACP,MAAL,CAAYa,MAAZ,CAAmB,SAACzB,OAAD,CAAoB,CACnE,MAAOA,CAAAA,OAAO,CAACoF,MAAR,EAAkBpF,OAAO,CAACoF,MAAR,CAAelH,MAAf,CAAwB,CAAjD,CACD,CAF6B,CAA9B,CAGAiD,IAAI,CAACP,MAAL,CAAc8H,YAAd,CACA,GAAMC,CAAAA,SAA+B,CAAGxH,IAAI,CAACP,MAAL,CAAYb,GAAZ,CACtC,SAAC6I,QAAD,CAAWC,KAAX,CAAqB,CACnB,MAAO,CACLnH,EAAE,CAAE,EAAEmH,KADD,CAEL9G,OAAO,CAAE6G,QAAQ,CAACvD,MAFb,CAGLvD,EAAE,CAAE8G,QAAQ,CAACxD,MAHR,CAILpD,EAAE,CAAE4G,QAAQ,CAACtD,MAJR,CAKLrD,EAAE,CAAE2G,QAAQ,CAACrD,MALR,CAMLrD,EAAE,CAAE0G,QAAQ,CAAC7C,MANR,CAOL5D,EAAE,CAAEyG,QAAQ,CAAC3C,MAPR,CAQL7D,cAAc,CAAEwG,QAAQ,CAAClD,UARpB,CASLrD,QAAQ,CAAEuG,QAAQ,CAACjD,QAAT,EAAqB,EAT1B,CAULrD,OAAO,CAAEsG,QAAQ,CAAC9B,QAVb,CAWLvE,OAAO,CAAEqG,QAAQ,CAAC7B,QAXb,CAYL5I,KAAK,CAAEoK,4BAA4B,CAACK,QAAQ,CAAChD,KAAV,CAZ9B,CAaLsB,IAAI,CAAEqB,4BAA4B,CAACK,QAAQ,CAAC3B,KAAV,CAb7B,CAcLG,IAAI,CAAEmB,4BAA4B,CAACK,QAAQ,CAACzB,KAAV,CAd7B,CAeLG,IAAI,CAAEiB,4BAA4B,CAACK,QAAQ,CAACvB,KAAV,CAf7B,CAgBLG,IAAI,CAAEe,4BAA4B,CAACK,QAAQ,CAACrB,KAAV,CAhB7B,CAiBLG,IAAI,CAAEa,4BAA4B,CAACK,QAAQ,CAACnB,KAAV,CAjB7B,CAkBLG,IAAI,CAAEW,4BAA4B,CAACK,QAAQ,CAACjB,KAAV,CAlB7B,CAmBLG,IAAI,CAAES,4BAA4B,CAACK,QAAQ,CAACf,KAAV,CAnB7B,CAoBLrF,UAAU,CAAEoG,QAAQ,CAAC5B,UAAT,EAAuB,CApB9B,CAAP,CAsBD,CAxBqC,CAAxC,CA0BA3L,qBAAqB,CAAC,IAAD,CAArB,CACAR,mBAAmB,CAACsG,IAAD,CAAnB,CACA9F,qBAAqB,CAAC,KAAD,CAArB,CACAN,OAAO,CAAC4N,SAAD,CAAP,CACAlM,mBAAmB,CAAC0E,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgBC,MAAjB,CAAnB,CACArE,kBAAkB,CAACwE,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+H,QAAjB,CAAlB,CACAjM,kBAAkB,CAACsE,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+C,QAAjB,CAAlB,CACAiF,cAAc,CAAC5H,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgBC,MAAjB,CAAd,CACAgI,aAAa,CAAC7H,IAAI,CAAC8H,UAAN,CAAb,CACElN,gBAAgB,CAACoF,IAAI,CAAC8H,UAAL,CAAgB,CAAhB,EAAmBC,YAApB,CAAhB,CACA,GAAIC,CAAAA,UAA+B,CAAG,CAClCrL,QAAQ,CAAEC,SADwB,CAElCL,gBAAgB,CAAEyD,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgBqI,QAFA,CAGlCzL,gBAAgB,CAAEwD,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgBsI,OAHA,CAIlCzM,eAAe,CAAEuE,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgB+C,QAJC,CAKlClG,UAAU,CAAEuD,IAAI,CAACJ,OAAL,CAAa,CAAb,EAAgBuI,UALM,CAMlCzL,UAAU,CAAE,EANsB,CAAtC,CAQAI,gBAAgB,CAACkL,UAAD,CAAhB,CACH,CAED,GAAMI,CAAAA,YAAmB,CAAGpI,IAAI,CAACqI,SAAL,CAAezJ,GAAf,CAAmB,SAAC6I,QAAD,CAAWC,KAAX,CAAqB,CAClE,GAAIA,KAAK,EAAI,CAAb,CAAgB,CACd,MAAO,CACLnH,EAAE,CAAEmH,KADC,CAEL7F,KAAK,CAAE4F,QAAQ,CAACxD,MAFX,CAGLjH,KAAK,CAAEoK,4BAA4B,CAACK,QAAQ,CAAChD,KAAV,CAH9B,CAILsB,IAAI,CAAEqB,4BAA4B,CAACK,QAAQ,CAAC3B,KAAV,CAJ7B,CAKLG,IAAI,CAAEmB,4BAA4B,CAACK,QAAQ,CAACzB,KAAV,CAL7B,CAMLG,IAAI,CAAEiB,4BAA4B,CAACK,QAAQ,CAACvB,KAAV,CAN7B,CAOLG,IAAI,CAAEe,4BAA4B,CAACK,QAAQ,CAACrB,KAAV,CAP7B,CAQLG,IAAI,CAAEa,4BAA4B,CAACK,QAAQ,CAACnB,KAAV,CAR7B,CASLG,IAAI,CAAEW,4BAA4B,CAACK,QAAQ,CAACjB,KAAV,CAT7B,CAULG,IAAI,CAAES,4BAA4B,CAACK,QAAQ,CAACf,KAAV,CAV7B,CAAP,CAYD,CACD,GAAIgB,KAAK,EAAI,CAAb,CAAgB,CACd,MAAO,CACLnH,EAAE,CAAEmH,KADC,CAEL7F,KAAK,CAAE4F,QAAQ,CAACxD,MAFX,CAGLjH,KAAK,CAAEyK,QAAQ,CAAChD,KAAT,EAAkB,EAHpB,CAILsB,IAAI,CAAE0B,QAAQ,CAAC3B,KAAT,EAAkB,EAJnB,CAKLG,IAAI,CAAEwB,QAAQ,CAACzB,KAAT,EAAkB,EALnB,CAMLG,IAAI,CAAEsB,QAAQ,CAACvB,KAAT,EAAkB,EANnB,CAOLG,IAAI,CAAEoB,QAAQ,CAACrB,KAAT,EAAkB,EAPnB,CAQLG,IAAI,CAAEkB,QAAQ,CAACnB,KAAT,EAAkB,EARnB,CASLG,IAAI,CAAEgB,QAAQ,CAACjB,KAAT,EAAkB,EATnB,CAULG,IAAI,CAAEc,QAAQ,CAACf,KAAT,EAAkB,EAVnB,CAAP,CAYD,CACD,MAAO,CACLnG,EAAE,CAAEmH,KADC,CAEL7F,KAAK,CAAE4F,QAAQ,CAACxD,MAFX,CAGLjH,KAAK,CAAEyK,QAAQ,CAAChD,KAHX,CAILsB,IAAI,CAAE0B,QAAQ,CAAC3B,KAJV,CAKLG,IAAI,CAAEwB,QAAQ,CAACzB,KALV,CAMLG,IAAI,CAAEsB,QAAQ,CAACvB,KANV,CAOLG,IAAI,CAAEoB,QAAQ,CAACrB,KAPV,CAQLG,IAAI,CAAEkB,QAAQ,CAACnB,KARV,CASLG,IAAI,CAAEgB,QAAQ,CAACjB,KATV,CAULG,IAAI,CAAEc,QAAQ,CAACf,KAVV,CAAP,CAYD,CAzC2B,CAA5B,CA0CA,GAAI0B,YAAY,CAACrL,MAAb,CAAsB,CAA1B,CAA6B,CAC3BrC,wBAAwB,CAAC0N,YAAD,CAAxB,CACD,CACD,GAAIpI,IAAI,CAACP,MAAL,CAAY1C,MAAZ,EAAsB,CAA1B,CAA6B,CAC3B,GAAIuK,gBAAJ,CAAsB,CACpBxN,OAAO,CAAC,CAACD,IAAF,CAAP,CACD,CACF,CACF,CAxGD,CAyGA,GAAMyO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,SAAD,CAAiBxB,SAAjB,CAAuC,CACxD,MAAOwB,CAAAA,SAAS,CAACjI,MAAV,CAAiB,SAACzB,OAAD,CAAkB,CACxC,MAAOA,CAAAA,OAAO,CAACsI,KAAR,EAAiBJ,SAAxB,CACD,CAFM,CAAP,CAGD,CAJD,CAKA,GAAMyB,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,CACnCD,SADmC,CAEnCxB,SAFmC,CAGnC0B,SAHmC,CAIhC,CACH,GAAIC,CAAAA,MAAM,CAAGJ,UAAU,CAACC,SAAD,CAAYxB,SAAZ,CAAvB,CACA,GAAI2B,MAAM,CAAC3L,MAAP,EAAiB,CAArB,CAAwB,CACtB2L,MAAM,CAAC,CAAD,CAAN,CAAU,iBAAV,EAA+BD,SAA/B,CACD,CACF,CATD,CAUA,GAAMZ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACc,QAAD,CAAmB,CACvC,GAAIC,CAAAA,OAAqB,CAAGrO,eAA5B,CACA,GAAIoO,QAAQ,CAAC5L,MAAT,EAAmB,CAAvB,CAA0B,CACxB,GAAI4L,QAAQ,CAAC,CAAD,CAAR,CAAYE,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BL,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYE,SAAZ,EAAyB,CAA7B,CAAgC,CACrCL,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYG,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BN,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYG,SAAZ,EAAyB,CAA7B,CAAgC,CACrCN,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYI,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BP,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYI,SAAZ,EAAyB,CAA7B,CAAgC,CACrCP,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYK,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BR,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYK,SAAZ,EAAyB,CAA7B,CAAgC,CACrCR,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYM,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BT,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYM,SAAZ,EAAyB,CAA7B,CAAgC,CACrCT,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYO,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BV,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYO,SAAZ,EAAyB,CAA7B,CAAgC,CACrCV,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACD,GAAID,QAAQ,CAAC,CAAD,CAAR,CAAYQ,SAAZ,EAAyB,CAAC,CAA9B,CAAiC,CAC/BX,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,KAAlB,CAA5B,CACD,CAFD,IAEO,IAAID,QAAQ,CAAC,CAAD,CAAR,CAAYQ,SAAZ,EAAyB,CAA7B,CAAgC,CACrCX,4BAA4B,CAACI,OAAD,CAAU,MAAV,CAAkB,MAAlB,CAA5B,CACD,CACF,CACDpO,qBAAqB,oBAAKoO,OAAL,EAArB,CACD,CAxCD,CAyCA,GAAMhB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACwB,MAAD,CAAoB,CACzC,OAAQA,MAAR,EACE,IAAK,EAAL,CACA,IAAK,EAAL,CACEhP,sBAAsB,CAAC,IAAD,CAAtB,CACA,MACF,IAAK,EAAL,CACA,IAAK,EAAL,CACA,IAAK,EAAL,CACA,IAAK,EAAL,CACEA,sBAAsB,CAAC,KAAD,CAAtB,CACA,MACF,QACEA,sBAAsB,CAAC,KAAD,CAAtB,CACA,MAbJ,CAeD,CAhBD,CAkBA,GAAMiP,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAClC,KAAD,CAAamC,QAAb,CAA4BC,UAA5B,CAAgD,CAC1E,GAAIA,UAAU,EAAIA,UAAU,EAAI,EAAhC,CAAoC,CAClC,GAAIzC,CAAAA,UAAU,CAAGrM,qBAAqB,CAAC6F,MAAtB,CAA6B,SAACN,IAAD,CAAU,CACtD,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAFgB,CAAjB,CAGA,GAAIxC,UAAJ,CAAgB,CACdA,UAAU,CAAC,CAAD,CAAV,CAAcK,KAAd,EAAuBoC,UAAvB,CACD,CACF,CACF,CATD,CAUA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACrC,KAAD,CAAamC,QAAb,CAA4BC,UAA5B,CAAgD,CACrE,GAAIA,UAAU,EAAIA,UAAU,EAAI,EAAhC,CAAoC,CAClC,GAAMhI,CAAAA,cAAa,CAAG5H,IAAtB,CACA,GAAMmN,CAAAA,UAAgC,CAAGvF,cAAa,CAACjB,MAAd,CACvC,SAACN,IAAD,CAA8B,CAC5B,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAHsC,CAAzC,CAKA,GAAIxC,UAAJ,CAAgB,CACd;AACAA,UAAU,CAAC,CAAD,CAAV,CAAc,YAAd,EAA8B,CAA9B,CACA,GAAIyC,UAAU,CAAC5E,QAAX,GAAsBzH,QAAtB,CAA+B,GAA/B,CAAJ,CAAyC,CACvC4J,UAAU,CAAC,CAAD,CAAV,CAAcK,KAAd,EAAuBoC,UAAvB,CACD,CAFD,IAEO,CACLzC,UAAU,CAAC,CAAD,CAAV,CAAcK,KAAd,EAAuBoC,UAAU,CAAG,IAApC,CACD,CAED,GAAMvM,CAAAA,KAAK,CAAGM,iBAAiB,CAACwJ,UAAU,CAAC,CAAD,CAAX,CAAgBK,KAAhB,CAA/B,CACA,GAAMsC,CAAAA,mBAAmB,CAAG9P,IAAI,CAAC2G,MAAL,CAAY,SAACN,IAAD,CAAe,CACrD,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAF2B,CAA5B,CAGA,GAAIG,mBAAmB,CAAC1M,MAApB,CAA6B,CAAjC,CAAoC,CAClC,GAAIC,KAAK,CAACE,QAAN,CAAe,GAAf,CAAJ,CAAyB,CACvBuM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,OAAvB,EAAkCzM,KAAlC,CACD,CAFD,IAEO,CACLyM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,OAAvB,EAAkCzM,KAAK,CAAG,IAA1C,CACD,CACDpD,OAAO,oBAAKD,IAAL,EAAP,CACD,CACF,CACF,CACF,CA/BD,CAgCA;AACA,6IACA,GAAM+P,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACvC,KAAD,CAAamC,QAAb,CAA4BC,UAA5B,CAAgD,CACxE,GAAIA,UAAU,EAAIA,UAAU,EAAI,EAAhC,CAAoC,CAClC,GAAMhI,CAAAA,eAAa,CAAG5H,IAAtB,CACA,GAAMmN,CAAAA,UAAgC,CAAGvF,eAAa,CAACjB,MAAd,CACvC,SAACN,IAAD,CAA8B,CAC5B,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAHsC,CAAzC,CAKA,GAAIxC,UAAJ,CAAgB,CACdA,UAAU,CAAC,CAAD,CAAV,CAAcK,KAAd,EAAuBzC,UAAU,CAC/BA,UAAU,CAAC6E,UAAD,CAAV,CAAuBtC,OAAvB,CAA+B,CAA/B,EAAkCtC,QAAlC,EAD+B,CAAjC,CAGA3I,eAAe,CAACmL,KAAD,CAAf,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CACF,CACF,CAxBD,CAyBA,GAAMlK,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAC0M,UAAD,CAAkB5C,SAAlB,CAAqC,CAChE,GAAI/J,CAAAA,KAAU,CAAG,CAAjB,CACA,GAAIe,CAAAA,GAAQ,CAAG,CAAf,CACA,IAAK,GAAIyD,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGmI,UAAU,CAAC5M,MAA/B,CAAuCyE,CAAC,EAAxC,CAA4C,CAC1C,GAAImI,UAAU,CAACnI,CAAD,CAAV,CAAcuF,SAAd,GAA4B,EAAhC,CAAoC,CAClChJ,GAAG,CAAG,CAAN,CACD,CAFD,IAEO,CACLA,GAAG,CAAG2G,UAAU,CAACiF,UAAU,CAACnI,CAAD,CAAV,CAAcuF,SAAd,CAAD,CAAhB,CACD,CACD/J,KAAK,CAAGA,KAAK,CAAGe,GAAhB,CACD,CACD,MAAO2G,CAAAA,UAAU,CAAC1H,KAAD,CAAV,CAAkBiK,OAAlB,CAA0B,CAA1B,EAA6BtC,QAA7B,EAAP,CACD,CAZD,CAcA;AAEA,GAAMiF,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACrJ,EAAD,CAAa5C,KAAb,CAA+B,CACnD,GAAIkM,CAAAA,OAAO,CAAG,KAAd,CACA,GAAIC,CAAAA,MAAM,CAAG,mBAAb,CACA,OAAQC,QAAQ,CAACxJ,EAAD,CAAhB,EACE,IAAK,EAAL,CACEsJ,OAAO,CAAGG,MAAM,CAACF,MAAD,CAAS,GAAT,CAAN,CAAoBG,IAApB,CAAyBtM,KAAzB,CAAV,CACA,MACF,IAAK,EAAL,CACEkM,OAAO,CAAGG,MAAM,CAACF,MAAD,CAAS,GAAT,CAAN,CAAoBG,IAApB,CAAyBtM,KAAzB,CAAV,CACA,MACF,IAAK,EAAL,CACEkM,OAAO,CAAGG,MAAM,CAACF,MAAD,CAAS,GAAT,CAAN,CAAoBG,IAApB,CAAyBtM,KAAzB,CAAV,CACA,MACF,IAAK,EAAL,CACEkM,OAAO,CAAGG,MAAM,CAACF,MAAD,CAAS,GAAT,CAAN,CAAoBG,IAApB,CAAyBtM,KAAzB,CAAV,CACA,MAZJ,CAcA,MAAOkM,CAAAA,OAAP,CACD,CAlBD,CAmBA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACvM,KAAD,CAAmB,CACtC,GAAIwM,CAAAA,WAAW,CAAG,KAAlB,CACA,GAAIC,CAAAA,aAAa,CAAG,KAApB,CACAD,WAAW,CAAGJ,QAAQ,CAACpM,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAR,EAAiC,EAA/C,CACAwM,aAAa,CAAGL,QAAQ,CAACpM,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAR,EAAiC,EAAjD,CACA,MAAOuM,CAAAA,WAAW,EAAIC,aAAtB,CACD,CAND,CAOA,GAAMC,CAAAA,2CAA2C,CAAG1S,KAAK,CAAC2S,WAAN,CAClD,eAAgDC,KAAhD,CAA0D,IAAvDhK,CAAAA,EAAuD,OAAvDA,EAAuD,CAAnD4G,KAAmD,OAAnDA,KAAmD,CAA5CpO,KAA4C,OAA5CA,KAA4C,CACxD,GAAI8Q,CAAAA,OAAO,CAAG,KAAd,CACA,GAAI9Q,KAAK,CAAC4E,KAAV,CAAiB,CACfkM,OAAO,CAAGD,aAAa,CAACrJ,EAAE,CAACoE,QAAH,EAAD,CAAgB5L,KAAK,CAAC4E,KAAN,CAAYgH,QAAZ,EAAhB,CAAvB,CAEA,GAAI,CAACkF,OAAL,CAAc,CACZrS,IAAI,CAAC,OAAD,CAAU,sCAAV,CAAkD,SAAlD,CAAJ,CACD,CAFD,IAEO,CACLqS,OAAO,CAAGK,YAAY,CAACnR,KAAK,CAAC4E,KAAN,CAAYgH,QAAZ,EAAD,CAAtB,CACA,GAAI,CAACkF,OAAL,CAAc,CACZrS,IAAI,CAAC,OAAD,CAAU,6BAAV,CAAyC,SAAzC,CAAJ,CACD,CACF,CAED,GAAIqS,OAAJ,CAAa,CACXR,mBAAmB,CAAClC,KAAD,CAAe5G,EAAf,CAAmBxH,KAAK,CAAC4E,KAAzB,CAAnB,CACD,CACDjD,wBAAwB,oBAAKD,qBAAL,EAAxB,CACD,CACF,CApBiD,CAqBlD,CAACA,qBAAD,CArBkD,CAApD,CAwBA,GAAM+P,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAC7M,KAAD,CAAgB,CACnC,GAAIkM,CAAAA,OAAO,CAAG,KAAd,CACA,GAAI,MAAOlM,CAAAA,KAAP,GAAiB,QAAjB,EAA6B,CAAC8M,MAAM,CAACC,KAAP,CAAaD,MAAM,CAAC9M,KAAD,CAAnB,CAAlC,CAA+D,CAC7DA,KAAK,CAAG8M,MAAM,CAAC9M,KAAD,CAAd,CACAkM,OAAO,CAAG,IAAV,CACD,CAHD,IAGO,CACLA,OAAO,CAAG,KAAV,CACD,CACD,MAAOA,CAAAA,OAAP,CACD,CATD,CAUA,GAAMc,CAAAA,6BAA6B,CAAGhT,KAAK,CAAC2S,WAAN,CACpC,gBAAgDC,KAAhD,CAA0D,IAAvDhK,CAAAA,EAAuD,QAAvDA,EAAuD,CAAnD4G,KAAmD,QAAnDA,KAAmD,CAA5CpO,KAA4C,QAA5CA,KAA4C,CACxD,GAAI8Q,CAAAA,OAAO,CAAG,KAAd,CACA,GAAMP,CAAAA,QAAQ,CAAG/I,EAAjB,CACA,GAAMgJ,CAAAA,UAAU,CAAGxQ,KAAK,CAAC4E,KAAzB,CACA,GAAMiN,CAAAA,QAAa,CAAG,EAAtB,CACA,GAAIrB,UAAJ,CAAgB,CACd,GAAIiB,YAAY,CAACjB,UAAU,CAAC5E,QAAX,EAAD,CAAhB,CAAyC,CACvCkF,OAAO,CACLgB,YAAY,CAACtB,UAAD,CAAZ,EACAuB,eAAe,CAACxB,QAAD,CAAWnC,KAAX,CAAkBoC,UAAlB,CADf,EAEAwB,eAAe,CAACzB,QAAD,CAAWnC,KAAX,CAAkBoC,UAAlB,CAHjB,CAKA,GAAIM,OAAJ,CAAa,CACXjQ,OAAO,oBAAKD,IAAL,EAAP,CACD,CAFD,IAEO,CACLnC,IAAI,CAAC,OAAD,CAAU,gCAAV,CAA4C,SAA5C,CAAJ,CACAoC,OAAO,oBAAKD,IAAL,EAAP,CACD,CAED,GAAIkQ,OAAJ,CAAa,CACXL,cAAc,CAACrC,KAAD,CAAemC,QAAf,CAAyBC,UAAzB,CAAd,CACAG,iBAAiB,CAACvC,KAAD,CAAemC,QAAf,CAAyBC,UAAzB,CAAjB,CACArC,wBAAwB,CAAC,OAAD,CAAxB,CACD,CACD,GAAI,CAAC2C,OAAL,CAAc,CACZjQ,OAAO,oBAAKD,IAAL,EAAP,CACD,CAFD,IAEO,CACL,GAAM8P,CAAAA,mBAAwB,CAAG9P,IAAI,CAAC2G,MAAL,CAAY,SAACN,IAAD,CAAe,CAC1D,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAFgC,CAAjC,CAGA,GAAIG,mBAAmB,CAAC1M,MAApB,CAA6B,CAAjC,CAAoC,CAClC,GAAIwM,UAAU,CAAC5E,QAAX,GAAsBzH,QAAtB,CAA+B,GAA/B,CAAJ,CAAyC,CACvCuM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBtC,KAAvB,EAAgCoC,UAAhC,CACD,CAFD,IAEO,CACLE,mBAAmB,CAAC,CAAD,CAAnB,CAAuBtC,KAAvB,EAAgCoC,UAAU,CAAG,IAA7C,CACD,CACF,CACD3P,OAAO,oBAAKD,IAAL,EAAP,CACD,CACF,CAjCD,IAiCO,CACLC,OAAO,oBAAKD,IAAL,EAAP,CACAnC,IAAI,CAAC,OAAD,CAAU,eAAV,CAA2B,SAA3B,CAAJ,CACD,CACF,CACF,CA7CmC,CA8CpC,CAACmC,IAAD,CAAOsB,aAAP,CA9CoC,CAAtC,CAiDA,GAAM+P,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACT,KAAD,CAAgB,CAC/CzP,oBAAoB,CAACyP,KAAK,CAACU,cAAP,CAApB,CACD,CAFD,CAIA,GAAMJ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAC9M,GAAD,CAAc,CACjC,GAAI8L,CAAAA,OAAO,CAAG,KAAd,CACA,GAAI,CAACa,KAAK,CAAC3M,GAAD,CAAV,CAAiB,CACf,GAAIA,GAAG,EAAI,EAAX,CAAe,CACb8L,OAAO,CAAG,IAAV,CACD,CACF,CACD,MAAOA,CAAAA,OAAP,CACD,CARD,CASA,GAAMkB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACzB,QAAD,CAAgBnC,KAAhB,CAA4BoC,UAA5B,CAAgD,CACtE,GAAIM,CAAAA,OAAO,CAAG,KAAd,CACA,GAAM/C,CAAAA,UAAU,CAAGnN,IAAI,CAAC2G,MAAL,CAAY,SAACN,IAAD,CAAe,CAC5C,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAFkB,CAAnB,CAGA,GAAIxC,UAAJ,CAAgB,CACd,GAAM9J,CAAAA,KAAK,CAAGC,oBAAoB,CAACtD,IAAD,CAAOwN,KAAP,CAAlC,CACA,GAAIzC,UAAU,CAAC1H,KAAD,CAAV,CAAoB0H,UAAU,CAAC6E,UAAD,CAA9B,EAA8C,EAAlD,CAAsD,CACpDM,OAAO,CAAG,IAAV,CACD,CACF,CACD,MAAOA,CAAAA,OAAP,CACD,CAZD,CAaA,GAAMiB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACxB,QAAD,CAAgBnC,KAAhB,CAA4BoC,UAA5B,CAAgD,CACtE,GAAIM,CAAAA,OAAO,CAAG,KAAd,CAEA,GAAM/C,CAAAA,UAAe,CAAGnN,IAAI,CAAC2G,MAAL,CAAY,SAACN,IAAD,CAAe,CACjD,MAAOA,CAAAA,IAAI,CAACO,EAAL,EAAW+I,QAAlB,CACD,CAFuB,CAAxB,CAGA,GAAIxC,UAAJ,CAAgB,CACd,GAAM9J,CAAAA,KAAK,CAAGM,iBAAiB,CAACwJ,UAAU,CAAC,CAAD,CAAX,CAAgBK,KAAhB,CAA/B,CACA,GAAIzC,UAAU,CAAC1H,KAAD,CAAV,CAAoB0H,UAAU,CAAC6E,UAAD,CAA9B,EAA8C,GAAlD,CAAuD,CACrDM,OAAO,CAAG,IAAV,CACD,CACF,CACD,MAAOA,CAAAA,OAAP,CACD,CAbD,CAcA,GAAMqB,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CAAC1N,MAAD,CAAiB,CAClD,GAAIrD,mBAAJ,CAAyB,CACvB,GAAIqD,MAAM,CAAC+C,EAAP,EAAa,CAAjB,CAAoB,CAClB,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CACD,CACD,MAAO,MAAP,CACD,CARD,CASA,mBACE,oCAEE,KAAC,UAAD,EACE,IAAI,CAAE1G,IADR,CAEE,OAAO,CAAEqF,eAFX,CAGE,WAAW,CAAEmD,aAHf,CAIE,SAAS,CAAErD,SAJb,CAKE,IAAI,CAAEjE,WALR,CAME,UAAU,CAAEoB,kBANd,EAFF,cAWE,KAAC,aAAD,EACE,IAAI,CAAEpC,iBADR,CAEE,OAAO,CAAE8I,kBAFX,CAGE,WAAW,CAAEH,kBAHf,CAIE,eAAe,CAAEjH,eAJnB,CAKE,aAAa,CAAE,EALjB,CAME,MAAM,CAAE,WANV,CAOE,WAAW,CAAE,KAPf,CAQQ,WAAW,CAAE,KARrB,CASQ,cAAc,CAAEoB,aATxB,EAXF,cAsBE,KAAC,UAAD,EACE,IAAI,CAAExC,cADR,CAEE,OAAO,CAAEkJ,eAFX,CAGE,WAAW,CAAER,iBAHf,CAIE,SAAS,CACPpH,wBAAwB,CAACoB,MAAzB,CAAkC,CAAlC,CACIpB,wBAAwB,CAAC,CAAD,CAAxB,CAA4BmD,GADhC,CAEI,CAPR,CASE,IAAI,CAAEnD,wBATR,EAtBF,cAiCE,KAAC,aAAD,EACE,kBAAkB,CAAEkC,sBADtB,CAEE,oBAAoB,CAAEN,oBAFxB,EAjCF,cAqCE,KAAC,SAAD,EACE,aAAa,CAAE2B,eADjB,CAEE,WAAW,CAAEE,iBAFf,CAGE,aAAa,CAAEwC,mBAHjB,CAIE,WAAW,CAAExB,eAJf,CAKE,eAAe,CAAEd,iBALnB,CAME,eAAe,CAAE/D,eANnB,CAOE,gBAAgB,CAAEF,gBAPpB,CAQE,cAAc,CAAEoH,sBARlB,CASE,WAAW,CAAEK,eATf,CAUE,aAAa,CAAEzG,oBAVjB,CAWE,YAAY,CAAEtD,KAAK,CAACoS,cAXtB,EArCF,cAkDE,YAAK,KAAK,CAAE,CAAEC,aAAa,CAAE,CAAjB,CAAZ,uBACE,KAAC,SAAD,EACE,MAAM,CAAE7R,YADV,CAEE,OAAO,CAAEgB,eAFX,CAGE,OAAO,CAAEZ,IAHX,CAIE,iBAAiB,CAAE,IAJrB,CAKE,YAAY,CAAEsB,aALhB,CAME,wBAAwB,CAAE0P,6BAN5B,CAOE,WAAW,CAAE/N,SAPf,CAQE,sBAAsB,CAAEoO,wBAR1B,CASE,kBAAkB,CAAE/Q,kBATtB,CAUE,mBAAmB,CAAEE,mBAVvB,CAWE,qBAAqB,CAAEyC,SAXzB,EADF,EAlDF,cAiEE,YAAK,KAAK,CAAE,CAAEyO,UAAU,CAAE,CAAd,CAAZ,uBACE,KAAC,SAAD,EACE,MAAM,CAAE7R,iBADV,CAEE,OAAO,CAAEnB,YAFX,CAGE,OAAO,CAAEoC,qBAHX,CAIE,iBAAiB,CAAE,KAJrB,CAKE,wBAAwB,CAAE4P,2CAL5B,CAME,YAAY,CAAElP,kBANhB,CAOE,WAAW,CAAEyB,SAPf,CAQE,sBAAsB,CAAEA,SAR1B,CASE,kBAAkB,CAAE3C,kBATtB,CAUE,mBAAmB,CAAEE,mBAVvB,CAWE,qBAAqB,CAAE+Q,0BAXzB,EADF,EAjEF,cAgFE,YAAK,SAAS,CAAC,iBAAf,UAAkCvQ,aAAlC,EAhFF,GADF,CAoFD,CA5rCD,CA8rCA,cAAe7B,CAAAA,SAAf","sourcesContent":["import CodeDialog from \"../time-entry-code/code_dialog\";\r\nimport DataTable from \"../common/DataTable\";\r\nimport CodeEntryWeek from \"../time-rentry-week/index\";\r\nimport StatusBar from \"../status-bar/StatusBar\";\r\nimport swal from \"sweetalert\";\r\nimport * as constantClass from \"../Constants/Constants\";\r\n\r\nimport {\r\n  GridCellValue,\r\n  GridColDef,\r\n  GridEditCellPropsParams,\r\n  GridEditRowsModel,\r\n  useGridApiRef,\r\n} from \"@material-ui/data-grid\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  TimeEntryCode,\r\n  getEmptyHours,\r\n  getNewCode,\r\n  TimeEntryDataTable,\r\n  DropdownStructure,\r\n  Day,\r\n} from \"../time-entry-sheet/data\";\r\nimport { Api, ResponseDTO } from \"../../utils/api/api\";\r\nimport { FTmpT, TimeSheetDTO } from \"../../utils/api/Models\";\r\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core\";\r\nimport CommentDialog, {\r\n  CommentScreenObject,\r\n} from \"../time-entry-sheet/comment/dialog\";\r\nimport CopyDialog from \"../time-entry-sheet/copy/dialog\";\r\nimport {\r\n  timeSheetColumns,\r\n  timeSheetColumnstest,\r\n  totalColumns,\r\n} from \"../time-entry-sheet/Columns/timeSheetColumns\";\r\nimport { useLoader } from \"../../contexts/use-loader\";\r\nimport useFetch from \"../../contexts/use-effect\";\r\nimport \"./timesheet.css\";\r\n\r\ninterface ITimeSheetProps {\r\n  onCloseClicked: any;\r\n}\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100%\",\r\n      \"& > * + *\": {\r\n        marginTop: theme.spacing(2),\r\n      },\r\n    },\r\n  })\r\n);\r\nconst Timesheet = (props: ITimeSheetProps) => {\r\n  const classes = useStyles();\r\n  const { showLoader, hideLoader } = useLoader();\r\n  const { qTimeSaveFn, copyTimeSheet, getEndingWeek, getTimeSheetData } =\r\n    useFetch();\r\n\r\n  var timeSheetref = useGridApiRef();\r\n  var totalTimeSheetRef = useGridApiRef();\r\n  const [timeSheetDataSet, setTimeSheetDataSet] =\r\n    React.useState<TimeSheetDTO>();\r\n  const [rows, setRows] = React.useState<TimeEntryDataTable[]>([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [openCommentDialog, setOpenCommentDialog] = useState(false);\r\n  const [isDataTableLoading, setIsDataTableLoading] = useState(false);\r\n  const [isDataTableEditable, setIsDataTableEditable] = useState(false);\r\n\r\n  const [openCopyDialog, setOpenCopyDialog] = useState(false);\r\n  const [timeSheetHeader, updateTimeSheetHeader] =\r\n    useState<GridColDef[]>(timeSheetColumns);\r\n  const [totalTimeSheetRecords, setTotalTimeSheetRecords] = useState<any[]>([]);\r\n  const [footerMessage, setFooterMessage] = useState(\"\");\r\n  const [selectionRowIndex, setselectionRowIndex] = useState<any[]>([]);\r\n  const [projectCode, setProjectCode] = useState(getNewCode());\r\n  const [editRowsModel, setEditRowsModel] = React.useState<GridEditRowsModel>(\r\n    {}\r\n  );\r\n  const [editTotalRowsModel, setEditTotalRowsModel] =\r\n    React.useState<GridEditRowsModel>({});\r\n  const [submitBtnCaption, setsubmitBtnCaption] = useState(1);\r\n  const [submittedStatus, setsubmittedStatus] = useState(\"\");\r\n  const [employeeComment, setEmployeeComment] = useState(\"\");\r\n  const [copyTimeSheetPayDateData, setCopyTimeSheetPayDateData] = useState<\r\n    DropdownStructure[]\r\n  >([]);\r\n  const [periods, setPeriods] = useState([]);\r\n  const [updatedField, setUpdatedField] = useState(\"\");\r\n  const [selectedTimeSheetPayDate, setSelectedTimeSheetPayDate] = useState(\"\");\r\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(\"\");\r\n  const [newDisplayBtnCaption, setNewDisplayBtnCaption] = useState(\"Display\");\r\n  const [commentObject, setCommentObject] = useState<CommentScreenObject>({\r\n        employeeComment: \"\",\r\n        approver1Comment: \"\",\r\n        approver2Comment: \"\",\r\n        reasonCode: \"\",\r\n        selectedId: \"\",\r\n        approver: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (updatedField.length > 0) {\r\n      setUpdatedField(\"\");\r\n      const total = calculateColumnTotal(rows, updatedField);\r\n      if (totalTimeSheetRecords.length > 0) {\r\n        if (total.includes(\".\")) {\r\n          totalTimeSheetRecords[0][updatedField] = total;\r\n        } else {\r\n          totalTimeSheetRecords[0][updatedField] = total + \".0\";\r\n        }\r\n        const rowTotal = calculateTotalDataTableRow(totalTimeSheetRecords);\r\n        totalTimeSheetRecords[0][\"total\"] = rowTotal;\r\n        setTotalTimeSheetRecords([...totalTimeSheetRecords]);\r\n      }\r\n    }\r\n  }, [updatedField]);\r\n\r\n  const calculateTotalDataTableRow = (totaldtRecords: any) => {\r\n    if (totaldtRecords.length > 0) {\r\n      const total = calculateRowTotal(totaldtRecords[0]);\r\n      return total;\r\n    }\r\n  };\r\n  const handleEmployeeChange = (params: any) => {\r\n    const employeeId = params.target.value.split(\"-\")[0];\r\n    setSelectedEmployeeId(employeeId);\r\n    setNewDisplayBtnCaption(\"Display\");\r\n    setRows([]);\r\n    setTotalTimeSheetRecords([]);\r\n    setsubmitBtnCaption(-100);\r\n  };\r\n  const handleWeekObjectChange = async (obj: any, val: any) => {\r\n    //let loggedInId = localStorage.getItem(constantClass.ID);\r\n    //if (loggedInId) {\r\n    //  setSelectedEmployeeId(loggedInId);\r\n    //}\r\n    setNewDisplayBtnCaption(\"Display\");\r\n    setsubmitBtnCaption(-100);\r\n    setRows([]);\r\n    setTotalTimeSheetRecords([]);\r\n    const payDate = obj[val].PayDate.split(\"T\")[0];\r\n    let selectedDateObj = new Date(payDate);\r\n    selectedDateObj.setDate(selectedDateObj.getDate() - 6);\r\n    timeSheetColumns[11].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[12].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[13].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[14].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[15].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[16].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    selectedDateObj.setDate(selectedDateObj.getDate() + 1);\r\n    timeSheetColumns[17].headerName =\r\n      selectedDateObj.toDateString().split(\" \")[2] +\r\n      \" \" +\r\n      selectedDateObj.toDateString().split(\" \")[1];\r\n    let updatedTimesheetObj = [...timeSheetColumns];\r\n    updateTimeSheetHeader(updatedTimesheetObj);\r\n    setSelectedTimeSheetPayDate(payDate);\r\n    const payDateList: any = await getPeriods();\r\n    if (payDateList && payDateList.length > 0) {\r\n      const filteredWeeks = payDateList.map((element: any) => {\r\n        return {\r\n          key: element.WeekNo,\r\n          value: element.PayDate.split(\"T\")[0],\r\n        };\r\n      });\r\n      setPeriods(payDateList);\r\n      setCopyTimeSheetPayDateData(filteredWeeks);\r\n    }\r\n  };\r\n\r\n  const setLoader = (show: boolean) => {\r\n    show ? showLoader() : hideLoader();\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    switch (newDisplayBtnCaption) {\r\n      case \"New\":\r\n        setOpen(!open);\r\n        setProjectCode(getNewCode());\r\n        break;\r\n      case \"Display\":\r\n        setTimeSheetData(selectedTimeSheetPayDate, true);\r\n        setNewDisplayBtnCaption(\"New\");\r\n        break;\r\n    }\r\n  };\r\n  const handleSaveClicked = () => {\r\n    saveTimeSheet();\r\n  };\r\n  const handleSubmitClick = async () => {\r\n    let updatedTimeSheetDataSet: any = timeSheetDataSet;\r\n    if (updatedTimeSheetDataSet) {\r\n      showLoader();\r\n      let newRow: FTmpT = updatedTimeSheetDataSet.fTmpTs[0];\r\n      let updatedObject: FTmpT[] = mapTimeSheetDataBeforeSave(rows, newRow);\r\n      updatedTimeSheetDataSet.fTmpTs = updatedObject;\r\n\r\n      switch (updatedTimeSheetDataSet.fTshSum[0].STATUS) {\r\n        case 1:\r\n          updatedTimeSheetDataSet.fTshSum[0].STATUS = 4;\r\n          break;\r\n        case 4:\r\n          updatedTimeSheetDataSet.fTshSum[0].STATUS = 1;\r\n          break;\r\n        case 2:\r\n          updatedTimeSheetDataSet.fTshSum[0].STATUS = 3;\r\n          break;\r\n        case 3:\r\n          updatedTimeSheetDataSet.fTshSum[0].STATUS = 1;\r\n          break;\r\n      }\r\n\r\n      const result: ResponseDTO = await qTimeSaveFn(\r\n        \"1\",\r\n        updatedTimeSheetDataSet\r\n      );\r\n      hideLoader();\r\n        if (result.code === 200) {\r\n            const data = result.data;\r\n            if (data) {\r\n                if (data.response) {\r\n                    if (data.response.data.ExceptionMessage) {\r\n                        swal(\"QTIME\", data.response.data.ExceptionMessage, \"error\");\r\n                    }\r\n                } else {\r\n                    if (data.includes(\"ERROR\")) {\r\n                        swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\r\n                    } else {\r\n                        swal(\r\n                            \"QTIME\",\r\n                            \"Timesheet has been saved successfully\",\r\n                            \"success\"\r\n                        ).then((value) => {\r\n                            setIsDataTableLoading(true);\r\n                            setTimeSheetData(selectedTimeSheetPayDate, false);\r\n                            setIsDataTableLoading(false);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            swal(\"QTIME\", result.data.ExceptionMessage, \"error\");\r\n        }\r\n    }\r\n  };\r\n  // const handleSubmitClick = async () => {\r\n  //   let updatedTimeSheetDataSet: any = timeSheetDataSet;\r\n  //   if (updatedTimeSheetDataSet) {\r\n  //     let newRow: FTmpT = updatedTimeSheetDataSet.fTmpTs[0];\r\n  //     let updatedObject: FTmpT[] = mapTimeSheetDataBeforeSave(rows, newRow);\r\n  //     updatedTimeSheetDataSet.fTmpTs = updatedObject;\r\n  //     updatedTimeSheetDataSet.fTshSum[0].STATUS = 4;\r\n  //     var data: any = await Api.qTimeSaveFn(\"1\", updatedTimeSheetDataSet);\r\n  //     if (data) {\r\n  //       if (data.response) {\r\n  //         if (data.response.data.ExceptionMessage) {\r\n  //           swal(\"QTIME\", data.response.data.ExceptionMessage, \"error\");\r\n  //         }\r\n  //       } else {\r\n  //         if (data.includes(\"ERROR\")) {\r\n  //           swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\r\n  //         } else {\r\n  //           swal(\"QTIME\", \"Submitted Successfully\", \"success\").then(\r\n  //             (value) => {\r\n  //               setTimeSheetData(selectedTimeSheetPayDate, false);\r\n  //             }\r\n  //           );\r\n  //         }\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // };\r\n  const handleEditClick = () => {\r\n    if (selectionRowIndex.length == 0) {\r\n      swal(\"QTIME\", \"There are no record to edit.\", \"warning\");\r\n    } else if (selectionRowIndex.length > 1) {\r\n      swal(\"QTIME\", \"Please select a record to edit.\", \"warning\");\r\n    } else if (selectionRowIndex.length == 1) {\r\n      const selectedModel = rows.filter((element: TimeEntryDataTable) => {\r\n        return element.id == selectionRowIndex[0];\r\n      });\r\n      const selectedRow = selectedModel[0];\r\n      const editCode: TimeEntryCode = {\r\n        id: selectedRow.id,\r\n        codeEntry: {\r\n          l1: selectedRow.l1,\r\n          jobCode: selectedRow.jobCode,\r\n          l2: selectedRow.l2,\r\n          l3: selectedRow.l3,\r\n          l4: selectedRow.l4,\r\n          l5: selectedRow.l5,\r\n          classification: selectedRow.classification,\r\n          location: selectedRow.location,\r\n          l3Title: selectedRow.l3Title,\r\n          l4Title: selectedRow.l4Title,\r\n        },\r\n        int_change: selectedRow.int_change,\r\n      };\r\n      setProjectCode(editCode);\r\n      setOpen(true);\r\n    }\r\n  };\r\n  const deleteRecords = async () => {\r\n    let timeSheetData: TimeEntryDataTable[] = rows;\r\n    for (let i = 0; i < selectionRowIndex.length; i++) {\r\n      const selectedModelIndex: number = timeSheetData.findIndex(\r\n        (element: TimeEntryDataTable) => {\r\n          return element.id == selectionRowIndex[i];\r\n        }\r\n      );\r\n      if (selectedModelIndex > -1) {\r\n        timeSheetData[selectedModelIndex].int_change = -1;\r\n      }\r\n    }\r\n    if (timeSheetDataSet) {\r\n      let updatedData: TimeSheetDTO = timeSheetDataSet;\r\n      let newRow: FTmpT = updatedData.fTmpTs[0];\r\n      updatedData.fTmpTs = mapTimeSheetDataBeforeSave(timeSheetData, newRow);\r\n\r\n      const result: ResponseDTO = await qTimeSaveFn(\"1\", updatedData);\r\n\r\n        if (result.code === 200) {\r\n            const data = result.data;\r\n            if (data.response) {\r\n                if (data.response.data.ExceptionMessage) {\r\n                    swal(\"QTIME\", data.response.data.ExceptionMessage, \"error\");\r\n                }\r\n            } else {\r\n                if (data.includes(\"ERROR\")) {\r\n                    swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\r\n                } else {\r\n                    swal(\"QTIME\", \"Deleted successfully\", \"success\").then((value) => {\r\n                        setIsDataTableLoading(true);\r\n                        setTimeSheetData(selectedTimeSheetPayDate, false);\r\n                        setIsDataTableLoading(false);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            swal(\"QTIME\", result.data.ExceptionMessage, \"error\");\r\n        }\r\n    }\r\n  };\r\n  // const deleteRecords = async () => {\r\n  //   let timeSheetData: TimeEntryDataTable[] = rows;\r\n  //   for (let i = 0; i < selectionRowIndex.length; i++) {\r\n  //     const selectedModelIndex: number = timeSheetData.findIndex(\r\n  //       (element: TimeEntryDataTable) => {\r\n  //         return element.id == selectionRowIndex[i];\r\n  //       }\r\n  //     );\r\n  //     if (selectedModelIndex > -1) {\r\n  //       timeSheetData[selectedModelIndex].int_change = -1;\r\n  //     }\r\n  //   }\r\n  //   if (timeSheetDataSet) {\r\n  //     let updatedData: TimeSheetDTO = timeSheetDataSet;\r\n  //     let newRow: FTmpT = updatedData.fTmpTs[0];\r\n  //     updatedData.fTmpTs = mapTimeSheetDataBeforeSave(timeSheetData, newRow);\r\n\r\n  //     const data: any = await Api.qTimeSaveFn(\"1\", updatedData);\r\n  //     if (data.includes(\"ERROR\")) {\r\n  //       swal(\"QTIME\", data.split(\"ERROR -\")[1], \"error\");\r\n  //     } else {\r\n  //       swal(\"QTIME\", \"Deleted Successfully\", \"success\").then((value) => {\r\n  //         setTimeSheetData(selectedTimeSheetPayDate, false);\r\n  //       });\r\n  //     }\r\n  //   }\r\n  // };\r\n  const handleDeleteClicked = async () => {\r\n    if (selectionRowIndex.length > 0) {\r\n      swal({\r\n        title: \"Are you sure?\",\r\n        text: \"Do you want to delete the records\",\r\n        icon: \"warning\",\r\n        buttons: [\"Ok\", \"Cancel\"],\r\n        dangerMode: true,\r\n        closeOnEsc: false,\r\n        closeOnClickOutside: false,\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          deleteRecords();\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClickOk = (code: TimeEntryCode) => {\r\n    let newRows: TimeEntryDataTable[] = [];\r\n    if (code.id > 0) {\r\n      newRows = rows.map((row) => {\r\n        if (row.id === code.id) {\r\n          return {\r\n            ...row,\r\n            ...code.codeEntry,\r\n          };\r\n        } else {\r\n          return row;\r\n        }\r\n      });\r\n    } else {\r\n      let rowId = rows.length + 1;\r\n      code.id = rowId;\r\n      let newRow: TimeEntryDataTable = {\r\n        id: rowId,\r\n        ...code.codeEntry,\r\n        ...getEmptyHours(),\r\n        total: 0,\r\n        int_change: 0,\r\n      };\r\n      newRows = [...rows, newRow];\r\n    }\r\n\r\n    setRows(newRows);\r\n    setProjectCode(getNewCode());\r\n  };\r\n  const handleCommentClickOpen = () => {\r\n    setOpenCommentDialog(!openCommentDialog);\r\n    };\r\n    {/*\r\n  const handleCommentClick = (commentObject: CommentScreenObject) => {\r\n    setOpenCommentDialog(!openCommentDialog);\r\n    if (commentObject) {\r\n      let data = timeSheetDataSet;\r\n      if (data) {\r\n        data.fTshSum[0].EMPNOTES = commentObject.employeeComment;\r\n        setEmployeeComment(data.fTshSum[0].EMPNOTES);\r\n      }\r\n\r\n      setIsDataTableLoading(true);\r\n      setTimeSheetDataSet(data);\r\n      setIsDataTableLoading(false);\r\n    }\r\n  };*/}\r\n  const handleCommentClick = (commentObject: CommentScreenObject) => {\r\n        setOpenCommentDialog(!openCommentDialog);\r\n        if (commentObject) {\r\n            let data = timeSheetDataSet;\r\n            if (data) {\r\n                data.fTshSum[0].EMPNOTES = commentObject.employeeComment;\r\n                setEmployeeComment(data.fTshSum[0].EMPNOTES);\r\n                const commntObj: CommentScreenObject = {\r\n                  approver: commentObject.approver,\r\n                  approver1Comment: commentObject.approver1Comment,\r\n                  approver2Comment: commentObject.approver2Comment,\r\n                  employeeComment: data.fTshSum[0].EMPNOTES,\r\n                  reasonCode: commentObject.reasonCode,\r\n                  selectedId: commentObject.selectedId,\r\n              };\r\n              setCommentObject(commntObj);\r\n          }\r\n\r\n          setIsDataTableLoading(true);\r\n          setTimeSheetDataSet(data);\r\n          setIsDataTableLoading(false);\r\n      }\r\n  };\r\n\r\n  const handleCommentClose = () => {\r\n    setOpenCommentDialog(!openCommentDialog);\r\n  };\r\n\r\n  const handleCopyClick = () => {\r\n    // setWarningMessage(!warningMessage);\r\n    setOpenCopyDialog(!openCopyDialog);\r\n    };\r\n    const handleCopyOkClick = async (val: any) => {\r\n    if (val) {\r\n      if (val == \"\") {\r\n        val = 0;\r\n      }\r\n      const payDate: any = periods.filter((date: any) => {\r\n        return date.WeekNo == val;\r\n      });\r\n      const loggedInUserID = localStorage.getItem(constantClass.ID) || \"\";\r\n      if (selectedEmployeeId.trim().length == 0) {\r\n        setSelectedEmployeeId(loggedInUserID);\r\n      }\r\n      if (payDate.length == 1) {\r\n        const response: ResponseDTO = await copyTimeSheet(\r\n          selectedEmployeeId || loggedInUserID,\r\n          selectedTimeSheetPayDate,\r\n          payDate[0].PayDate.split(\"T\")[0]\r\n        );\r\n        if (response.code === 200) {\r\n          const data = response.data;\r\n          setTimeSheetDataResponse(response, false);\r\n        }\r\n      }\r\n    }\r\n    setOpenCopyDialog(!openCopyDialog);\r\n  };\r\n  {/*\r\n  const handleCopyOkClick = async (val: any) => {\r\n    if (val) {\r\n      if (val == \"\") {\r\n        val = 0;\r\n      }\r\n      const payDate: any = periods.filter((date: any) => {\r\n        return date.WeekNo == val;\r\n      });\r\n      if (payDate.length == 1) {\r\n        const response: ResponseDTO = await copyTimeSheet(\r\n          selectedEmployeeId,\r\n          selectedTimeSheetPayDate,\r\n          payDate[0].PayDate.split(\"T\")[0]\r\n        );\r\n        if (response.code === 200) {\r\n          const data = response.data;\r\n          setTimeSheetDataResponse(response, false);\r\n        }\r\n      }\r\n    }\r\n    setOpenCopyDialog(!openCopyDialog);\r\n  };\r\n  */}\r\n  // const handleCopyOkClick = async (val: any) => {\r\n  //   if (val) {\r\n  //     if (val == \"\") {\r\n  //       val = 0;\r\n  //     }\r\n  //     const payDate: any = periods.filter((date: any) => {\r\n  //       return date.WeekNo == val;\r\n  //     });\r\n  //     if (payDate.length == 1) {\r\n  //       const data: any = await Api.copyTimeSheet(\r\n  //         selectedEmployeeId,\r\n  //         selectedTimeSheetPayDate,\r\n  //         payDate[0].PayDate.split(\"T\")[0]\r\n  //       );\r\n  //       if (data) {\r\n  //         //SWAL\r\n  //       }\r\n  //     }\r\n  //   }\r\n  //   setOpenCopyDialog(!openCopyDialog);\r\n  // };\r\n  const handleCopyClose = () => {\r\n    setOpenCopyDialog(!openCopyDialog);\r\n  };\r\n\r\n  const getPeriods = async () => {\r\n    const result: ResponseDTO = await getEndingWeek();\r\n\r\n    if (result.code === 200) {\r\n      const periodList = result.data;\r\n      let timeSheetPeriodList: any = [];\r\n      for (let i = 0; i < periodList.length; i++) {\r\n        if (periodList[i].CurPayDate == 1) {\r\n          timeSheetPeriodList.push(periodList[i]);\r\n          return timeSheetPeriodList;\r\n        }\r\n        timeSheetPeriodList.push(periodList[i]);\r\n      }\r\n    }\r\n  };\r\n\r\n  // const getPeriods = async () => {\r\n  //   const periodList = await Api.getEndingWeek();\r\n  //   let timeSheetPeriodList: any = [];\r\n  //   for (let i = 0; i < periodList.length; i++) {\r\n  //     if (periodList[i].CurPayDate == 1) {\r\n  //       timeSheetPeriodList.push(periodList[i]);\r\n  //       return timeSheetPeriodList;\r\n  //     }\r\n  //     timeSheetPeriodList.push(periodList[i]);\r\n  //   }\r\n  // };\r\n\r\n  const getMonth = (monthNo: number) => {\r\n    const months = [];\r\n    months[1] = \"Jan\";\r\n    months[2] = \"Feb\";\r\n    months[3] = \"Mar\";\r\n    months[4] = \"Apr\";\r\n    months[5] = \"May\";\r\n    months[6] = \"Jun\";\r\n    months[7] = \"Jul\";\r\n    months[8] = \"Aug\";\r\n    months[9] = \"Sep\";\r\n    months[10] = \"Oct\";\r\n    months[11] = \"Nov\";\r\n    months[12] = \"Dec\";\r\n\r\n    return months[monthNo];\r\n  };\r\n\r\n  const mapTimeSheetDataBeforeSave = (\r\n    rowsData: TimeEntryDataTable[],\r\n    defaultStructure: FTmpT\r\n  ) => {\r\n    return rows.map((element: TimeEntryDataTable) => {\r\n      return {\r\n        Code01: element.l1,\r\n        Code02: element.jobCode, //jobcode\r\n        Code03: element.l2, // l2\r\n        Code04: element.l3, //, //l3\r\n        Code05: (defaultStructure && defaultStructure.Code05) || \"\",\r\n        Dept: element.l5,\r\n        Classifctn: element.classification,\r\n        Location: element.location, //,\r\n        Total: parseFloat(element.total.toString()),\r\n        Code06: element.l4,\r\n        Code07: (defaultStructure && defaultStructure.Code07) || \"\",\r\n        Code08: element.l5,\r\n        Code09: (defaultStructure && defaultStructure.Code09) || \"\",\r\n        Code10: (defaultStructure && defaultStructure.Code10) || \"\",\r\n        EnteredBy: (defaultStructure && defaultStructure.EnteredBy) || \"\",\r\n        DateEdited:\r\n          (defaultStructure && defaultStructure.DateEdited) ||\r\n          \"1900-01-01T00:00:00\",\r\n        DateAdded:\r\n          (defaultStructure && defaultStructure.DateAdded) ||\r\n          \"1900-01-01T00:00:00\",\r\n        Holiday: (defaultStructure && defaultStructure.Holiday) || \"\",\r\n        Shift: (defaultStructure && defaultStructure.Shift) || \"\",\r\n        PCType: (defaultStructure && defaultStructure.PCType) || \"\",\r\n        OTF: (defaultStructure && defaultStructure.OTF) || 0,\r\n        RowNo: element.id,\r\n        ActDesc: (defaultStructure && defaultStructure.ActDesc) || \"\",\r\n        PostFreez: (defaultStructure && defaultStructure.PostFreez) || false,\r\n        L3_Title: (defaultStructure && defaultStructure.L3_Title) || \"\",\r\n        L4_Title: (defaultStructure && defaultStructure.Code06) || \"\",\r\n        Int_Change: element.int_change,\r\n        Hrs01: parseFloat(element.day1.toString()),\r\n        Hrs02: parseFloat(element.day2.toString()),\r\n        Hrs03: parseFloat(element.day3.toString()),\r\n        Hrs04: parseFloat(element.day4.toString()),\r\n        Hrs05: parseFloat(element.day5.toString()),\r\n        Hrs06: parseFloat(element.day6.toString()),\r\n        Hrs07: parseFloat(element.day7.toString()),\r\n      };\r\n    });\r\n  };\r\n  const saveTimeSheet = async () => {\r\n    if (timeSheetDataSet) {\r\n      let updatedData: TimeSheetDTO = timeSheetDataSet;\r\n      let newRow: FTmpT = updatedData.fTmpTs[0];\r\n      let updatedObject: FTmpT[] = mapTimeSheetDataBeforeSave(rows, newRow);\r\n\r\n      updatedData.fTmpTs = updatedObject;\r\n      updatedData.fTshSum[0].INT_CHANGE = 1;\r\n      updatedData.fTshSum[0].INT_KEY = 0; // if new records added\r\n\r\n      const result: ResponseDTO = await qTimeSaveFn(\"1\", updatedData);\r\n\r\n      if (result.code === 200) {\r\n        swal(\"QTIME\", \"Timesheet has been saved successfully\", \"success\").then(\r\n          (value) => {\r\n            setTimeSheetData(selectedTimeSheetPayDate, false);\r\n          }\r\n        );\r\n        // }\r\n      } else {\r\n        swal(\"QTIME\", result.data.ExceptionMessage, \"error\");\r\n      }\r\n    }\r\n  };\r\n\r\n  /*Rows related Calculation****************************************************************************************************************/\r\n  const calculateRowTotal = (updatedRow: any, fieldName?: any) => {\r\n    let total: any = 0;\r\n    let val: any = 0;\r\n    let fields = [\"day1\", \"day2\", \"day3\", \"day4\", \"day5\", \"day6\", \"day7\"];\r\n\r\n    for (let i = 0; i < fields.length; i++) {\r\n      if (updatedRow[fields[i]] == \"\") {\r\n        val = 0;\r\n      } else {\r\n        val = parseFloat(updatedRow[fields[i]]);\r\n      }\r\n      total = total + val;\r\n    }\r\n    return parseFloat(total).toFixed(1).toString();\r\n  };\r\n\r\n  const updateFinalTableRowTotal = (field = \"total\") => {\r\n    let fields: any = [\"day1\", \"day2\", \"day3\", \"day4\", \"day5\", \"day6\", \"day7\"];\r\n    let val = 0;\r\n    let total = 0;\r\n    for (let i = 0; i < fields.length; i++) {\r\n      if (totalTimeSheetRecords.length > 0) {\r\n        if (totalTimeSheetRecords[0][fields[i]] == \"\") {\r\n          val = 0;\r\n        } else {\r\n          val = parseFloat(totalTimeSheetRecords[0][fields[i]]);\r\n        }\r\n        total = total + val;\r\n      }\r\n    }\r\n\r\n    if (totalTimeSheetRecords.length > 0) {\r\n      if (total.toString().includes(\".\")) {\r\n        totalTimeSheetRecords[0][field] = total;\r\n      } else {\r\n        totalTimeSheetRecords[0][field] = total + \".0\";\r\n      }\r\n      setTotalTimeSheetRecords([...totalTimeSheetRecords]);\r\n    }\r\n  };\r\n  const getCorrectFormattedTimeSheet = (value: string) => {\r\n    if (value.trim().length > 0) {\r\n      if (value.includes(\".\")) {\r\n        return value;\r\n      }\r\n      return value + \".0\";\r\n    }\r\n    return \"0.0\";\r\n  };\r\n  const setTimeSheetData = async (\r\n    period: string,\r\n    isDisplayPressed: boolean\r\n  ) => {\r\n      showLoader();\r\n      const loggedInUserID = localStorage.getItem(constantClass.ID) || \"\";\r\n      if (selectedEmployeeId.trim().length == 0) {\r\n          setSelectedEmployeeId(loggedInUserID);\r\n      }\r\n    const result: ResponseDTO = await getTimeSheetData(\r\n        selectedEmployeeId || loggedInUserID,\r\n      period\r\n      );\r\n      \r\n      if (result.code === 200) {\r\n          setTimeSheetDataResponse(result, isDisplayPressed);\r\n      }\r\n      else {\r\n          swal(\"QTIME\", result.data.ExceptionMessage, \"error\");\r\n      }\r\n    hideLoader();\r\n  };\r\n\r\n  const setTimeSheetDataResponse = (result: any, isDisplayPressed: boolean) => {\r\n    const data: TimeSheetDTO = result.data;\r\n    if (data.fTmpTs.length > 0) {\r\n      const validRecords: FTmpT[] = data.fTmpTs.filter((element: FTmpT) => {\r\n        return element.Code01 && element.Code01.length > 0;\r\n      });\r\n      data.fTmpTs = validRecords;\r\n      const entryData: TimeEntryDataTable[] = data.fTmpTs.map(\r\n        (timeData, index) => {\r\n          return {\r\n            id: ++index,\r\n            jobCode: timeData.Code02,\r\n            l1: timeData.Code01,\r\n            l2: timeData.Code03,\r\n            l3: timeData.Code04,\r\n            l4: timeData.Code06,\r\n            l5: timeData.Code08,\r\n            classification: timeData.Classifctn,\r\n            location: timeData.Location || \"\",\r\n            l3Title: timeData.L3_Title,\r\n            l4Title: timeData.L4_Title,\r\n            total: getCorrectFormattedTimeSheet(timeData.Total),\r\n            day1: getCorrectFormattedTimeSheet(timeData.Hrs01),\r\n            day2: getCorrectFormattedTimeSheet(timeData.Hrs02),\r\n            day3: getCorrectFormattedTimeSheet(timeData.Hrs03),\r\n            day4: getCorrectFormattedTimeSheet(timeData.Hrs04),\r\n            day5: getCorrectFormattedTimeSheet(timeData.Hrs05),\r\n            day6: getCorrectFormattedTimeSheet(timeData.Hrs06),\r\n            day7: getCorrectFormattedTimeSheet(timeData.Hrs07),\r\n            int_change: timeData.Int_Change || 0,\r\n          };\r\n        }\r\n      );\r\n      setIsDataTableLoading(true);\r\n      setTimeSheetDataSet(data);\r\n      setIsDataTableLoading(false);\r\n      setRows(entryData);\r\n      setsubmitBtnCaption(data.fTshSum[0].STATUS);\r\n      setsubmittedStatus(data.fTshSum[0].StsTitle);\r\n      setEmployeeComment(data.fTshSum[0].EMPNOTES);\r\n      isGridEditable(data.fTshSum[0].STATUS);\r\n      updateHoliday(data.fTmpTsMisc);\r\n        setFooterMessage(data.fTmpTsMisc[0].MthToDateHrs);\r\n        let commentObj: CommentScreenObject = {\r\n            approver: undefined,\r\n            approver1Comment: data.fTshSum[0].SUPNOTES,\r\n            approver2Comment: data.fTshSum[0].PMNOTES,\r\n            employeeComment: data.fTshSum[0].EMPNOTES,\r\n            reasonCode: data.fTshSum[0].RjctReason,\r\n            selectedId: \"\",\r\n        };\r\n        setCommentObject(commentObj);\r\n    }\r\n\r\n    const entryTotData: any[] = data.fTmpTsTot.map((timeData, index) => {\r\n      if (index == 0) {\r\n        return {\r\n          id: index,\r\n          title: timeData.Code01,\r\n          total: getCorrectFormattedTimeSheet(timeData.Total),\r\n          day1: getCorrectFormattedTimeSheet(timeData.Hrs01),\r\n          day2: getCorrectFormattedTimeSheet(timeData.Hrs02),\r\n          day3: getCorrectFormattedTimeSheet(timeData.Hrs03),\r\n          day4: getCorrectFormattedTimeSheet(timeData.Hrs04),\r\n          day5: getCorrectFormattedTimeSheet(timeData.Hrs05),\r\n          day6: getCorrectFormattedTimeSheet(timeData.Hrs06),\r\n          day7: getCorrectFormattedTimeSheet(timeData.Hrs07),\r\n        };\r\n      }\r\n      if (index == 5) {\r\n        return {\r\n          id: index,\r\n          title: timeData.Code01,\r\n          total: timeData.Total || \"\",\r\n          day1: timeData.Hrs01 || \"\",\r\n          day2: timeData.Hrs02 || \"\",\r\n          day3: timeData.Hrs03 || \"\",\r\n          day4: timeData.Hrs04 || \"\",\r\n          day5: timeData.Hrs05 || \"\",\r\n          day6: timeData.Hrs06 || \"\",\r\n          day7: timeData.Hrs07 || \"\",\r\n        };\r\n      }\r\n      return {\r\n        id: index,\r\n        title: timeData.Code01,\r\n        total: timeData.Total,\r\n        day1: timeData.Hrs01,\r\n        day2: timeData.Hrs02,\r\n        day3: timeData.Hrs03,\r\n        day4: timeData.Hrs04,\r\n        day5: timeData.Hrs05,\r\n        day6: timeData.Hrs06,\r\n        day7: timeData.Hrs07,\r\n      };\r\n    });\r\n    if (entryTotData.length > 0) {\r\n      setTotalTimeSheetRecords(entryTotData);\r\n    }\r\n    if (data.fTmpTs.length == 0) {\r\n      if (isDisplayPressed) {\r\n        setOpen(!open);\r\n      }\r\n    }\r\n  };\r\n  const findobject = (searchObj: any, fieldName: string) => {\r\n    return searchObj.filter((element: any) => {\r\n      return element.field == fieldName;\r\n    });\r\n  };\r\n  const updateColumnHeaderBackground = (\r\n    searchObj: any,\r\n    fieldName: string,\r\n    className: string\r\n  ) => {\r\n    let object = findobject(searchObj, fieldName);\r\n    if (object.length == 1) {\r\n      object[0][\"headerClassName\"] = className;\r\n    }\r\n  };\r\n  const updateHoliday = (holidays: any) => {\r\n    let columns: GridColDef[] = timeSheetHeader;\r\n    if (holidays.length == 1) {\r\n      if (holidays[0].Holiday01 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day1\", \"red\");\r\n      } else if (holidays[0].Holiday01 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day1\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday02 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day2\", \"red\");\r\n      } else if (holidays[0].Holiday02 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day2\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday03 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day3\", \"red\");\r\n      } else if (holidays[0].Holiday03 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day3\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday04 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day4\", \"red\");\r\n      } else if (holidays[0].Holiday04 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day4\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday05 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day5\", \"red\");\r\n      } else if (holidays[0].Holiday05 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day5\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday06 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day6\", \"red\");\r\n      } else if (holidays[0].Holiday06 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day6\", \"blue\");\r\n      }\r\n      if (holidays[0].Holiday07 == -1) {\r\n        updateColumnHeaderBackground(columns, \"day7\", \"red\");\r\n      } else if (holidays[0].Holiday07 == 0) {\r\n        updateColumnHeaderBackground(columns, \"day7\", \"blue\");\r\n      }\r\n    }\r\n    updateTimeSheetHeader([...columns]);\r\n  };\r\n  const isGridEditable = (status: number) => {\r\n    switch (status) {\r\n      case 1:\r\n      case 2:\r\n        setIsDataTableEditable(true);\r\n        break;\r\n      case 3:\r\n      case 4:\r\n      case 5:\r\n      case 6:\r\n        setIsDataTableEditable(false);\r\n        break;\r\n      default:\r\n        setIsDataTableEditable(false);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const updateTotalDatTable = (field: Day, uniqueId: any, updatedVal: any) => {\r\n    if (updatedVal && updatedVal != \"\") {\r\n      let updatedRow = totalTimeSheetRecords.filter((data) => {\r\n        return data.id == uniqueId;\r\n      });\r\n      if (updatedRow) {\r\n        updatedRow[0][field] = updatedVal;\r\n      }\r\n    }\r\n  };\r\n  const updateRowTotal = (field: Day, uniqueId: any, updatedVal: any) => {\r\n    if (updatedVal && updatedVal != \"\") {\r\n      const timeSheetData = rows;\r\n      const updatedRow: TimeEntryDataTable[] = timeSheetData.filter(\r\n        (data: TimeEntryDataTable) => {\r\n          return data.id == uniqueId;\r\n        }\r\n      );\r\n      if (updatedRow) {\r\n        //update int_change\r\n        updatedRow[0][\"int_change\"] = 1;\r\n        if (updatedVal.toString().includes(\".\")) {\r\n          updatedRow[0][field] = updatedVal;\r\n        } else {\r\n          updatedRow[0][field] = updatedVal + \".0\";\r\n        }\r\n\r\n        const total = calculateRowTotal(updatedRow[0], field);\r\n        const changedTimeSheetRow = rows.filter((data: any) => {\r\n          return data.id == uniqueId;\r\n        });\r\n        if (changedTimeSheetRow.length > 0) {\r\n          if (total.includes(\".\")) {\r\n            changedTimeSheetRow[0][\"total\"] = total;\r\n          } else {\r\n            changedTimeSheetRow[0][\"total\"] = total + \".0\";\r\n          }\r\n          setRows([...rows]);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  //end\r\n  /*Column related Calculation****************************************************************************************************************/\r\n  const updateColumnTotal = (field: Day, uniqueId: any, updatedVal: any) => {\r\n    if (updatedVal && updatedVal != \"\") {\r\n      const timeSheetData = rows;\r\n      const updatedRow: TimeEntryDataTable[] = timeSheetData.filter(\r\n        (data: TimeEntryDataTable) => {\r\n          return data.id == uniqueId;\r\n        }\r\n      );\r\n      if (updatedRow) {\r\n        updatedRow[0][field] = parseFloat(\r\n          parseFloat(updatedVal).toFixed(1).toString()\r\n        );\r\n        setUpdatedField(field);\r\n        // const total = calculateColumnTotal(timeSheetData, field);\r\n        // if (totalTimeSheetRecords.length > 0) {\r\n        //   if (total.includes(\".\")) {\r\n        //     totalTimeSheetRecords[0][field] = total;\r\n        //   } else {\r\n        //     totalTimeSheetRecords[0][field] = total + \".0\";\r\n        //   }\r\n        //   setTotalTimeSheetRecords([...totalTimeSheetRecords]);\r\n        // }\r\n      }\r\n    }\r\n  };\r\n  const calculateColumnTotal = (updatedObj: any, fieldName: any) => {\r\n    let total: any = 0;\r\n    let val: any = 0;\r\n    for (let i = 0; i < updatedObj.length; i++) {\r\n      if (updatedObj[i][fieldName] == \"\") {\r\n        val = 0;\r\n      } else {\r\n        val = parseFloat(updatedObj[i][fieldName]);\r\n      }\r\n      total = total + val;\r\n    }\r\n    return parseFloat(total).toFixed(1).toString();\r\n  };\r\n\r\n  //end\r\n\r\n  const isValidFormat = (id: string, value: string) => {\r\n    let isValid = false;\r\n    let format = \"[0-9]{2}:[0-9]{2}\";\r\n    switch (parseInt(id)) {\r\n      case 1:\r\n        isValid = RegExp(format, \"g\").test(value);\r\n        break;\r\n      case 2:\r\n        isValid = RegExp(format, \"g\").test(value);\r\n        break;\r\n      case 3:\r\n        isValid = RegExp(format, \"g\").test(value);\r\n        break;\r\n      case 4:\r\n        isValid = RegExp(format, \"g\").test(value);\r\n        break;\r\n    }\r\n    return isValid;\r\n  };\r\n  const isValidValue = (value: string) => {\r\n    let isValidHour = false;\r\n    let isValidMinute = false;\r\n    isValidHour = parseInt(value.split(\":\")[0]) <= 23;\r\n    isValidMinute = parseInt(value.split(\":\")[1]) <= 59;\r\n    return isValidHour && isValidMinute;\r\n  };\r\n  const handleTotalDataTableEditCellChangeCommitted = React.useCallback(\r\n    ({ id, field, props }: GridEditCellPropsParams, event) => {\r\n      let isValid = false;\r\n      if (props.value) {\r\n        isValid = isValidFormat(id.toString(), props.value.toString());\r\n\r\n        if (!isValid) {\r\n          swal(\"QTIME\", \"Please Enter Correct Format as HH:MM\", \"warning\");\r\n        } else {\r\n          isValid = isValidValue(props.value.toString());\r\n          if (!isValid) {\r\n            swal(\"QTIME\", \"Please Enter Correct Values\", \"warning\");\r\n          }\r\n        }\r\n\r\n        if (isValid) {\r\n          updateTotalDatTable(field as Day, id, props.value);\r\n        }\r\n        setTotalTimeSheetRecords([...totalTimeSheetRecords]);\r\n      }\r\n    },\r\n    [totalTimeSheetRecords]\r\n  );\r\n\r\n  const isValidInput = (value: any) => {\r\n    let isValid = false;\r\n    if (typeof value === \"string\" && !Number.isNaN(Number(value))) {\r\n      value = Number(value);\r\n      isValid = true;\r\n    } else {\r\n      isValid = false;\r\n    }\r\n    return isValid;\r\n  };\r\n  const handleEditCellChangeCommitted = React.useCallback(\r\n    ({ id, field, props }: GridEditCellPropsParams, event) => {\r\n      let isValid = false;\r\n      const uniqueId = id;\r\n      const updatedVal = props.value;\r\n      const newState: any = {};\r\n      if (updatedVal) {\r\n        if (isValidInput(updatedVal.toString())) {\r\n          isValid =\r\n            isValidEntry(updatedVal) &&\r\n            isRowTotalValid(uniqueId, field, updatedVal) &&\r\n            isColTotalValid(uniqueId, field, updatedVal);\r\n\r\n          if (isValid) {\r\n            setRows([...rows]);\r\n          } else {\r\n            swal(\"QTIME\", \"Hours cannot exceed 24.0 hours\", \"warning\");\r\n            setRows([...rows]);\r\n          }\r\n\r\n          if (isValid) {\r\n            updateRowTotal(field as Day, uniqueId, updatedVal);\r\n            updateColumnTotal(field as Day, uniqueId, updatedVal);\r\n            updateFinalTableRowTotal(\"total\");\r\n          }\r\n          if (!isValid) {\r\n            setRows([...rows]);\r\n          } else {\r\n            const changedTimeSheetRow: any = rows.filter((data: any) => {\r\n              return data.id == uniqueId;\r\n            });\r\n            if (changedTimeSheetRow.length > 0) {\r\n              if (updatedVal.toString().includes(\".\")) {\r\n                changedTimeSheetRow[0][field] = updatedVal;\r\n              } else {\r\n                changedTimeSheetRow[0][field] = updatedVal + \".0\";\r\n              }\r\n            }\r\n            setRows([...rows]);\r\n          }\r\n        } else {\r\n          setRows([...rows]);\r\n          swal(\"QTIME\", \"Invalid input\", \"warning\");\r\n        }\r\n      }\r\n    },\r\n    [rows, editRowsModel]\r\n  );\r\n\r\n  const handleRowSelectionChange = (event: any) => {\r\n    setselectionRowIndex(event.selectionModel);\r\n  };\r\n\r\n  const isValidEntry = (val: any) => {\r\n    let isValid = false;\r\n    if (!isNaN(val)) {\r\n      if (val <= 24) {\r\n        isValid = true;\r\n      }\r\n    }\r\n    return isValid;\r\n  };\r\n  const isColTotalValid = (uniqueId: any, field: any, updatedVal: any) => {\r\n    let isValid = false;\r\n    const updatedRow = rows.filter((data: any) => {\r\n      return data.id == uniqueId;\r\n    });\r\n    if (updatedRow) {\r\n      const total = calculateColumnTotal(rows, field);\r\n      if (parseFloat(total) + parseFloat(updatedVal) <= 24) {\r\n        isValid = true;\r\n      }\r\n    }\r\n    return isValid;\r\n  };\r\n  const isRowTotalValid = (uniqueId: any, field: any, updatedVal: any) => {\r\n    let isValid = false;\r\n\r\n    const updatedRow: any = rows.filter((data: any) => {\r\n      return data.id == uniqueId;\r\n    });\r\n    if (updatedRow) {\r\n      const total = calculateRowTotal(updatedRow[0], field);\r\n      if (parseFloat(total) + parseFloat(updatedVal) <= 168) {\r\n        isValid = true;\r\n      }\r\n    }\r\n    return isValid;\r\n  };\r\n  const editableTotalDataTableRows = (params: any) => {\r\n    if (isDataTableEditable) {\r\n      if (params.id == 0) {\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  return (\r\n    <div>\r\n      {/* <Header /> */}\r\n      <CodeDialog\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        onOkPressed={handleClickOk}\r\n        setLoader={setLoader}\r\n        code={projectCode}\r\n        employeeId={selectedEmployeeId}\r\n      />\r\n\r\n      <CommentDialog\r\n        open={openCommentDialog}\r\n        onClose={handleCommentClose}\r\n        onOkPressed={handleCommentClick}\r\n        employeeComment={employeeComment}\r\n        rejectedCodes={[]}\r\n        isFrom={\"TimeSheet\"}\r\n        isApprover1={false}\r\n              isApprover2={false}\r\n              selectedObject={commentObject}\r\n      />\r\n      <CopyDialog\r\n        open={openCopyDialog}\r\n        onClose={handleCopyClose}\r\n        onOkPressed={handleCopyOkClick}\r\n        todayDate={\r\n          copyTimeSheetPayDateData.length > 0\r\n            ? copyTimeSheetPayDateData[0].key\r\n            : 0\r\n        }\r\n        data={copyTimeSheetPayDateData}\r\n      />\r\n      <CodeEntryWeek\r\n        onWeekObjectChange={handleWeekObjectChange}\r\n        handleEmployeeChange={handleEmployeeChange}\r\n      />\r\n      <StatusBar\r\n        onNewBtnClick={handleClickOpen}\r\n        onSaveClick={handleSaveClicked}\r\n        onDeleteClick={handleDeleteClicked}\r\n        onEditClick={handleEditClick}\r\n        onSubmitClicked={handleSubmitClick}\r\n        submittedStatus={submittedStatus}\r\n        submitBtnCaption={submitBtnCaption}\r\n        onCommentClick={handleCommentClickOpen}\r\n        onCopyClick={handleCopyClick}\r\n        newBtnCaption={newDisplayBtnCaption}\r\n        onCloseClick={props.onCloseClicked}\r\n      />\r\n      <div style={{ paddingBottom: 5 }}>\r\n        <DataTable\r\n          apiRef={timeSheetref}\r\n          columns={timeSheetHeader}\r\n          rowData={rows}\r\n          checkboxSelection={true}\r\n          editRowModel={editRowsModel}\r\n          editCellChangeCommitedFn={handleEditCellChangeCommitted}\r\n          rowSelectFn={undefined}\r\n          selectionModelChangeFn={handleRowSelectionChange}\r\n          isDataTableLoading={isDataTableLoading}\r\n          isDataTableEditable={isDataTableEditable}\r\n          isDataTableEditablefn={undefined}\r\n        />\r\n      </div>\r\n      <div style={{ paddingTop: 5 }}>\r\n        <DataTable\r\n          apiRef={totalTimeSheetRef}\r\n          columns={totalColumns}\r\n          rowData={totalTimeSheetRecords}\r\n          checkboxSelection={false}\r\n          editCellChangeCommitedFn={handleTotalDataTableEditCellChangeCommitted}\r\n          editRowModel={editTotalRowsModel}\r\n          rowSelectFn={undefined}\r\n          selectionModelChangeFn={undefined}\r\n          isDataTableLoading={isDataTableLoading}\r\n          isDataTableEditable={isDataTableEditable}\r\n          isDataTableEditablefn={editableTotalDataTableRows}\r\n        />\r\n      </div>\r\n      <div className=\"timesheetFooter\">{footerMessage}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timesheet;\r\n"]},"metadata":{},"sourceType":"module"}