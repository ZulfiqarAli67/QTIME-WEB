{"ast":null,"code":"import _regeneratorRuntime from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{makeStyles,createStyles}from\"@material-ui/core/styles\";import Grid from\"@material-ui/core/Grid\";import NativeSelectDropDown from\"../common/nativeDropdown\";import Typography from\"@material-ui/core/Typography\";import*as constantClass from\"../Constants/Constants\";import useFetch from\"../../contexts/use-effect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return createStyles({root:{flexGrow:1,paddingTop:10,margin:10},week:{display:\"flex\",flexDirection:\"row\",textAlign:\"center\",height:50,justifyContent:\"center\"},dropdownTitle:{display:\"flex\",justifyContent:\"center\",flexDirection:\"column\",width:\"15%\",textAlign:\"left\"},paper:{\"border-radius\":theme.spacing(0),border:\"1px solid #FFFFFF\",padding:theme.spacing(0),paddingLeft:theme.spacing(1),height:theme.spacing(6),display:\"flex\",\"justify-content\":\"center\",\"flex-direction\":\"column\"},primaryRow:{backgroundColor:\"#80d8ff\"},secondryRow:{backgroundColor:\"#f5f5f5\"},weekno:{paddingLeft:5,justifyContent:\"center\",display:\"flex\",flexDirection:\"column\",fontSize:\"1rem\",fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',fontWeight:400,lineHeight:1.5,letterSpacing:\"0.00938em\"},weeknolbl:{justifyContent:\"center\",display:\"flex\",flexDirection:\"column\",fontSize:\"1rem\",fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',fontWeight:400,lineHeight:1.5,letterSpacing:\"0.00938em\"},qTimeDropdown:{display:\"flex\",justifyContent:\"center\",flexWrap:\"wrap\",alignContent:\"flex-start\"},periodDropDownTitle:{width:\"40%\"}});});export default function CodeEntryWeek(props){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),periods=_useState2[0],setPeriods=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),employees=_useState4[0],setEmployees=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),weekNo=_useState6[0],setWeekNo=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectedEmployee=_useState8[0],setSelectedEmployee=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),periodObj=_useState10[0],setPeriodObject=_useState10[1];var _useState11=useState(String),_useState12=_slicedToArray(_useState11,2),currentWeek=_useState12[0],setCurrentWeek=_useState12[1];var _useFetch=useFetch(),getEmployeeList=_useFetch.getEmployeeList,getEndingWeek=_useFetch.getEndingWeek;useEffect(function(){getEmployees();getPeriodEnding();},[]);var getEmployees=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,filteredEmployee,loggedInId,loggedInSurname,loggedInOthername;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getEmployeeList(\"Id,SurName,OthrNames\");case 2:result=_context.sent;if(result.code===200){// const employeeList = result.data.slice(0, 49);\nfilteredEmployee=result.data.map(function(element){return{key:element.Id,value:\"\".concat(element.DispName)};});setEmployees(filteredEmployee);loggedInId=localStorage.getItem(constantClass.ID)||\"\";loggedInSurname=localStorage.getItem(constantClass.SURNAME)||\"\";loggedInOthername=localStorage.getItem(constantClass.OTHRNAMES)||\"\";if(loggedInId.length>0&&loggedInSurname.length>0&&loggedInOthername.length>0){setSelectedEmployee(loggedInId+\"-\"+\"\".concat(loggedInId,\" - \").concat(loggedInSurname,\" \").concat(loggedInOthername));}}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getEmployees(){return _ref.apply(this,arguments);};}();var getPeriodEnding=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result,periodList,currentPayWeek,filteredWeeks,currentPayWeekIndex;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getEndingWeek();case 2:result=_context2.sent;if(result.code===200){periodList=result.data;currentPayWeek=findCurrentWeekDate(periodList);filteredWeeks=periodList.map(function(element){return{key:element.WeekNo,value:element.PayDate.split(\"T\")[0]};});setPeriods(filteredWeeks);setPeriodObject(periodList);if(currentPayWeek&&currentPayWeek.length>0){setWeekNo(currentPayWeek[0].WeekNo);setCurrentWeek(currentPayWeek[0].WeekNo+\"-\"+currentPayWeek[0].PayDate.split(\"T\")[0]);currentPayWeekIndex=periodList.findIndex(function(element){return element.WeekNo==currentPayWeek[0].WeekNo;});if(currentPayWeekIndex>-1){props.onWeekObjectChange(periodList,currentPayWeekIndex);}}}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getPeriodEnding(){return _ref2.apply(this,arguments);};}();var findCurrentWeekDate=function findCurrentWeekDate(periodList){return periodList.filter(function(element){return element.CurPayDate==1;});};var onWeekChange=function onWeekChange(event){setWeekNo(event.target.value.split(\"-\")[0]);setCurrentWeek(event.target.value);props.onWeekObjectChange(periodObj,event.target.selectedIndex);};var employeeChange=function employeeChange(event){setSelectedEmployee(event.target.value);props.handleEmployeeChange(event);};return/*#__PURE__*/_jsx(\"div\",{className:classes.root+\" empDetailContainer\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:0,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:7,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.week,children:[/*#__PURE__*/_jsx(Typography,{className:classes.dropdownTitle+\" font15\",gutterBottom:true,children:\"Employee\"}),/*#__PURE__*/_jsx(NativeSelectDropDown,{elements:employees,selectedVal:selectedEmployee,onChangeEvt:employeeChange})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.week,children:[/*#__PURE__*/_jsx(\"label\",{className:classes.weeknolbl+\" font15\",children:\"Week no: \"}),/*#__PURE__*/_jsx(\"label\",{className:classes.weekno+\" font15\",children:weekNo})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.week,children:[/*#__PURE__*/_jsx(Typography,{className:\"\".concat(classes.dropdownTitle,\" \").concat(classes.periodDropDownTitle)+\" font15\",gutterBottom:true,children:\"Period Ending\"}),/*#__PURE__*/_jsx(NativeSelectDropDown,{selectedVal:currentWeek,elements:periods,onChangeEvt:onWeekChange})]})})]})});}","map":{"version":3,"sources":["E:/QTIME-WEB-FE/src/components/time-rentry-week/index.tsx"],"names":["useState","useEffect","makeStyles","createStyles","Grid","NativeSelectDropDown","Typography","constantClass","useFetch","useStyles","theme","root","flexGrow","paddingTop","margin","week","display","flexDirection","textAlign","height","justifyContent","dropdownTitle","width","paper","spacing","border","padding","paddingLeft","primaryRow","backgroundColor","secondryRow","weekno","fontSize","fontFamily","fontWeight","lineHeight","letterSpacing","weeknolbl","qTimeDropdown","flexWrap","alignContent","periodDropDownTitle","CodeEntryWeek","props","classes","periods","setPeriods","employees","setEmployees","weekNo","setWeekNo","selectedEmployee","setSelectedEmployee","periodObj","setPeriodObject","String","currentWeek","setCurrentWeek","getEmployeeList","getEndingWeek","getEmployees","getPeriodEnding","result","code","filteredEmployee","data","map","element","key","Id","value","DispName","loggedInId","localStorage","getItem","ID","loggedInSurname","SURNAME","loggedInOthername","OTHRNAMES","length","periodList","currentPayWeek","findCurrentWeekDate","filteredWeeks","WeekNo","PayDate","split","currentPayWeekIndex","findIndex","onWeekObjectChange","filter","CurPayDate","onWeekChange","event","target","selectedIndex","employeeChange","handleEmployeeChange"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport NativeSelectDropDown from \"../common/nativeDropdown\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Api, ResponseDTO } from \"../../utils/api/api\";\r\nimport * as constantClass from \"../Constants/Constants\";\r\nimport { isDebuggerStatement } from \"typescript\";\r\nimport useFetch from \"../../contexts/use-effect\";\r\n\r\ninterface CodeContentProps {\r\n  text: string;\r\n  select: any;\r\n  isPrimary: boolean;\r\n}\r\ninterface CodeEntryWeekProps {\r\n  onWeekObjectChange: any;\r\n  handleEmployeeChange: any;\r\n}\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      paddingTop: 10,\r\n      margin: 10,\r\n    },\r\n    week: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      textAlign: \"center\",\r\n      height: 50,\r\n      justifyContent: \"center\",\r\n    },\r\n    dropdownTitle: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      flexDirection: \"column\",\r\n      width: \"15%\",\r\n      textAlign: \"left\",\r\n    },\r\n    paper: {\r\n      \"border-radius\": theme.spacing(0),\r\n      border: \"1px solid #FFFFFF\",\r\n      padding: theme.spacing(0),\r\n      paddingLeft: theme.spacing(1),\r\n      height: theme.spacing(6),\r\n      display: \"flex\",\r\n      \"justify-content\": \"center\",\r\n      \"flex-direction\": \"column\",\r\n    },\r\n    primaryRow: {\r\n      backgroundColor: \"#80d8ff\",\r\n    },\r\n    secondryRow: {\r\n      backgroundColor: \"#f5f5f5\",\r\n    },\r\n    weekno: {\r\n      paddingLeft: 5,\r\n      justifyContent: \"center\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n\r\n      fontSize: \"1rem\",\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n      fontWeight: 400,\r\n      lineHeight: 1.5,\r\n      letterSpacing: \"0.00938em\",\r\n    },\r\n    weeknolbl: {\r\n      justifyContent: \"center\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      fontSize: \"1rem\",\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n      fontWeight: 400,\r\n      lineHeight: 1.5,\r\n      letterSpacing: \"0.00938em\",\r\n    },\r\n    qTimeDropdown: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      flexWrap: \"wrap\",\r\n      alignContent: \"flex-start\",\r\n    },\r\n    periodDropDownTitle: {\r\n      width: \"40%\",\r\n    },\r\n  })\r\n);\r\n\r\nexport default function CodeEntryWeek(props: CodeEntryWeekProps) {\r\n  let classes = useStyles();\r\n  let [periods, setPeriods] = useState([]);\r\n  let [employees, setEmployees] = useState([]);\r\n  let [weekNo, setWeekNo] = useState([]);\r\n  let [selectedEmployee, setSelectedEmployee] = useState(\"\");\r\n  let [periodObj, setPeriodObject] = useState([]);\r\n  let [currentWeek, setCurrentWeek] = useState(String);\r\n  const { getEmployeeList, getEndingWeek } = useFetch();\r\n\r\n  useEffect(() => {\r\n    getEmployees();\r\n    getPeriodEnding();\r\n  }, []);\r\n\r\n  const getEmployees = async () => {\r\n    const result: ResponseDTO = await getEmployeeList(\"Id,SurName,OthrNames\");\r\n\r\n    if (result.code === 200) {\r\n      // const employeeList = result.data.slice(0, 49);\r\n\r\n      const filteredEmployee = result.data.map((element: any) => {\r\n        return {\r\n          key: element.Id,\r\n          value: `${element.DispName}`,\r\n        };\r\n      });\r\n      setEmployees(filteredEmployee);\r\n      const loggedInId = localStorage.getItem(constantClass.ID) || \"\";\r\n      const loggedInSurname = localStorage.getItem(constantClass.SURNAME) || \"\";\r\n      const loggedInOthername =\r\n        localStorage.getItem(constantClass.OTHRNAMES) || \"\";\r\n      if (\r\n        loggedInId.length > 0 &&\r\n        loggedInSurname.length > 0 &&\r\n        loggedInOthername.length > 0\r\n      ) {\r\n        setSelectedEmployee(\r\n          loggedInId +\r\n            \"-\" +\r\n            `${loggedInId} - ${loggedInSurname} ${loggedInOthername}`\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPeriodEnding = async () => {\r\n    const result: ResponseDTO = await getEndingWeek();\r\n\r\n    if (result.code === 200) {\r\n      const periodList = result.data;\r\n      let currentPayWeek: any = findCurrentWeekDate(periodList);\r\n      const filteredWeeks = periodList.map((element: any) => {\r\n        return {\r\n          key: element.WeekNo,\r\n          value: element.PayDate.split(\"T\")[0],\r\n        };\r\n      });\r\n\r\n      setPeriods(filteredWeeks);\r\n      setPeriodObject(periodList);\r\n      if (currentPayWeek && currentPayWeek.length > 0) {\r\n        setWeekNo(currentPayWeek[0].WeekNo);\r\n        setCurrentWeek(\r\n          currentPayWeek[0].WeekNo +\r\n            \"-\" +\r\n            currentPayWeek[0].PayDate.split(\"T\")[0]\r\n        );\r\n        const currentPayWeekIndex = periodList.findIndex((element: any) => {\r\n          return element.WeekNo == currentPayWeek[0].WeekNo;\r\n        });\r\n        if (currentPayWeekIndex > -1) {\r\n          props.onWeekObjectChange(periodList, currentPayWeekIndex);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  let findCurrentWeekDate = (periodList: any) => {\r\n    return periodList.filter((element: any) => {\r\n      return element.CurPayDate == 1;\r\n    });\r\n  };\r\n  let onWeekChange = (event: any) => {\r\n    setWeekNo(event.target.value.split(\"-\")[0]);\r\n    setCurrentWeek(event.target.value);\r\n    props.onWeekObjectChange(periodObj, event.target.selectedIndex);\r\n  };\r\n\r\n  let employeeChange = (event: any) => {\r\n    setSelectedEmployee(event.target.value);\r\n    props.handleEmployeeChange(event);\r\n  };\r\n  return (\r\n    <div className={classes.root + \" empDetailContainer\"}>\r\n      <Grid container spacing={0}>\r\n        <Grid item xs={7}>\r\n          <div className={classes.week}>\r\n            <Typography\r\n              className={classes.dropdownTitle + \" font15\"}\r\n              gutterBottom\r\n            >\r\n              Employee\r\n            </Typography>\r\n            <NativeSelectDropDown\r\n              elements={employees}\r\n              selectedVal={selectedEmployee}\r\n              onChangeEvt={employeeChange}\r\n            ></NativeSelectDropDown>\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={2}>\r\n          <div className={classes.week}>\r\n            <label className={classes.weeknolbl + \" font15\"}>Week no: </label>\r\n            <label className={classes.weekno + \" font15\"}>{weekNo}</label>\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <div className={classes.week}>\r\n            <Typography\r\n              className={\r\n                `${classes.dropdownTitle} ${classes.periodDropDownTitle}` +\r\n                \" font15\"\r\n              }\r\n              gutterBottom\r\n            >\r\n              Period Ending\r\n            </Typography>\r\n            <NativeSelectDropDown\r\n              selectedVal={currentWeek}\r\n              elements={periods}\r\n              onChangeEvt={onWeekChange}\r\n            ></NativeSelectDropDown>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}