{"ast":null,"code":"import _regeneratorRuntime from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Avatar from\"@material-ui/core/Avatar\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import InputLabel from\"@material-ui/core/InputLabel\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import{useHistory,useLocation}from\"react-router-dom\";import{useAuth}from\"../../contexts/use-auth\";import swal from\"sweetalert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)},actions:{flex:\"0 0 auto\",display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"},\"actions-spacing\":{\"& >:not(:first-child)\":{marginLeft:8}}};});export default function SignIn(prop){var classes=useStyles();var history=useHistory();var location=useLocation();var auth=useAuth();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var onCancel=prop.onCancel;var _ref=location.state||{from:{pathname:\"/\"}},from=_ref.from;var handleSubmit=function handleSubmit(event){event.preventDefault();handleSignIn();};var handleSignIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return auth.signin(function(){},username,password);case 2:response=_context.sent;if(response==\"success\"){history.replace(from);}else if(response){swal(\"QTIME\",response,\"error\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSignIn(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Login to QTIME\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"UserId\"}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"userId\",name:\"userId\",autoComplete:\"userId\",autoFocus:true,value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(InputLabel,{children:\"Password\"}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.actions,\" \").concat(classes[\"actions-spacing\"]),children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.submit,children:\"Login\"}),/*#__PURE__*/_jsx(Button,{onClick:onCancel,variant:\"contained\",color:\"primary\",className:classes.submit,children:\"Cancel\"})]})]})]})]});}","map":{"version":3,"sources":["E:/QTIME-WEB-FE/src/components/login/login_form.tsx"],"names":["React","useState","Avatar","Button","CssBaseline","TextField","InputLabel","LockOutlinedIcon","Typography","makeStyles","Container","useHistory","useLocation","useAuth","swal","useStyles","theme","paper","display","flexDirection","alignItems","avatar","margin","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","actions","flex","justifyContent","marginLeft","SignIn","prop","classes","history","location","auth","username","setUsername","password","setPassword","onCancel","state","from","pathname","handleSubmit","event","preventDefault","handleSignIn","signin","response","replace","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  Redirect,\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { useAuth } from \"../../contexts/use-auth\";\r\nimport swal from \"sweetalert\";\r\n\r\ninterface LocationState {\r\n  from: any;\r\n}\r\n\r\ninterface SignInFormProp {\r\n  onCancel: () => void;\r\n}\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  actions: {\r\n    flex: \"0 0 auto\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  \"actions-spacing\": {\r\n    \"& >:not(:first-child)\": {\r\n      marginLeft: 8,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function SignIn(prop: SignInFormProp) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const auth = useAuth();\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const { onCancel } = prop;\r\n  const { from } = (location.state as LocationState) || {\r\n    from: { pathname: \"/\" },\r\n  };\r\n\r\n  const handleSubmit = (event: any) => {\r\n    event.preventDefault();\r\n    handleSignIn();\r\n  };\r\n\r\n  const handleSignIn = async () => {\r\n    const response = await auth.signin(() => {}, username, password);\r\n    if (response == \"success\") {\r\n      history.replace(from);\r\n    } else if (response) {\r\n      swal(\"QTIME\", response, \"error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Login to QTIME\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={handleSubmit}>\r\n          <InputLabel>UserId</InputLabel>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"userId\"\r\n            name=\"userId\"\r\n            autoComplete=\"userId\"\r\n            autoFocus\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <InputLabel>Password</InputLabel>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <div className={`${classes.actions} ${classes[\"actions-spacing\"]}`}>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Login\r\n            </Button>\r\n            <Button\r\n              onClick={onCancel}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}