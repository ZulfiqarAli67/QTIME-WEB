{"ast":null,"code":"import _slicedToArray from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import*as Constants from\"../components/Constants/Constants\";export default function useToken(){var mapTokenString=function mapTokenString(key){var obj=JSON.parse(key);return obj===null||obj===void 0?void 0:obj.sessionKey;};var getToken=function getToken(){var obj=localStorage.getItem(Constants.SESSION);return obj?mapTokenString(obj):\"\";};var _useState=useState(getToken()),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var saveToken=function saveToken(username,sessionKey){localStorage.setItem(Constants.SESSION,mapTokenObj(username,sessionKey));setToken(sessionKey);};var mapTokenObj=function mapTokenObj(userId,sessionKey){var obj={userId:userId,sessionKey:sessionKey};return JSON.stringify(obj);};var clearToken=function clearToken(){localStorage.clear();setToken(\"\");};return{setToken:saveToken,token:token,remove:clearToken};}","map":{"version":3,"sources":["E:/QTIME-WEB-FE/src/contexts/use-token.tsx"],"names":["useState","Constants","useToken","mapTokenString","key","obj","JSON","parse","sessionKey","getToken","localStorage","getItem","SESSION","token","setToken","saveToken","username","setItem","mapTokenObj","userId","stringify","clearToken","clear","remove"],"mappings":"sIAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,mCAA3B,CAGA,cAAe,SAASC,CAAAA,QAAT,EAAoB,CACjC,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,GAAD,CAAiB,CACtC,GAAMC,CAAAA,GAAsB,CAAGC,IAAI,CAACC,KAAL,CAAWH,GAAX,CAA/B,CAEA,MAAOC,CAAAA,GAAP,SAAOA,GAAP,iBAAOA,GAAG,CAAEG,UAAZ,CACD,CAJD,CAKA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMJ,CAAAA,GAAG,CAAGK,YAAY,CAACC,OAAb,CAAqBV,SAAS,CAACW,OAA/B,CAAZ,CACA,MAAOP,CAAAA,GAAG,CAAGF,cAAc,CAACE,GAAD,CAAjB,CAAyB,EAAnC,CACD,CAHD,CANiC,cAWPL,QAAQ,CAACS,QAAQ,EAAT,CAXD,wCAW1BI,KAX0B,eAWnBC,QAXmB,eAajC,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,QAAD,CAAmBR,UAAnB,CAA0C,CAC1DE,YAAY,CAACO,OAAb,CAAqBhB,SAAS,CAACW,OAA/B,CAAwCM,WAAW,CAACF,QAAD,CAAWR,UAAX,CAAnD,EACAM,QAAQ,CAACN,UAAD,CAAR,CACD,CAHD,CAKA,GAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAAiBX,UAAjB,CAAwC,CAC1D,GAAMH,CAAAA,GAAsB,CAAG,CAC7Bc,MAAM,CAANA,MAD6B,CAE7BX,UAAU,CAAVA,UAF6B,CAA/B,CAKA,MAAOF,CAAAA,IAAI,CAACc,SAAL,CAAef,GAAf,CAAP,CACD,CAPD,CAWA,GAAMgB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBX,YAAY,CAACY,KAAb,GACAR,QAAQ,CAAC,EAAD,CAAR,CACD,CAHD,CAKA,MAAO,CACLA,QAAQ,CAAEC,SADL,CAELF,KAAK,CAALA,KAFK,CAGLU,MAAM,CAAEF,UAHH,CAAP,CAKD","sourcesContent":["import { useState } from \"react\";\r\nimport * as Constants from \"../components/Constants/Constants\";\r\nimport { UserLocalStorage } from \"../utils/api/Models\";\r\n\r\nexport default function useToken() {\r\n  const mapTokenString = (key: string) => {\r\n    const obj : UserLocalStorage = JSON.parse(key);\r\n\r\n    return obj?.sessionKey\r\n  };\r\n  const getToken = () => {\r\n    const obj = localStorage.getItem(Constants.SESSION);\r\n    return obj ? mapTokenString(obj) : \"\"\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n\r\n  const saveToken = (username: string, sessionKey: string) => {\r\n    localStorage.setItem(Constants.SESSION, mapTokenObj(username, sessionKey));\r\n    setToken(sessionKey);\r\n  };\r\n\r\n  const mapTokenObj = (userId: string, sessionKey: string) => {\r\n    const obj : UserLocalStorage = {\r\n      userId,\r\n      sessionKey\r\n    };\r\n\r\n    return JSON.stringify(obj);\r\n  };\r\n\r\n  \r\n\r\n  const clearToken = () => {\r\n    localStorage.clear();\r\n    setToken(\"\");\r\n  };\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token,\r\n    remove: clearToken\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}