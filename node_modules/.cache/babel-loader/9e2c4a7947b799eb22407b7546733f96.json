{"ast":null,"code":"import _regeneratorRuntime from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/QTIME-WEB-FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from\"react\";import ApprovalTimeSheetClass from\"../ApprovalTimeSheet/ApprovalTimeSheetClass\";import Header from\"../header/header\";import Timesheet from\"../TimeSheet/timesheet\";import DashBoardPage from\"./DashBoardPage\";import*as constantClass from\"../Constants/Constants\";import ChangePasswordDialog from\"../ChangePassword/ChangePasswordDialog\";import About from\"../About/About\";import{getUserId}from\"../../utils/helper\";import{withHooksHOC}from\"../ApprovalTimeSheet/ApprovalTimeSheetHooks\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TimeEntryStatType;(function(TimeEntryStatType){TimeEntryStatType[TimeEntryStatType[\"unSubmittedTimeSheets\"]=1]=\"unSubmittedTimeSheets\";TimeEntryStatType[TimeEntryStatType[\"timeSheetsAwaitingApproval\"]=4]=\"timeSheetsAwaitingApproval\";TimeEntryStatType[TimeEntryStatType[\"timeSheetsApprovedLvl1\"]=5]=\"timeSheetsApprovedLvl1\";TimeEntryStatType[TimeEntryStatType[\"timeSheetsApprovedLvl2\"]=6]=\"timeSheetsApprovedLvl2\";TimeEntryStatType[TimeEntryStatType[\"rejectedTimeSheetsResubmit\"]=2]=\"rejectedTimeSheetsResubmit\";})(TimeEntryStatType||(TimeEntryStatType={}));var dashboard=/*#__PURE__*/function(_Component){_inherits(dashboard,_Component);var _super=_createSuper(dashboard);function dashboard(props){var _this;_classCallCheck(this,dashboard);_this=_super.call(this,props);_this.retrieveLoggedInUserDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var loggedInUserId,result,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:loggedInUserId=getUserId();if(!(loggedInUserId&&loggedInUserId.length>0)){_context.next=6;break;}_context.next=4;return _this.props.useFetch.getLoggedInUserDetails(loggedInUserId);case 4:result=_context.sent;if(result.code===200){response=result.data;if(response.length>0){localStorage.setItem(constantClass.EMAIL,response[0].email);localStorage.setItem(constantClass.USERLEVEL,response[0].USERLEVEL);localStorage.setItem(constantClass.SURNAME,response[0].SURNAME);localStorage.setItem(constantClass.OTHRNAMES,response[0].OTHRNAMES);localStorage.setItem(constantClass.INT_KEY,response[0].INT_KEY);localStorage.setItem(constantClass.ID,response[0].ID);localStorage.setItem(constantClass.ACTIVE,response[0].ACTIVE);localStorage.setItem(constantClass.DISPNAME,response[0].DispName);}}case 6:case\"end\":return _context.stop();}}},_callee);}));_this.refreshStats=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.retrieveDashBoardDetails();case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.retrieveDashBoardDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var result,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.props.useFetch.getDashboardStats();case 2:result=_context3.sent;if(result.code===200){response=result.data;if(response.fTmpTSEntrySts){_this.setState({showStats:true,unSubmittedTimeSheets:response.fTmpTSEntrySts[0].CountedRows,timeSheetsAwaitingApproval:response.fTmpTSEntrySts[1].CountedRows,timeSheetsApprovedLvl1:response.fTmpTSEntrySts[2].CountedRows,timeSheetsApprovedLvl2:response.fTmpTSEntrySts[3].CountedRows,rejectedTimeSheetsResubmit:response.fTmpTSEntrySts[4].CountedRows,timeSheetWaitingLvl1Approve:response.fTmpTSApprovalSts[0].CountedRows,timeSheetWaitingLvl2Approve:response.fTmpTSApprovalSts[1].CountedRows,reSubmitTimesheetAwaitedApproval:response.fTmpTSApprovalSts[2].CountedRows});}else{_this.setState({showStats:false});}}case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.switchToTimeSheet=function(){if(!_this.state.enterTimeSheet){_this.setState({enterTimeSheet:!_this.state.enterTimeSheet,approveTimeSheet:false,title:constantClass.ENTER_EDIT_TIMESHEET});}};_this.switchToApprovalTimeSheet=function(){if(!_this.state.approveTimeSheet){_this.setState({enterTimeSheet:false,approveTimeSheet:!_this.state.approveTimeSheet,title:constantClass.APPROVE_TIMESHEET});}};_this.openChangePassword=function(){_this.setState({changePassword:!_this.state.changePassword});};_this.openAbout=function(){_this.setState({showAboutScreen:!_this.state.showAboutScreen});};_this.switchToDashboard=function(){_this.setState({enterTimeSheet:false,approveTimeSheet:false,title:constantClass.DASHBOARD});};_this.state={title:constantClass.DASHBOARD,approveTimeSheet:false,enterTimeSheet:false,showStats:false,changePassword:false,showAboutScreen:false,isLoading:true,unSubmittedTimeSheets:0,timeSheetsAwaitingApproval:0,timeSheetsApprovedLvl1:0,timeSheetsApprovedLvl2:0,rejectedTimeSheetsResubmit:0,timeSheetWaitingLvl1Approve:0,timeSheetWaitingLvl2Approve:0,reSubmitTimesheetAwaitedApproval:0};return _this;}_createClass(dashboard,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.retrieveLoggedInUserDetails();case 2:_context4.next=4;return this.retrieveDashBoardDetails();case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{title:this.state.title,enterTimeSheet:this.switchToTimeSheet,approvalTimeSheet:this.switchToApprovalTimeSheet,changePassword:this.openChangePassword,openAboutScreen:this.openAbout}),!this.state.enterTimeSheet&&!this.state.approveTimeSheet&&/*#__PURE__*/_jsx(DashBoardPage,{refreshStats:this.refreshStats,showStatus:this.state.showStats,unSubmittedTimeSheets:this.state.unSubmittedTimeSheets,timeSheetsAwaitingApproval:this.state.timeSheetsAwaitingApproval,timeSheetsApprovedLvl1:this.state.timeSheetsApprovedLvl1,timeSheetsApprovedLvl2:this.state.timeSheetsApprovedLvl2,rejectedTimeSheetsResubmit:this.state.rejectedTimeSheetsResubmit,timeSheetWaitingLvl1Approve:this.state.timeSheetWaitingLvl1Approve,timeSheetWaitingLvl2Approve:this.state.timeSheetWaitingLvl2Approve,reSubmitTimesheetAwaitedApproval:this.state.reSubmitTimesheetAwaitedApproval}),this.state.showAboutScreen&&/*#__PURE__*/_jsx(About,{open:this.state.showAboutScreen,onClose:this.openAbout}),this.state.enterTimeSheet&&/*#__PURE__*/_jsx(Timesheet,{onCloseClicked:this.switchToDashboard}),this.state.approveTimeSheet&&/*#__PURE__*/_jsx(ApprovalTimeSheetClass,{onCloseClicked:this.switchToDashboard}),this.state.changePassword&&/*#__PURE__*/_jsx(ChangePasswordDialog,{open:this.state.changePassword,onClose:this.openChangePassword,selectedEmployee:localStorage.getItem(constantClass.ID)+\"-\"+localStorage.getItem(constantClass.ID)+\" - \"+localStorage.getItem(constantClass.SURNAME)+\" \"+localStorage.getItem(constantClass.OTHRNAMES)||\"\"})]});}}]);return dashboard;}(Component);export default withHooksHOC(dashboard);","map":{"version":3,"sources":["E:/QTIME-WEB-FE/src/components/Dashboard/dashboard.tsx"],"names":["Component","ApprovalTimeSheetClass","Header","Timesheet","DashBoardPage","constantClass","ChangePasswordDialog","About","getUserId","withHooksHOC","TimeEntryStatType","dashboard","props","retrieveLoggedInUserDetails","loggedInUserId","length","useFetch","getLoggedInUserDetails","result","code","response","data","localStorage","setItem","EMAIL","email","USERLEVEL","SURNAME","OTHRNAMES","INT_KEY","ID","ACTIVE","DISPNAME","DispName","refreshStats","retrieveDashBoardDetails","getDashboardStats","fTmpTSEntrySts","setState","showStats","unSubmittedTimeSheets","CountedRows","timeSheetsAwaitingApproval","timeSheetsApprovedLvl1","timeSheetsApprovedLvl2","rejectedTimeSheetsResubmit","timeSheetWaitingLvl1Approve","fTmpTSApprovalSts","timeSheetWaitingLvl2Approve","reSubmitTimesheetAwaitedApproval","switchToTimeSheet","state","enterTimeSheet","approveTimeSheet","title","ENTER_EDIT_TIMESHEET","switchToApprovalTimeSheet","APPROVE_TIMESHEET","openChangePassword","changePassword","openAbout","showAboutScreen","switchToDashboard","DASHBOARD","isLoading","getItem"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport ApprovalTimeSheetClass from \"../ApprovalTimeSheet/ApprovalTimeSheetClass\";\r\nimport Header from \"../header/header\";\r\nimport Timesheet from \"../TimeSheet/timesheet\";\r\nimport DashBoardPage from \"./DashBoardPage\";\r\nimport * as constantClass from \"../Constants/Constants\";\r\nimport { ResponseDTO } from \"../../utils/api/api\";\r\nimport ChangePasswordDialog from \"../ChangePassword/ChangePasswordDialog\";\r\nimport About from \"../About/About\";\r\nimport { getUserId } from \"../../utils/helper\";\r\nimport { withHooksHOC } from \"../ApprovalTimeSheet/ApprovalTimeSheetHooks\";\r\n\r\ninterface IDashboardState {\r\n  title: string;\r\n  approveTimeSheet: boolean;\r\n  enterTimeSheet: boolean;\r\n  changePassword: boolean;\r\n  showAboutScreen: boolean;\r\n  showStats: boolean;\r\n  unSubmittedTimeSheets: number;\r\n  timeSheetsAwaitingApproval: number;\r\n  timeSheetsApprovedLvl1: number;\r\n  timeSheetsApprovedLvl2: number;\r\n  rejectedTimeSheetsResubmit: number;\r\n  isLoading: boolean;\r\n  timeSheetWaitingLvl1Approve: number;\r\n  timeSheetWaitingLvl2Approve: number;\r\n  reSubmitTimesheetAwaitedApproval: number;\r\n}\r\nenum TimeEntryStatType {\r\n  unSubmittedTimeSheets = 1,\r\n  timeSheetsAwaitingApproval = 4,\r\n  timeSheetsApprovedLvl1 = 5,\r\n  timeSheetsApprovedLvl2 = 6,\r\n  rejectedTimeSheetsResubmit = 2,\r\n}\r\ninterface IDashboardProps {\r\n  useFetch: any;\r\n}\r\nclass dashboard extends Component<IDashboardProps, IDashboardState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      title: constantClass.DASHBOARD,\r\n      approveTimeSheet: false,\r\n      enterTimeSheet: false,\r\n      showStats: false,\r\n      changePassword: false,\r\n      showAboutScreen: false,\r\n      isLoading: true,\r\n      unSubmittedTimeSheets: 0,\r\n      timeSheetsAwaitingApproval: 0,\r\n      timeSheetsApprovedLvl1: 0,\r\n      timeSheetsApprovedLvl2: 0,\r\n      rejectedTimeSheetsResubmit: 0,\r\n      timeSheetWaitingLvl1Approve: 0,\r\n      timeSheetWaitingLvl2Approve: 0,\r\n      reSubmitTimesheetAwaitedApproval: 0,\r\n    };\r\n  }\r\n  async componentDidMount() {\r\n    await this.retrieveLoggedInUserDetails();\r\n    await this.retrieveDashBoardDetails();\r\n  }\r\n\r\n  private retrieveLoggedInUserDetails = async () => {\r\n    let loggedInUserId = getUserId();\r\n    if (loggedInUserId && loggedInUserId.length > 0) {\r\n      //const { getLoggedInUserDetails } = useFetch();\r\n      const result: ResponseDTO =\r\n        await this.props.useFetch.getLoggedInUserDetails(loggedInUserId);\r\n\r\n      if (result.code === 200) {\r\n        const response = result.data;\r\n        if (response.length > 0) {\r\n          localStorage.setItem(constantClass.EMAIL, response[0].email);\r\n          localStorage.setItem(constantClass.USERLEVEL, response[0].USERLEVEL);\r\n          localStorage.setItem(constantClass.SURNAME, response[0].SURNAME);\r\n          localStorage.setItem(constantClass.OTHRNAMES, response[0].OTHRNAMES);\r\n          localStorage.setItem(constantClass.INT_KEY, response[0].INT_KEY);\r\n          localStorage.setItem(constantClass.ID, response[0].ID);\r\n          localStorage.setItem(constantClass.ACTIVE, response[0].ACTIVE);\r\n          localStorage.setItem(constantClass.DISPNAME, response[0].DispName);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // private retrieveLoggedInUserDetails = async () => {\r\n  //   let loggedInUserId = localStorage.getItem(constantClass.LOGGEDIN_USERS);\r\n  //   if (loggedInUserId && loggedInUserId.length > 0) {\r\n  //     const response = await Api.getLoggedInUserDetails(loggedInUserId);\r\n  //     if (response) {\r\n  //       if (response.length > 0) {\r\n  //         localStorage.setItem(constantClass.EMAIL, response[0].email);\r\n  //         localStorage.setItem(constantClass.USERLEVEL, response[0].USERLEVEL);\r\n  //         localStorage.setItem(constantClass.SURNAME, response[0].SURNAME);\r\n  //         localStorage.setItem(constantClass.OTHRNAMES, response[0].OTHRNAMES);\r\n  //         localStorage.setItem(constantClass.INT_KEY, response[0].INT_KEY);\r\n  //         localStorage.setItem(constantClass.ID, response[0].ID);\r\n  //         localStorage.setItem(constantClass.ACTIVE, response[0].ACTIVE);\r\n  //       }\r\n  //     }\r\n\r\n  //   }\r\n  // };\r\n  private refreshStats = async () => {\r\n    await this.retrieveDashBoardDetails();\r\n  };\r\n  private retrieveDashBoardDetails = async () => {\r\n    //  const { getDashboardStats } = useFetch();\r\n    const result: ResponseDTO = await this.props.useFetch.getDashboardStats();\r\n\r\n    if (result.code === 200) {\r\n      const response = result.data;\r\n\r\n      if (response.fTmpTSEntrySts) {\r\n        this.setState({\r\n          showStats: true,\r\n          unSubmittedTimeSheets: response.fTmpTSEntrySts[0].CountedRows,\r\n          timeSheetsAwaitingApproval: response.fTmpTSEntrySts[1].CountedRows,\r\n          timeSheetsApprovedLvl1: response.fTmpTSEntrySts[2].CountedRows,\r\n          timeSheetsApprovedLvl2: response.fTmpTSEntrySts[3].CountedRows,\r\n          rejectedTimeSheetsResubmit: response.fTmpTSEntrySts[4].CountedRows,\r\n\r\n          timeSheetWaitingLvl1Approve:\r\n            response.fTmpTSApprovalSts[0].CountedRows,\r\n          timeSheetWaitingLvl2Approve:\r\n            response.fTmpTSApprovalSts[1].CountedRows,\r\n          reSubmitTimesheetAwaitedApproval:\r\n            response.fTmpTSApprovalSts[2].CountedRows,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          showStats: false,\r\n        });\r\n      }\r\n    }\r\n  };\r\n  // private retrieveDashBoardDetails = async () => {\r\n  //   const response: DashboardStats = await Api.getDashboardStats();\r\n  //   if (response) {\r\n  //     if (response.fTmpTSEntrySts) {\r\n  //       this.setState({\r\n  //         showStats: true,\r\n  //         unSubmittedTimeSheets: response.fTmpTSEntrySts[0].CountedRows,\r\n  //         timeSheetsAwaitingApproval: response.fTmpTSEntrySts[1].CountedRows,\r\n  //         timeSheetsApprovedLvl1: response.fTmpTSEntrySts[2].CountedRows,\r\n  //         timeSheetsApprovedLvl2: response.fTmpTSEntrySts[3].CountedRows,\r\n  //         rejectedTimeSheetsResubmit: response.fTmpTSEntrySts[4].CountedRows,\r\n\r\n  //         timeSheetWaitingLvl1Approve:\r\n  //           response.fTmpTSApprovalSts[0].CountedRows,\r\n  //         timeSheetWaitingLvl2Approve:\r\n  //           response.fTmpTSApprovalSts[1].CountedRows,\r\n  //         reSubmitTimesheetAwaitedApproval:\r\n  //           response.fTmpTSApprovalSts[2].CountedRows,\r\n  //       });\r\n  //     } else {\r\n  //       this.setState({\r\n  //         showStats: false,\r\n  //       });\r\n  //     }\r\n  //   }\r\n  // };\r\n  private switchToTimeSheet = () => {\r\n    if (!this.state.enterTimeSheet) {\r\n      this.setState({\r\n        enterTimeSheet: !this.state.enterTimeSheet,\r\n        approveTimeSheet: false,\r\n        title: constantClass.ENTER_EDIT_TIMESHEET,\r\n      });\r\n    }\r\n  };\r\n  private switchToApprovalTimeSheet = () => {\r\n    if (!this.state.approveTimeSheet) {\r\n      this.setState({\r\n        enterTimeSheet: false,\r\n        approveTimeSheet: !this.state.approveTimeSheet,\r\n        title: constantClass.APPROVE_TIMESHEET,\r\n      });\r\n    }\r\n  };\r\n  private openChangePassword = () => {\r\n    this.setState({\r\n      changePassword: !this.state.changePassword,\r\n    });\r\n  };\r\n  private openAbout = () => {\r\n    this.setState({\r\n      showAboutScreen: !this.state.showAboutScreen,\r\n    });\r\n  };\r\n  private switchToDashboard = () => {\r\n    this.setState({\r\n      enterTimeSheet: false,\r\n      approveTimeSheet: false,\r\n      title: constantClass.DASHBOARD,\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        {/* {this.state.isLoading && (\r\n          <div className=\"progressBar\">\r\n            <CircularProgress />\r\n          </div>\r\n        )} */}\r\n        <Header\r\n          title={this.state.title}\r\n          enterTimeSheet={this.switchToTimeSheet}\r\n          approvalTimeSheet={this.switchToApprovalTimeSheet}\r\n          changePassword={this.openChangePassword}\r\n          openAboutScreen={this.openAbout}\r\n        />\r\n        {!this.state.enterTimeSheet && !this.state.approveTimeSheet && (\r\n          <DashBoardPage\r\n            refreshStats={this.refreshStats}\r\n            showStatus={this.state.showStats}\r\n            unSubmittedTimeSheets={this.state.unSubmittedTimeSheets}\r\n            timeSheetsAwaitingApproval={this.state.timeSheetsAwaitingApproval}\r\n            timeSheetsApprovedLvl1={this.state.timeSheetsApprovedLvl1}\r\n            timeSheetsApprovedLvl2={this.state.timeSheetsApprovedLvl2}\r\n            rejectedTimeSheetsResubmit={this.state.rejectedTimeSheetsResubmit}\r\n            timeSheetWaitingLvl1Approve={this.state.timeSheetWaitingLvl1Approve}\r\n            timeSheetWaitingLvl2Approve={this.state.timeSheetWaitingLvl2Approve}\r\n            reSubmitTimesheetAwaitedApproval={\r\n              this.state.reSubmitTimesheetAwaitedApproval\r\n            }\r\n          />\r\n        )}\r\n        {this.state.showAboutScreen && (\r\n          <About open={this.state.showAboutScreen} onClose={this.openAbout} />\r\n        )}\r\n        {this.state.enterTimeSheet && (\r\n          <Timesheet onCloseClicked={this.switchToDashboard} />\r\n        )}\r\n        {this.state.approveTimeSheet && (\r\n          <ApprovalTimeSheetClass onCloseClicked={this.switchToDashboard} />\r\n        )}\r\n        {this.state.changePassword && (\r\n          <ChangePasswordDialog\r\n            open={this.state.changePassword}\r\n            onClose={this.openChangePassword}\r\n            selectedEmployee={\r\n              localStorage.getItem(constantClass.ID) +\r\n                \"-\" +\r\n                localStorage.getItem(constantClass.ID) +\r\n                \" - \" +\r\n                localStorage.getItem(constantClass.SURNAME) +\r\n                \" \" +\r\n                localStorage.getItem(constantClass.OTHRNAMES) || \"\"\r\n            }\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withHooksHOC(dashboard);\r\n"]},"metadata":{},"sourceType":"module"}